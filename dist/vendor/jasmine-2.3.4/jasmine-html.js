jasmineRequire.html=function(e){e.ResultsNode=jasmineRequire.ResultsNode(),e.HtmlReporter=jasmineRequire.HtmlReporter(e),e.QueryString=jasmineRequire.QueryString(),e.HtmlSpecFilter=jasmineRequire.HtmlSpecFilter()},jasmineRequire.HtmlReporter=function(e){function s(s){function a(e){return m().querySelector(".jasmine_html-reporter "+e)}function i(){var e=a("");e&&m().removeChild(e)}function n(e,s,t){for(var a=h(e),i=2;i<arguments.length;i++){var n=arguments[i];"string"==typeof n?a.appendChild(N(n)):n&&a.appendChild(n)}for(var r in s)"className"==r?a[r]=s[r]:a.setAttribute(r,s[r]);return a}function r(e,s){var t=1==s?e:e+"s";return""+s+" "+t}function l(e){return C("spec",e.fullName)}function c(e,s){return"?"+e+"="+s}function u(e){p.setAttribute("class","jasmine_html-reporter "+e)}function o(e){return e.failedExpectations.length+e.passedExpectations.length===0&&"passed"===e.status}var p,d,f=s.env||{},m=s.getContainer,h=s.createElement,N=s.createTextNode,v=s.onRaiseExceptionsClick||function(){},g=s.onThrowExpectationsClick||function(){},C=s.addToExistingQueryString||c,S=s.timer||t,R=0,b=0,y=0,x=[];this.initialize=function(){i(),p=n("div",{className:"jasmine_html-reporter"},n("div",{className:"banner"},n("a",{className:"title",href:"http://jasmine.github.io/",target:"_blank"}),n("span",{className:"version"},e.version)),n("ul",{className:"symbol-summary"}),n("div",{className:"alert"}),n("div",{className:"results"},n("div",{className:"failures"}))),m().appendChild(p),d=a(".symbol-summary")};var E;this.jasmineStarted=function(e){E=e.totalSpecsDefined||0,S.start()};var j=n("div",{className:"summary"}),k=new e.ResultsNode({},"",null),w=k;this.suiteStarted=function(e){w.addChild(e,"suite"),w=w.last()},this.suiteDone=function(e){"failed"==e.status&&x.push(e),w!=k&&(w=w.parent)},this.specStarted=function(e){w.addChild(e,"spec")};var q=[];return this.specDone=function(e){if(o(e)&&"undefined"!=typeof console&&"undefined"!=typeof console.error&&console.error("Spec '"+e.fullName+"' has no expectations."),"disabled"!=e.status&&R++,d.appendChild(n("li",{className:o(e)?"empty":e.status,id:"spec_"+e.id,title:e.fullName})),"failed"==e.status){b++;for(var s=n("div",{className:"spec-detail failed"},n("div",{className:"description"},n("a",{title:e.fullName,href:l(e)},e.fullName)),n("div",{className:"messages"})),t=s.childNodes[1],a=0;a<e.failedExpectations.length;a++){var i=e.failedExpectations[a];t.appendChild(n("div",{className:"result-message"},i.message)),t.appendChild(n("div",{className:"stack-trace"},i.stack))}q.push(s)}"pending"==e.status&&y++},this.jasmineDone=function(){function e(s,t){for(var a,i=0;i<s.children.length;i++){var r=s.children[i];if("suite"==r.type){var c=n("ul",{className:"suite",id:"suite-"+r.result.id},n("li",{className:"suite-detail"},n("a",{href:l(r.result)},r.result.description)));e(r,c),t.appendChild(c)}if("spec"==r.type){"specs"!=t.getAttribute("class")&&(a=n("ul",{className:"specs"}),t.appendChild(a));var u=r.result.description;o(r.result)&&(u="SPEC HAS NO EXPECTATIONS "+u),"pending"===r.result.status&&""!==r.result.pendingReason&&(u=u+" PENDING WITH MESSAGE: "+r.result.pendingReason),a.appendChild(n("li",{className:r.result.status,id:"spec-"+r.result.id},n("a",{href:l(r.result)},u)))}}}var s=a(".banner"),t=a(".alert");t.appendChild(n("span",{className:"duration"},"finished in "+S.elapsed()/1e3+"s")),s.appendChild(n("div",{className:"run-options"},n("span",{className:"trigger"},"Options"),n("div",{className:"payload"},n("div",{className:"exceptions"},n("input",{className:"raise",id:"raise-exceptions",type:"checkbox"}),n("label",{className:"label","for":"raise-exceptions"},"raise exceptions")),n("div",{className:"throw-failures"},n("input",{className:"throw",id:"throw-failures",type:"checkbox"}),n("label",{className:"label","for":"throw-failures"},"stop spec on expectation failure")))));var i=a("#raise-exceptions");i.checked=!f.catchingExceptions(),i.onclick=v;var c=a("#throw-failures");c.checked=f.throwingExpectationFailures(),c.onclick=g;var p=a(".run-options"),d=p.querySelector(".trigger"),m=p.querySelector(".payload"),h=/\bopen\b/;if(d.onclick=function(){h.test(m.className)?m.className=m.className.replace(h,""):m.className+=" open"},E>R){var N="Ran "+R+" of "+E+" specs - run all";t.appendChild(n("span",{className:"bar skipped"},n("a",{href:"?",title:"Run all specs"},N)))}var C="",w="bar ";for(E>0?(C+=r("spec",R)+", "+r("failure",b),y&&(C+=", "+r("pending spec",y)),w+=b>0?"failed":"passed"):(w+="skipped",C+="No specs found"),t.appendChild(n("span",{className:w},C)),W=0;W<x.length;W++)for(var A=x[W],H=0;H<A.failedExpectations.length;H++){var I="AfterAll "+A.failedExpectations[H].message,P="bar errored";t.appendChild(n("span",{className:P},I))}var F=a(".results");if(F.appendChild(j),e(k,j),q.length){t.appendChild(n("span",{className:"menu bar spec-list"},n("span",{},"Spec List | "),n("a",{className:"failures-menu",href:"#"},"Failures"))),t.appendChild(n("span",{className:"menu bar failure-list"},n("a",{className:"spec-list-menu",href:"#"},"Spec List"),n("span",{}," | Failures "))),a(".failures-menu").onclick=function(){u("failure-list")},a(".spec-list-menu").onclick=function(){u("spec-list")},u("failure-list");for(var T=a(".failures"),W=0;W<q.length;W++)T.appendChild(q[W])}},this}var t={start:function(){},elapsed:function(){return 0}};return s},jasmineRequire.HtmlSpecFilter=function(){function e(e){var s=e&&e.filterString()&&e.filterString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=new RegExp(s);this.matches=function(e){return t.test(e)}}return e},jasmineRequire.ResultsNode=function(){function e(s,t,a){this.result=s,this.type=t,this.parent=a,this.children=[],this.addChild=function(s,t){this.children.push(new e(s,t,this))},this.last=function(){return this.children[this.children.length-1]}}return e},jasmineRequire.QueryString=function(){function e(e){function s(e){var s=[];for(var t in e)s.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return"?"+s.join("&")}function t(){var s=e.getWindowLocation().search.substring(1),t=[],a={};if(s.length>0){t=s.split("&");for(var i=0;i<t.length;i++){var n=t[i].split("="),r=decodeURIComponent(n[1]);("true"===r||"false"===r)&&(r=JSON.parse(r)),a[decodeURIComponent(n[0])]=r}}return a}return this.navigateWithNewParam=function(s,t){e.getWindowLocation().search=this.fullStringWithNewParam(s,t)},this.fullStringWithNewParam=function(e,a){var i=t();return i[e]=a,s(i)},this.getParam=function(e){return t()[e]},this}return e};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9qYXNtaW5lLTIuMy40L2phc21pbmUtaHRtbC5qcyJdLCJuYW1lcyI6WyJqYXNtaW5lUmVxdWlyZSIsImh0bWwiLCJqJCIsIlJlc3VsdHNOb2RlIiwiSHRtbFJlcG9ydGVyIiwiUXVlcnlTdHJpbmciLCJIdG1sU3BlY0ZpbHRlciIsIm9wdGlvbnMiLCJmaW5kIiwic2VsZWN0b3IiLCJnZXRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xlYXJQcmlvciIsIm9sZFJlcG9ydGVyIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVEb20iLCJ0eXBlIiwiYXR0cnMiLCJjaGlsZHJlblZhckFyZ3MiLCJlbCIsImNyZWF0ZUVsZW1lbnQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY2hpbGQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiYXR0ciIsInNldEF0dHJpYnV0ZSIsInBsdXJhbGl6ZSIsInNpbmd1bGFyIiwiY291bnQiLCJ3b3JkIiwic3BlY0hyZWYiLCJyZXN1bHQiLCJhZGRUb0V4aXN0aW5nUXVlcnlTdHJpbmciLCJmdWxsTmFtZSIsImRlZmF1bHRRdWVyeVN0cmluZyIsImtleSIsInZhbHVlIiwic2V0TWVudU1vZGVUbyIsIm1vZGUiLCJodG1sUmVwb3J0ZXJNYWluIiwibm9FeHBlY3RhdGlvbnMiLCJmYWlsZWRFeHBlY3RhdGlvbnMiLCJwYXNzZWRFeHBlY3RhdGlvbnMiLCJzdGF0dXMiLCJzeW1ib2xzIiwiZW52Iiwib25SYWlzZUV4Y2VwdGlvbnNDbGljayIsIm9uVGhyb3dFeHBlY3RhdGlvbnNDbGljayIsInRpbWVyIiwibm9vcFRpbWVyIiwic3BlY3NFeGVjdXRlZCIsImZhaWx1cmVDb3VudCIsInBlbmRpbmdTcGVjQ291bnQiLCJmYWlsZWRTdWl0ZXMiLCJ0aGlzIiwiaW5pdGlhbGl6ZSIsImNsYXNzTmFtZSIsImhyZWYiLCJ0YXJnZXQiLCJ2ZXJzaW9uIiwidG90YWxTcGVjc0RlZmluZWQiLCJqYXNtaW5lU3RhcnRlZCIsInN0YXJ0Iiwic3VtbWFyeSIsInRvcFJlc3VsdHMiLCJjdXJyZW50UGFyZW50Iiwic3VpdGVTdGFydGVkIiwiYWRkQ2hpbGQiLCJsYXN0Iiwic3VpdGVEb25lIiwicHVzaCIsInBhcmVudCIsInNwZWNTdGFydGVkIiwiZmFpbHVyZXMiLCJzcGVjRG9uZSIsImNvbnNvbGUiLCJlcnJvciIsImlkIiwidGl0bGUiLCJmYWlsdXJlIiwibWVzc2FnZXMiLCJjaGlsZE5vZGVzIiwiZXhwZWN0YXRpb24iLCJtZXNzYWdlIiwic3RhY2siLCJqYXNtaW5lRG9uZSIsInN1bW1hcnlMaXN0IiwicmVzdWx0c1RyZWUiLCJkb21QYXJlbnQiLCJzcGVjTGlzdE5vZGUiLCJjaGlsZHJlbiIsInJlc3VsdE5vZGUiLCJzdWl0ZUxpc3ROb2RlIiwiZGVzY3JpcHRpb24iLCJnZXRBdHRyaWJ1dGUiLCJzcGVjRGVzY3JpcHRpb24iLCJwZW5kaW5nUmVhc29uIiwiYmFubmVyIiwiYWxlcnQiLCJlbGFwc2VkIiwiZm9yIiwicmFpc2VDaGVja2JveCIsImNoZWNrZWQiLCJjYXRjaGluZ0V4Y2VwdGlvbnMiLCJvbmNsaWNrIiwidGhyb3dDaGVja2JveCIsInRocm93aW5nRXhwZWN0YXRpb25GYWlsdXJlcyIsIm9wdGlvbnNNZW51Iiwib3B0aW9uc1RyaWdnZXIiLCJvcHRpb25zUGF5bG9hZCIsImlzT3BlbiIsInRlc3QiLCJyZXBsYWNlIiwic2tpcHBlZE1lc3NhZ2UiLCJzdGF0dXNCYXJNZXNzYWdlIiwic3RhdHVzQmFyQ2xhc3NOYW1lIiwiZmFpbGVkU3VpdGUiLCJqIiwiZXJyb3JCYXJNZXNzYWdlIiwiZXJyb3JCYXJDbGFzc05hbWUiLCJyZXN1bHRzIiwiZmFpbHVyZU5vZGUiLCJmaWx0ZXJTdHJpbmciLCJmaWx0ZXJQYXR0ZXJuIiwiUmVnRXhwIiwibWF0Y2hlcyIsInNwZWNOYW1lIiwidG9RdWVyeVN0cmluZyIsInBhcmFtTWFwIiwicVN0clBhaXJzIiwicHJvcCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJxdWVyeVN0cmluZ1RvUGFyYW1NYXAiLCJwYXJhbVN0ciIsImdldFdpbmRvd0xvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwicGFyYW1zIiwic3BsaXQiLCJwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInBhcnNlIiwibmF2aWdhdGVXaXRoTmV3UGFyYW0iLCJmdWxsU3RyaW5nV2l0aE5ld1BhcmFtIiwiZ2V0UGFyYW0iXSwibWFwcGluZ3MiOiJBQXNCQUEsZUFBZUMsS0FBTyxTQUFTQyxHQUM3QkEsRUFBR0MsWUFBY0gsZUFBZUcsY0FDaENELEVBQUdFLGFBQWVKLGVBQWVJLGFBQWFGLEdBQzlDQSxFQUFHRyxZQUFjTCxlQUFlSyxjQUNoQ0gsRUFBR0ksZUFBaUJOLGVBQWVNLGtCQUdyQ04sZUFBZUksYUFBZSxTQUFTRixHQU9yQyxRQUFTRSxHQUFhRyxHQW9RcEIsUUFBU0MsR0FBS0MsR0FDWixNQUFPQyxLQUFlQyxjQUFjLDBCQUE0QkYsR0FHbEUsUUFBU0csS0FFUCxHQUFJQyxHQUFjTCxFQUFLLEdBRXBCSyxJQUNESCxJQUFlSSxZQUFZRCxHQUkvQixRQUFTRSxHQUFVQyxFQUFNQyxFQUFPQyxHQUc5QixJQUFLLEdBRkRDLEdBQUtDLEVBQWNKLEdBRWRLLEVBQUksRUFBR0EsRUFBSUMsVUFBVUMsT0FBUUYsSUFBSyxDQUN6QyxHQUFJRyxHQUFRRixVQUFVRCxFQUVELGlCQUFWRyxHQUNUTCxFQUFHTSxZQUFZQyxFQUFlRixJQUUxQkEsR0FDRkwsRUFBR00sWUFBWUQsR0FLckIsSUFBSyxHQUFJRyxLQUFRVixHQUNILGFBQVJVLEVBQ0ZSLEVBQUdRLEdBQVFWLEVBQU1VLEdBRWpCUixFQUFHUyxhQUFhRCxFQUFNVixFQUFNVSxHQUloQyxPQUFPUixHQUdULFFBQVNVLEdBQVVDLEVBQVVDLEdBQzNCLEdBQUlDLEdBQWlCLEdBQVRELEVBQWFELEVBQVdBLEVBQVcsR0FFL0MsT0FBTyxHQUFLQyxFQUFRLElBQU1DLEVBRzVCLFFBQVNDLEdBQVNDLEdBQ2hCLE1BQU9DLEdBQXlCLE9B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LEVBQVNKLEVBQVNLLE1BQU0sSUFDeEIsS0FBSyxHQUFJekgsR0FBSSxFQUFHQSxFQUFJd0gsRUFBT3RILE9BQVFGLElBQUssQ0FDdEMsR0FBSTBILEdBQUlGLEVBQU94SCxHQUFHeUgsTUFBTSxLQUNwQnZHLEVBQVF5RyxtQkFBbUJELEVBQUUsS0FDbkIsU0FBVnhHLEdBQThCLFVBQVZBLEtBQ3RCQSxFQUFRMEcsS0FBS0MsTUFBTTNHLElBRXJCNEYsRUFBU2EsbUJBQW1CRCxFQUFFLEtBQU94RyxHQUl6QyxNQUFPNEYsR0EzQlQsTUFkQTFFLE1BQUswRixxQkFBdUIsU0FBUzdHLEVBQUtDLEdBQ3hDaEMsRUFBUW1JLG9CQUFvQkMsT0FBU2xGLEtBQUsyRix1QkFBdUI5RyxFQUFLQyxJQUd4RWtCLEtBQUsyRix1QkFBeUIsU0FBUzlHLEVBQUtDLEdBQzFDLEdBQUk0RixHQUFXSyxHQUVmLE9BREFMLEdBQVM3RixHQUFPQyxFQUNUMkYsRUFBY0MsSUFHdkIxRSxLQUFLNEYsU0FBVyxTQUFTL0csR0FDdkIsTUFBT2tHLEtBQXdCbEcsSUFHMUJtQixLQWdDVCxNQUFPcEQiLCJmaWxlIjoidmVuZG9yL2phc21pbmUtMi4zLjQvamFzbWluZS1odG1sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAoYykgMjAwOC0yMDE1IFBpdm90YWwgTGFic1xuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbmEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG53aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG5kaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbnBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xudGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG5FWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbk1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5OT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFXG5MSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG5PRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbldJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuKi9cbmphc21pbmVSZXF1aXJlLmh0bWwgPSBmdW5jdGlvbihqJCkge1xuICBqJC5SZXN1bHRzTm9kZSA9IGphc21pbmVSZXF1aXJlLlJlc3VsdHNOb2RlKCk7XG4gIGokLkh0bWxSZXBvcnRlciA9IGphc21pbmVSZXF1aXJlLkh0bWxSZXBvcnRlcihqJCk7XG4gIGokLlF1ZXJ5U3RyaW5nID0gamFzbWluZVJlcXVpcmUuUXVlcnlTdHJpbmcoKTtcbiAgaiQuSHRtbFNwZWNGaWx0ZXIgPSBqYXNtaW5lUmVxdWlyZS5IdG1sU3BlY0ZpbHRlcigpO1xufTtcblxuamFzbWluZVJlcXVpcmUuSHRtbFJlcG9ydGVyID0gZnVuY3Rpb24oaiQpIHtcblxuICB2YXIgbm9vcFRpbWVyID0ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbigpIHt9LFxuICAgIGVsYXBzZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIEh0bWxSZXBvcnRlcihvcHRpb25zKSB7XG4gICAgdmFyIGVudiA9IG9wdGlvbnMuZW52IHx8IHt9LFxuICAgICAgZ2V0Q29udGFpbmVyID0gb3B0aW9ucy5nZXRDb250YWluZXIsXG4gICAgICBjcmVhdGVFbGVtZW50ID0gb3B0aW9ucy5jcmVhdGVFbGVtZW50LFxuICAgICAgY3JlYXRlVGV4dE5vZGUgPSBvcHRpb25zLmNyZWF0ZVRleHROb2RlLFxuICAgICAgb25SYWlzZUV4Y2VwdGlvbnNDbGljayA9IG9wdGlvbnMub25SYWlzZUV4Y2VwdGlvbnNDbGljayB8fCBmdW5jdGlvbigpIHt9LFxuICAgICAgb25UaHJvd0V4cGVjdGF0aW9uc0NsaWNrID0gb3B0aW9ucy5vblRocm93RXhwZWN0YXRpb25zQ2xpY2sgfHwgZnVuY3Rpb24oKSB7fSxcbiAgICAgIGFkZFRvRXhpc3RpbmdRdWVyeVN0cmluZyA9IG9wdGlvbnMuYWRkVG9FeGlzdGluZ1F1ZXJ5U3RyaW5nIHx8IGRlZmF1bHRRdWVyeVN0cmluZyxcbiAgICAgIHRpbWVyID0gb3B0aW9ucy50aW1lciB8fCBub29wVGltZXIsXG4gICAgICByZXN1bHRzID0gW10sXG4gICAgICBzcGVjc0V4ZWN1dGVkID0gMCxcbiAgICAgIGZhaWx1cmVDb3VudCA9IDAsXG4gICAgICBwZW5kaW5nU3BlY0NvdW50ID0gMCxcbiAgICAgIGh0bWxSZXBvcnRlck1haW4sXG4gICAgICBzeW1ib2xzLFxuICAgICAgZmFpbGVkU3VpdGVzID0gW107XG5cbiAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyUHJpb3IoKTtcbiAgICAgIGh0bWxSZXBvcnRlck1haW4gPSBjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdqYXNtaW5lX2h0bWwtcmVwb3J0ZXInfSxcbiAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnYmFubmVyJ30sXG4gICAgICAgICAgY3JlYXRlRG9tKCdhJywge2NsYXNzTmFtZTogJ3RpdGxlJywgaHJlZjogJ2h0dHA6Ly9qYXNtaW5lLmdpdGh1Yi5pby8nLCB0YXJnZXQ6ICdfYmxhbmsnfSksXG4gICAgICAgICAgY3JlYXRlRG9tKCdzcGFuJywge2NsYXNzTmFtZTogJ3ZlcnNpb24nfSwgaiQudmVyc2lvbilcbiAgICAgICAgKSxcbiAgICAgICAgY3JlYXRlRG9tKCd1bCcsIHtjbGFzc05hbWU6ICdzeW1ib2wtc3VtbWFyeSd9KSxcbiAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnYWxlcnQnfSksXG4gICAgICAgIGNyZWF0ZURvbSgnZGl2Jywge2NsYXNzTmFtZTogJ3Jlc3VsdHMnfSxcbiAgICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdmYWlsdXJlcyd9KVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgZ2V0Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQoaHRtbFJlcG9ydGVyTWFpbik7XG5cbiAgICAgIHN5bWJvbHMgPSBmaW5kKCcuc3ltYm9sLXN1bW1hcnknKTtcbiAgICB9O1xuXG4gICAgdmFyIHRvdGFsU3BlY3NEZWZpbmVkO1xuICAgIHRoaXMuamFzbWluZVN0YXJ0ZWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB0b3RhbFNwZWNzRGVmaW5lZCA9IG9wdGlvbnMudG90YWxTcGVjc0RlZmluZWQgfHwgMDtcbiAgICAgIHRpbWVyLnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIHZhciBzdW1tYXJ5ID0gY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnc3VtbWFyeSd9KTtcblxuICAgIHZhciB0b3BSZXN1bHRzID0gbmV3IGokLlJlc3VsdHNOb2RlKHt9LCAnJywgbnVsbCksXG4gICAgICBjdXJyZW50UGFyZW50ID0gdG9wUmVzdWx0cztcblxuICAgIHRoaXMuc3VpdGVTdGFydGVkID0gZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICBjdXJyZW50UGFyZW50LmFkZENoaWxkKHJlc3VsdCwgJ3N1aXRlJyk7XG4gICAgICBjdXJyZW50UGFyZW50ID0gY3VycmVudFBhcmVudC5sYXN0KCk7XG4gICAgfTtcblxuICAgIHRoaXMuc3VpdGVEb25lID0gZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAnZmFpbGVkJykge1xuICAgICAgICBmYWlsZWRTdWl0ZXMucHVzaChyZXN1bHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudFBhcmVudCA9PSB0b3BSZXN1bHRzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY3VycmVudFBhcmVudCA9IGN1cnJlbnRQYXJlbnQucGFyZW50O1xuICAgIH07XG5cbiAgICB0aGlzLnNwZWNTdGFydGVkID0gZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICBjdXJyZW50UGFyZW50LmFkZENoaWxkKHJlc3VsdCwgJ3NwZWMnKTtcbiAgICB9O1xuXG4gICAgdmFyIGZhaWx1cmVzID0gW107XG4gICAgdGhpcy5zcGVjRG9uZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgaWYobm9FeHBlY3RhdGlvbnMocmVzdWx0KSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NwZWMgXFwnJyArIHJlc3VsdC5mdWxsTmFtZSArICdcXCcgaGFzIG5vIGV4cGVjdGF0aW9ucy4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gJ2Rpc2FibGVkJykge1xuICAgICAgICBzcGVjc0V4ZWN1dGVkKys7XG4gICAgICB9XG5cbiAgICAgIHN5bWJvbHMuYXBwZW5kQ2hpbGQoY3JlYXRlRG9tKCdsaScsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IG5vRXhwZWN0YXRpb25zKHJlc3VsdCkgPyAnZW1wdHknIDogcmVzdWx0LnN0YXR1cyxcbiAgICAgICAgICBpZDogJ3NwZWNfJyArIHJlc3VsdC5pZCxcbiAgICAgICAgICB0aXRsZTogcmVzdWx0LmZ1bGxOYW1lXG4gICAgICAgIH1cbiAgICAgICkpO1xuXG4gICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAnZmFpbGVkJykge1xuICAgICAgICBmYWlsdXJlQ291bnQrKztcblxuICAgICAgICB2YXIgZmFpbHVyZSA9XG4gICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnc3BlYy1kZXRhaWwgZmFpbGVkJ30sXG4gICAgICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdkZXNjcmlwdGlvbid9LFxuICAgICAgICAgICAgICBjcmVhdGVEb20oJ2EnLCB7dGl0bGU6IHJlc3VsdC5mdWxsTmFtZSwgaHJlZjogc3BlY0hyZWYocmVzdWx0KX0sIHJlc3VsdC5mdWxsTmFtZSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdtZXNzYWdlcyd9KVxuICAgICAgICAgICk7XG4gICAgICAgIHZhciBtZXNzYWdlcyA9IGZhaWx1cmUuY2hpbGROb2Rlc1sxXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5mYWlsZWRFeHBlY3RhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgZXhwZWN0YXRpb24gPSByZXN1bHQuZmFpbGVkRXhwZWN0YXRpb25zW2ldO1xuICAgICAgICAgIG1lc3NhZ2VzLmFwcGVuZENoaWxkKGNyZWF0ZURvbSgnZGl2Jywge2NsYXNzTmFtZTogJ3Jlc3VsdC1tZXNzYWdlJ30sIGV4cGVjdGF0aW9uLm1lc3NhZ2UpKTtcbiAgICAgICAgICBtZXNzYWdlcy5hcHBlbmRDaGlsZChjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdzdGFjay10cmFjZSd9LCBleHBlY3RhdGlvbi5zdGFjaykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZmFpbHVyZXMucHVzaChmYWlsdXJlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgIHBlbmRpbmdTcGVjQ291bnQrKztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5qYXNtaW5lRG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJhbm5lciA9IGZpbmQoJy5iYW5uZXInKTtcbiAgICAgIHZhciBhbGVydCA9IGZpbmQoJy5hbGVydCcpO1xuICAgICAgYWxlcnQuYXBwZW5kQ2hpbGQoY3JlYXRlRG9tKCdzcGFuJywge2NsYXNzTmFtZTogJ2R1cmF0aW9uJ30sICdmaW5pc2hlZCBpbiAnICsgdGltZXIuZWxhcHNlZCgpIC8gMTAwMCArICdzJykpO1xuXG4gICAgICBiYW5uZXIuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGNyZWF0ZURvbSgnZGl2JywgeyBjbGFzc05hbWU6ICdydW4tb3B0aW9ucycgfSxcbiAgICAgICAgICBjcmVhdGVEb20oJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ3RyaWdnZXInIH0sICdPcHRpb25zJyksXG4gICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7IGNsYXNzTmFtZTogJ3BheWxvYWQnIH0sXG4gICAgICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHsgY2xhc3NOYW1lOiAnZXhjZXB0aW9ucycgfSxcbiAgICAgICAgICAgICAgY3JlYXRlRG9tKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyYWlzZScsXG4gICAgICAgICAgICAgICAgaWQ6ICdyYWlzZS1leGNlcHRpb25zJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBjcmVhdGVEb20oJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdsYWJlbCcsICdmb3InOiAncmFpc2UtZXhjZXB0aW9ucycgfSwgJ3JhaXNlIGV4Y2VwdGlvbnMnKSksXG4gICAgICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHsgY2xhc3NOYW1lOiAndGhyb3ctZmFpbHVyZXMnIH0sXG4gICAgICAgICAgICAgIGNyZWF0ZURvbSgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAndGhyb3cnLFxuICAgICAgICAgICAgICAgIGlkOiAndGhyb3ctZmFpbHVyZXMnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCdcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGNyZWF0ZURvbSgnbGFiZWwnLCB7IGNsYXNzTmFtZTogJ2xhYmVsJywgJ2Zvcic6ICd0aHJvdy1mYWlsdXJlcycgfSwgJ3N0b3Agc3BlYyBvbiBleHBlY3RhdGlvbiBmYWlsdXJlJykpXG4gICAgICAgICAgKVxuICAgICAgICApKTtcblxuICAgICAgdmFyIHJhaXNlQ2hlY2tib3ggPSBmaW5kKCcjcmFpc2UtZXhjZXB0aW9ucycpO1xuXG4gICAgICByYWlzZUNoZWNrYm94LmNoZWNrZWQgPSAhZW52LmNhdGNoaW5nRXhjZXB0aW9ucygpO1xuICAgICAgcmFpc2VDaGVja2JveC5vbmNsaWNrID0gb25SYWlzZUV4Y2VwdGlvbnNDbGljaztcblxuICAgICAgdmFyIHRocm93Q2hlY2tib3ggPSBmaW5kKCcjdGhyb3ctZmFpbHVyZXMnKTtcbiAgICAgIHRocm93Q2hlY2tib3guY2hlY2tlZCA9IGVudi50aHJvd2luZ0V4cGVjdGF0aW9uRmFpbHVyZXMoKTtcbiAgICAgIHRocm93Q2hlY2tib3gub25jbGljayA9IG9uVGhyb3dFeHBlY3RhdGlvbnNDbGljaztcblxuICAgICAgdmFyIG9wdGlvbnNNZW51ID0gZmluZCgnLnJ1bi1vcHRpb25zJyksXG4gICAgICAgICAgb3B0aW9uc1RyaWdnZXIgPSBvcHRpb25zTWVudS5xdWVyeVNlbGVjdG9yKCcudHJpZ2dlcicpLFxuICAgICAgICAgIG9wdGlvbnNQYXlsb2FkID0gb3B0aW9uc01lbnUucXVlcnlTZWxlY3RvcignLnBheWxvYWQnKSxcbiAgICAgICAgICBpc09wZW4gPSAvXFxib3BlblxcYi87XG5cbiAgICAgIG9wdGlvbnNUcmlnZ2VyLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzT3Blbi50ZXN0KG9wdGlvbnNQYXlsb2FkLmNsYXNzTmFtZSkpIHtcbiAgICAgICAgICBvcHRpb25zUGF5bG9hZC5jbGFzc05hbWUgPSBvcHRpb25zUGF5bG9hZC5jbGFzc05hbWUucmVwbGFjZShpc09wZW4sICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zUGF5bG9hZC5jbGFzc05hbWUgKz0gJyBvcGVuJztcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKHNwZWNzRXhlY3V0ZWQgPCB0b3RhbFNwZWNzRGVmaW5lZCkge1xuICAgICAgICB2YXIgc2tpcHBlZE1lc3NhZ2UgPSAnUmFuICcgKyBzcGVjc0V4ZWN1dGVkICsgJyBvZiAnICsgdG90YWxTcGVjc0RlZmluZWQgKyAnIHNwZWNzIC0gcnVuIGFsbCc7XG4gICAgICAgIGFsZXJ0LmFwcGVuZENoaWxkKFxuICAgICAgICAgIGNyZWF0ZURvbSgnc3BhbicsIHtjbGFzc05hbWU6ICdiYXIgc2tpcHBlZCd9LFxuICAgICAgICAgICAgY3JlYXRlRG9tKCdhJywge2hyZWY6ICc/JywgdGl0bGU6ICdSdW4gYWxsIHNwZWNzJ30sIHNraXBwZWRNZXNzYWdlKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhciBzdGF0dXNCYXJNZXNzYWdlID0gJyc7XG4gICAgICB2YXIgc3RhdHVzQmFyQ2xhc3NOYW1lID0gJ2JhciAnO1xuXG4gICAgICBpZiAodG90YWxTcGVjc0RlZmluZWQgPiAwKSB7XG4gICAgICAgIHN0YXR1c0Jhck1lc3NhZ2UgKz0gcGx1cmFsaXplKCdzcGVjJywgc3BlY3NFeGVjdXRlZCkgKyAnLCAnICsgcGx1cmFsaXplKCdmYWlsdXJlJywgZmFpbHVyZUNvdW50KTtcbiAgICAgICAgaWYgKHBlbmRpbmdTcGVjQ291bnQpIHsgc3RhdHVzQmFyTWVzc2FnZSArPSAnLCAnICsgcGx1cmFsaXplKCdwZW5kaW5nIHNwZWMnLCBwZW5kaW5nU3BlY0NvdW50KTsgfVxuICAgICAgICBzdGF0dXNCYXJDbGFzc05hbWUgKz0gKGZhaWx1cmVDb3VudCA+IDApID8gJ2ZhaWxlZCcgOiAncGFzc2VkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1c0JhckNsYXNzTmFtZSArPSAnc2tpcHBlZCc7XG4gICAgICAgIHN0YXR1c0Jhck1lc3NhZ2UgKz0gJ05vIHNwZWNzIGZvdW5kJztcbiAgICAgIH1cblxuICAgICAgYWxlcnQuYXBwZW5kQ2hpbGQoY3JlYXRlRG9tKCdzcGFuJywge2NsYXNzTmFtZTogc3RhdHVzQmFyQ2xhc3NOYW1lfSwgc3RhdHVzQmFyTWVzc2FnZSkpO1xuXG4gICAgICBmb3IoaSA9IDA7IGkgPCBmYWlsZWRTdWl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGZhaWxlZFN1aXRlID0gZmFpbGVkU3VpdGVzW2ldO1xuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgZmFpbGVkU3VpdGUuZmFpbGVkRXhwZWN0YXRpb25zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgdmFyIGVycm9yQmFyTWVzc2FnZSA9ICdBZnRlckFsbCAnICsgZmFpbGVkU3VpdGUuZmFpbGVkRXhwZWN0YXRpb25zW2pdLm1lc3NhZ2U7XG4gICAgICAgICAgdmFyIGVycm9yQmFyQ2xhc3NOYW1lID0gJ2JhciBlcnJvcmVkJztcbiAgICAgICAgICBhbGVydC5hcHBlbmRDaGlsZChjcmVhdGVEb20oJ3NwYW4nLCB7Y2xhc3NOYW1lOiBlcnJvckJhckNsYXNzTmFtZX0sIGVycm9yQmFyTWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciByZXN1bHRzID0gZmluZCgnLnJlc3VsdHMnKTtcbiAgICAgIHJlc3VsdHMuYXBwZW5kQ2hpbGQoc3VtbWFyeSk7XG5cbiAgICAgIHN1bW1hcnlMaXN0KHRvcFJlc3VsdHMsIHN1bW1hcnkpO1xuXG4gICAgICBmdW5jdGlvbiBzdW1tYXJ5TGlzdChyZXN1bHRzVHJlZSwgZG9tUGFyZW50KSB7XG4gICAgICAgIHZhciBzcGVjTGlzdE5vZGU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0c1RyZWUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcmVzdWx0Tm9kZSA9IHJlc3VsdHNUcmVlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgIGlmIChyZXN1bHROb2RlLnR5cGUgPT0gJ3N1aXRlJykge1xuICAgICAgICAgICAgdmFyIHN1aXRlTGlzdE5vZGUgPSBjcmVhdGVEb20oJ3VsJywge2NsYXNzTmFtZTogJ3N1aXRlJywgaWQ6ICdzdWl0ZS0nICsgcmVzdWx0Tm9kZS5yZXN1bHQuaWR9LFxuICAgICAgICAgICAgICBjcmVhdGVEb20oJ2xpJywge2NsYXNzTmFtZTogJ3N1aXRlLWRldGFpbCd9LFxuICAgICAgICAgICAgICAgIGNyZWF0ZURvbSgnYScsIHtocmVmOiBzcGVjSHJlZihyZXN1bHROb2RlLnJlc3VsdCl9LCByZXN1bHROb2RlLnJlc3VsdC5kZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgc3VtbWFyeUxpc3QocmVzdWx0Tm9kZSwgc3VpdGVMaXN0Tm9kZSk7XG4gICAgICAgICAgICBkb21QYXJlbnQuYXBwZW5kQ2hpbGQoc3VpdGVMaXN0Tm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXN1bHROb2RlLnR5cGUgPT0gJ3NwZWMnKSB7XG4gICAgICAgICAgICBpZiAoZG9tUGFyZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSAhPSAnc3BlY3MnKSB7XG4gICAgICAgICAgICAgIHNwZWNMaXN0Tm9kZSA9IGNyZWF0ZURvbSgndWwnLCB7Y2xhc3NOYW1lOiAnc3BlY3MnfSk7XG4gICAgICAgICAgICAgIGRvbVBhcmVudC5hcHBlbmRDaGlsZChzcGVjTGlzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNwZWNEZXNjcmlwdGlvbiA9IHJlc3VsdE5vZGUucmVzdWx0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgaWYobm9FeHBlY3RhdGlvbnMocmVzdWx0Tm9kZS5yZXN1bHQpKSB7XG4gICAgICAgICAgICAgIHNwZWNEZXNjcmlwdGlvbiA9ICdTUEVDIEhBUyBOTyBFWFBFQ1RBVElPTlMgJyArIHNwZWNEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHJlc3VsdE5vZGUucmVzdWx0LnN0YXR1cyA9PT0gJ3BlbmRpbmcnICYmIHJlc3VsdE5vZGUucmVzdWx0LnBlbmRpbmdSZWFzb24gIT09ICcnKSB7XG4gICAgICAgICAgICAgIHNwZWNEZXNjcmlwdGlvbiA9IHNwZWNEZXNjcmlwdGlvbiArICcgUEVORElORyBXSVRIIE1FU1NBR0U6ICcgKyByZXN1bHROb2RlLnJlc3VsdC5wZW5kaW5nUmVhc29uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3BlY0xpc3ROb2RlLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgICBjcmVhdGVEb20oJ2xpJywge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiByZXN1bHROb2RlLnJlc3VsdC5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICBpZDogJ3NwZWMtJyArIHJlc3VsdE5vZGUucmVzdWx0LmlkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjcmVhdGVEb20oJ2EnLCB7aHJlZjogc3BlY0hyZWYocmVzdWx0Tm9kZS5yZXN1bHQpfSwgc3BlY0Rlc2NyaXB0aW9uKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmFpbHVyZXMubGVuZ3RoKSB7XG4gICAgICAgIGFsZXJ0LmFwcGVuZENoaWxkKFxuICAgICAgICAgIGNyZWF0ZURvbSgnc3BhbicsIHtjbGFzc05hbWU6ICdtZW51IGJhciBzcGVjLWxpc3QnfSxcbiAgICAgICAgICAgIGNyZWF0ZURvbSgnc3BhbicsIHt9LCAnU3BlYyBMaXN0IHwgJyksXG4gICAgICAgICAgICBjcmVhdGVEb20oJ2EnLCB7Y2xhc3NOYW1lOiAnZmFpbHVyZXMtbWVudScsIGhyZWY6ICcjJ30sICdGYWlsdXJlcycpKSk7XG4gICAgICAgIGFsZXJ0LmFwcGVuZENoaWxkKFxuICAgICAgICAgIGNyZWF0ZURvbSgnc3BhbicsIHtjbGFzc05hbWU6ICdtZW51IGJhciBmYWlsdXJlLWxpc3QnfSxcbiAgICAgICAgICAgIGNyZWF0ZURvbSgnYScsIHtjbGFzc05hbWU6ICdzcGVjLWxpc3QtbWVudScsIGhyZWY6ICcjJ30sICdTcGVjIExpc3QnKSxcbiAgICAgICAgICAgIGNyZWF0ZURvbSgnc3BhbicsIHt9LCAnIHwgRmFpbHVyZXMgJykpKTtcblxuICAgICAgICBmaW5kKCcuZmFpbHVyZXMtbWVudScpLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRNZW51TW9kZVRvKCdmYWlsdXJlLWxpc3QnKTtcbiAgICAgICAgfTtcbiAgICAgICAgZmluZCgnLnNwZWMtbGlzdC1tZW51Jykub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldE1lbnVNb2RlVG8oJ3NwZWMtbGlzdCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNldE1lbnVNb2RlVG8oJ2ZhaWx1cmUtbGlzdCcpO1xuXG4gICAgICAgIHZhciBmYWlsdXJlTm9kZSA9IGZpbmQoJy5mYWlsdXJlcycpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhaWx1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZmFpbHVyZU5vZGUuYXBwZW5kQ2hpbGQoZmFpbHVyZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzO1xuXG4gICAgZnVuY3Rpb24gZmluZChzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5qYXNtaW5lX2h0bWwtcmVwb3J0ZXIgJyArIHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhclByaW9yKCkge1xuICAgICAgLy8gcmV0dXJuIHRoZSByZXBvcnRlclxuICAgICAgdmFyIG9sZFJlcG9ydGVyID0gZmluZCgnJyk7XG5cbiAgICAgIGlmKG9sZFJlcG9ydGVyKSB7XG4gICAgICAgIGdldENvbnRhaW5lcigpLnJlbW92ZUNoaWxkKG9sZFJlcG9ydGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEb20odHlwZSwgYXR0cnMsIGNoaWxkcmVuVmFyQXJncykge1xuICAgICAgdmFyIGVsID0gY3JlYXRlRWxlbWVudCh0eXBlKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlVGV4dE5vZGUoY2hpbGQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRycykge1xuICAgICAgICBpZiAoYXR0ciA9PSAnY2xhc3NOYW1lJykge1xuICAgICAgICAgIGVsW2F0dHJdID0gYXR0cnNbYXR0cl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGx1cmFsaXplKHNpbmd1bGFyLCBjb3VudCkge1xuICAgICAgdmFyIHdvcmQgPSAoY291bnQgPT0gMSA/IHNpbmd1bGFyIDogc2luZ3VsYXIgKyAncycpO1xuXG4gICAgICByZXR1cm4gJycgKyBjb3VudCArICcgJyArIHdvcmQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3BlY0hyZWYocmVzdWx0KSB7XG4gICAgICByZXR1cm4gYWRkVG9FeGlzdGluZ1F1ZXJ5U3RyaW5nKCdzcGVjJywgcmVzdWx0LmZ1bGxOYW1lKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZhdWx0UXVlcnlTdHJpbmcoa2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuICc/JyArIGtleSArICc9JyArIHZhbHVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldE1lbnVNb2RlVG8obW9kZSkge1xuICAgICAgaHRtbFJlcG9ydGVyTWFpbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2phc21pbmVfaHRtbC1yZXBvcnRlciAnICsgbW9kZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9FeHBlY3RhdGlvbnMocmVzdWx0KSB7XG4gICAgICByZXR1cm4gKHJlc3VsdC5mYWlsZWRFeHBlY3RhdGlvbnMubGVuZ3RoICsgcmVzdWx0LnBhc3NlZEV4cGVjdGF0aW9ucy5sZW5ndGgpID09PSAwICYmXG4gICAgICAgIHJlc3VsdC5zdGF0dXMgPT09ICdwYXNzZWQnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBIdG1sUmVwb3J0ZXI7XG59O1xuXG5qYXNtaW5lUmVxdWlyZS5IdG1sU3BlY0ZpbHRlciA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBIdG1sU3BlY0ZpbHRlcihvcHRpb25zKSB7XG4gICAgdmFyIGZpbHRlclN0cmluZyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5maWx0ZXJTdHJpbmcoKSAmJiBvcHRpb25zLmZpbHRlclN0cmluZygpLnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCAnXFxcXCQmJyk7XG4gICAgdmFyIGZpbHRlclBhdHRlcm4gPSBuZXcgUmVnRXhwKGZpbHRlclN0cmluZyk7XG5cbiAgICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihzcGVjTmFtZSkge1xuICAgICAgcmV0dXJuIGZpbHRlclBhdHRlcm4udGVzdChzcGVjTmFtZSk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBIdG1sU3BlY0ZpbHRlcjtcbn07XG5cbmphc21pbmVSZXF1aXJlLlJlc3VsdHNOb2RlID0gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIFJlc3VsdHNOb2RlKHJlc3VsdCwgdHlwZSwgcGFyZW50KSB7XG4gICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblxuICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcblxuICAgIHRoaXMuYWRkQ2hpbGQgPSBmdW5jdGlvbihyZXN1bHQsIHR5cGUpIHtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChuZXcgUmVzdWx0c05vZGUocmVzdWx0LCB0eXBlLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIHRoaXMubGFzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIFJlc3VsdHNOb2RlO1xufTtcblxuamFzbWluZVJlcXVpcmUuUXVlcnlTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gUXVlcnlTdHJpbmcob3B0aW9ucykge1xuXG4gICAgdGhpcy5uYXZpZ2F0ZVdpdGhOZXdQYXJhbSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIG9wdGlvbnMuZ2V0V2luZG93TG9jYXRpb24oKS5zZWFyY2ggPSB0aGlzLmZ1bGxTdHJpbmdXaXRoTmV3UGFyYW0oa2V5LCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIHRoaXMuZnVsbFN0cmluZ1dpdGhOZXdQYXJhbSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBwYXJhbU1hcCA9IHF1ZXJ5U3RyaW5nVG9QYXJhbU1hcCgpO1xuICAgICAgcGFyYW1NYXBba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRvUXVlcnlTdHJpbmcocGFyYW1NYXApO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFBhcmFtID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gcXVlcnlTdHJpbmdUb1BhcmFtTWFwKClba2V5XTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgICBmdW5jdGlvbiB0b1F1ZXJ5U3RyaW5nKHBhcmFtTWFwKSB7XG4gICAgICB2YXIgcVN0clBhaXJzID0gW107XG4gICAgICBmb3IgKHZhciBwcm9wIGluIHBhcmFtTWFwKSB7XG4gICAgICAgIHFTdHJQYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwcm9wKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbU1hcFtwcm9wXSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuICc/JyArIHFTdHJQYWlycy5qb2luKCcmJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcXVlcnlTdHJpbmdUb1BhcmFtTWFwKCkge1xuICAgICAgdmFyIHBhcmFtU3RyID0gb3B0aW9ucy5nZXRXaW5kb3dMb2NhdGlvbigpLnNlYXJjaC5zdWJzdHJpbmcoMSksXG4gICAgICAgIHBhcmFtcyA9IFtdLFxuICAgICAgICBwYXJhbU1hcCA9IHt9O1xuXG4gICAgICBpZiAocGFyYW1TdHIubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMgPSBwYXJhbVN0ci5zcGxpdCgnJicpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBwID0gcGFyYW1zW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KHBbMV0pO1xuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnIHx8IHZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJhbU1hcFtkZWNvZGVVUklDb21wb25lbnQocFswXSldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcmFtTWFwO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIFF1ZXJ5U3RyaW5nO1xufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
