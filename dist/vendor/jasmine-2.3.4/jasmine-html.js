jasmineRequire.html=function(e){e.ResultsNode=jasmineRequire.ResultsNode(),e.HtmlReporter=jasmineRequire.HtmlReporter(e),e.QueryString=jasmineRequire.QueryString(),e.HtmlSpecFilter=jasmineRequire.HtmlSpecFilter()},jasmineRequire.HtmlReporter=function(e){function s(s){function a(e){return h().querySelector(".jasmine_html-reporter "+e)}function i(){var e=a("");e&&h().removeChild(e)}function n(e,s,t){for(var a=m(e),i=2;i<arguments.length;i++){var n=arguments[i];"string"==typeof n?a.appendChild(N(n)):n&&a.appendChild(n)}for(var r in s)"className"==r?a[r]=s[r]:a.setAttribute(r,s[r]);return a}function r(e,s){var t=1==s?e:e+"s";return""+s+" "+t}function l(e){return C("spec",e.fullName)}function c(e,s){return"?"+e+"="+s}function u(e){p.setAttribute("class","jasmine_html-reporter "+e)}function o(e){return e.failedExpectations.length+e.passedExpectations.length===0&&"passed"===e.status}var p,d,f=s.env||{},h=s.getContainer,m=s.createElement,N=s.createTextNode,v=s.onRaiseExceptionsClick||function(){},g=s.onThrowExpectationsClick||function(){},C=s.addToExistingQueryString||c,S=s.timer||t,R=0,b=0,y=0,x=[];this.initialize=function(){i(),p=n("div",{className:"jasmine_html-reporter"},n("div",{className:"banner"},n("a",{className:"title",href:"http://jasmine.github.io/",target:"_blank"}),n("span",{className:"version"},e.version)),n("ul",{className:"symbol-summary"}),n("div",{className:"alert"}),n("div",{className:"results"},n("div",{className:"failures"}))),h().appendChild(p),d=a(".symbol-summary")};var E;this.jasmineStarted=function(e){E=e.totalSpecsDefined||0,S.start()};var j=n("div",{className:"summary"}),k=new e.ResultsNode({},"",null),w=k;this.suiteStarted=function(e){w.addChild(e,"suite"),w=w.last()},this.suiteDone=function(e){"failed"==e.status&&x.push(e),w!=k&&(w=w.parent)},this.specStarted=function(e){w.addChild(e,"spec")};var q=[];return this.specDone=function(e){if(o(e)&&"undefined"!=typeof console&&"undefined"!=typeof console.error&&console.error("Spec '"+e.fullName+"' has no expectations."),"disabled"!=e.status&&R++,d.appendChild(n("li",{className:o(e)?"empty":e.status,id:"spec_"+e.id,title:e.fullName})),"failed"==e.status){b++;for(var s=n("div",{className:"spec-detail failed"},n("div",{className:"description"},n("a",{title:e.fullName,href:l(e)},e.fullName)),n("div",{className:"messages"})),t=s.childNodes[1],a=0;a<e.failedExpectations.length;a++){var i=e.failedExpectations[a];t.appendChild(n("div",{className:"result-message"},i.message)),t.appendChild(n("div",{className:"stack-trace"},i.stack))}q.push(s)}"pending"==e.status&&y++},this.jasmineDone=function(){function e(s,t){for(var a,i=0;i<s.children.length;i++){var r=s.children[i];if("suite"==r.type){var c=n("ul",{className:"suite",id:"suite-"+r.result.id},n("li",{className:"suite-detail"},n("a",{href:l(r.result)},r.result.description)));e(r,c),t.appendChild(c)}if("spec"==r.type){"specs"!=t.getAttribute("class")&&(a=n("ul",{className:"specs"}),t.appendChild(a));var u=r.result.description;o(r.result)&&(u="SPEC HAS NO EXPECTATIONS "+u),"pending"===r.result.status&&""!==r.result.pendingReason&&(u=u+" PENDING WITH MESSAGE: "+r.result.pendingReason),a.appendChild(n("li",{className:r.result.status,id:"spec-"+r.result.id},n("a",{href:l(r.result)},u)))}}}var s=a(".banner"),t=a(".alert");t.appendChild(n("span",{className:"duration"},"finished in "+S.elapsed()/1e3+"s")),s.appendChild(n("div",{className:"run-options"},n("span",{className:"trigger"},"Options"),n("div",{className:"payload"},n("div",{className:"exceptions"},n("input",{className:"raise",id:"raise-exceptions",type:"checkbox"}),n("label",{className:"label","for":"raise-exceptions"},"raise exceptions")),n("div",{className:"throw-failures"},n("input",{className:"throw",id:"throw-failures",type:"checkbox"}),n("label",{className:"label","for":"throw-failures"},"stop spec on expectation failure")))));var i=a("#raise-exceptions");i.checked=!f.catchingExceptions(),i.onclick=v;var c=a("#throw-failures");c.checked=f.throwingExpectationFailures(),c.onclick=g;var p=a(".run-options"),d=p.querySelector(".trigger"),h=p.querySelector(".payload"),m=/\bopen\b/;if(d.onclick=function(){m.test(h.className)?h.className=h.className.replace(m,""):h.className+=" open"},R<E){var N="Ran "+R+" of "+E+" specs - run all";t.appendChild(n("span",{className:"bar skipped"},n("a",{href:"?",title:"Run all specs"},N)))}var C="",w="bar ";for(E>0?(C+=r("spec",R)+", "+r("failure",b),y&&(C+=", "+r("pending spec",y)),w+=b>0?"failed":"passed"):(w+="skipped",C+="No specs found"),t.appendChild(n("span",{className:w},C)),W=0;W<x.length;W++)for(var A=x[W],H=0;H<A.failedExpectations.length;H++){var I="AfterAll "+A.failedExpectations[H].message,P="bar errored";t.appendChild(n("span",{className:P},I))}var F=a(".results");if(F.appendChild(j),e(k,j),q.length){t.appendChild(n("span",{className:"menu bar spec-list"},n("span",{},"Spec List | "),n("a",{className:"failures-menu",href:"#"},"Failures"))),t.appendChild(n("span",{className:"menu bar failure-list"},n("a",{className:"spec-list-menu",href:"#"},"Spec List"),n("span",{}," | Failures "))),a(".failures-menu").onclick=function(){u("failure-list")},a(".spec-list-menu").onclick=function(){u("spec-list")},u("failure-list");for(var T=a(".failures"),W=0;W<q.length;W++)T.appendChild(q[W])}},this}var t={start:function(){},elapsed:function(){return 0}};return s},jasmineRequire.HtmlSpecFilter=function(){function e(e){var s=e&&e.filterString()&&e.filterString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=new RegExp(s);this.matches=function(e){return t.test(e)}}return e},jasmineRequire.ResultsNode=function(){function e(s,t,a){this.result=s,this.type=t,this.parent=a,this.children=[],this.addChild=function(s,t){this.children.push(new e(s,t,this))},this.last=function(){return this.children[this.children.length-1]}}return e},jasmineRequire.QueryString=function(){function e(e){function s(e){var s=[];for(var t in e)s.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return"?"+s.join("&")}function t(){var s=e.getWindowLocation().search.substring(1),t=[],a={};if(s.length>0){t=s.split("&");for(var i=0;i<t.length;i++){var n=t[i].split("="),r=decodeURIComponent(n[1]);"true"!==r&&"false"!==r||(r=JSON.parse(r)),a[decodeURIComponent(n[0])]=r}}return a}return this.navigateWithNewParam=function(s,t){e.getWindowLocation().search=this.fullStringWithNewParam(s,t)},this.fullStringWithNewParam=function(e,a){var i=t();return i[e]=a,s(i)},this.getParam=function(e){return t()[e]},this}return e};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9qYXNtaW5lLTIuMy40L2phc21pbmUtaHRtbC5qcyJdLCJuYW1lcyI6WyJqYXNtaW5lUmVxdWlyZSIsImh0bWwiLCJqJCIsIlJlc3VsdHNOb2RlIiwiSHRtbFJlcG9ydGVyIiwiUXVlcnlTdHJpbmciLCJIdG1sU3BlY0ZpbHRlciIsIm9wdGlvbnMiLCJmaW5kIiwic2VsZWN0b3IiLCJnZXRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xlYXJQcmlvciIsIm9sZFJlcG9ydGVyIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVEb20iLCJ0eXBlIiwiYXR0cnMiLCJjaGlsZHJlblZhckFyZ3MiLCJlbCIsImNyZWF0ZUVsZW1lbnQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY2hpbGQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiYXR0ciIsInNldEF0dHJpYnV0ZSIsInBsdXJhbGl6ZSIsInNpbmd1bGFyIiwiY291bnQiLCJ3b3JkIiwic3BlY0hyZWYiLCJyZXN1bHQiLCJhZGRUb0V4aXN0aW5nUXVlcnlTdHJpbmciLCJmdWxsTmFtZSIsImRlZmF1bHRRdWVyeVN0cmluZyIsImtleSIsInZhbHVlIiwic2V0TWVudU1vZGVUbyIsIm1vZGUiLCJodG1sUmVwb3J0ZXJNYWluIiwibm9FeHBlY3RhdGlvbnMiLCJmYWlsZWRFeHBlY3RhdGlvbnMiLCJwYXNzZWRFeHBlY3RhdGlvbnMiLCJzdGF0dXMiLCJzeW1ib2xzIiwiZW52Iiwib25SYWlzZUV4Y2VwdGlvbnNDbGljayIsIm9uVGhyb3dFeHBlY3RhdGlvbnNDbGljayIsInRpbWVyIiwibm9vcFRpbWVyIiwic3BlY3NFeGVjdXRlZCIsImZhaWx1cmVDb3VudCIsInBlbmRpbmdTcGVjQ291bnQiLCJmYWlsZWRTdWl0ZXMiLCJ0aGlzIiwiaW5pdGlhbGl6ZSIsImNsYXNzTmFtZSIsImhyZWYiLCJ0YXJnZXQiLCJ2ZXJzaW9uIiwidG90YWxTcGVjc0RlZmluZWQiLCJqYXNtaW5lU3RhcnRlZCIsInN0YXJ0Iiwic3VtbWFyeSIsInRvcFJlc3VsdHMiLCJjdXJyZW50UGFyZW50Iiwic3VpdGVTdGFydGVkIiwiYWRkQ2hpbGQiLCJsYXN0Iiwic3VpdGVEb25lIiwicHVzaCIsInBhcmVudCIsInNwZWNTdGFydGVkIiwiZmFpbHVyZXMiLCJzcGVjRG9uZSIsImNvbnNvbGUiLCJlcnJvciIsImlkIiwidGl0bGUiLCJmYWlsdXJlIiwibWVzc2FnZXMiLCJjaGlsZE5vZGVzIiwiZXhwZWN0YXRpb24iLCJtZXNzYWdlIiwic3RhY2siLCJqYXNtaW5lRG9uZSIsInN1bW1hcnlMaXN0IiwicmVzdWx0c1RyZWUiLCJkb21QYXJlbnQiLCJzcGVjTGlzdE5vZGUiLCJjaGlsZHJlbiIsInJlc3VsdE5vZGUiLCJzdWl0ZUxpc3ROb2RlIiwiZGVzY3JpcHRpb24iLCJnZXRBdHRyaWJ1dGUiLCJzcGVjRGVzY3JpcHRpb24iLCJwZW5kaW5nUmVhc29uIiwiYmFubmVyIiwiYWxlcnQiLCJlbGFwc2VkIiwiZm9yIiwicmFpc2VDaGVja2JveCIsImNoZWNrZWQiLCJjYXRjaGluZ0V4Y2VwdGlvbnMiLCJvbmNsaWNrIiwidGhyb3dDaGVja2JveCIsInRocm93aW5nRXhwZWN0YXRpb25GYWlsdXJlcyIsIm9wdGlvbnNNZW51Iiwib3B0aW9uc1RyaWdnZXIiLCJvcHRpb25zUGF5bG9hZCIsImlzT3BlbiIsInRlc3QiLCJyZXBsYWNlIiwic2tpcHBlZE1lc3NhZ2UiLCJzdGF0dXNCYXJNZXNzYWdlIiwic3RhdHVzQmFyQ2xhc3NOYW1lIiwiZmFpbGVkU3VpdGUiLCJqIiwiZXJyb3JCYXJNZXNzYWdlIiwiZXJyb3JCYXJDbGFzc05hbWUiLCJyZXN1bHRzIiwiZmFpbHVyZU5vZGUiLCJmaWx0ZXJTdHJpbmciLCJmaWx0ZXJQYXR0ZXJuIiwiUmVnRXhwIiwibWF0Y2hlcyIsInNwZWNOYW1lIiwidG9RdWVyeVN0cmluZyIsInBhcmFtTWFwIiwicVN0clBhaXJzIiwicHJvcCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJxdWVyeVN0cmluZ1RvUGFyYW1NYXAiLCJwYXJhbVN0ciIsImdldFdpbmRvd0xvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwicGFyYW1zIiwic3BsaXQiLCJwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInBhcnNlIiwibmF2aWdhdGVXaXRoTmV3UGFyYW0iLCJmdWxsU3RyaW5nV2l0aE5ld1BhcmFtIiwiZ2V0UGFyYW0iXSwibWFwcGluZ3MiOiJBQXNCQUEsZUFBZUMsS0FBTyxTQUFTQyxHQUM3QkEsRUFBR0MsWUFBY0gsZUFBZUcsY0FDaENELEVBQUdFLGFBQWVKLGVBQWVJLGFBQWFGLEdBQzlDQSxFQUFHRyxZQUFjTCxlQUFlSyxjQUNoQ0gsRUFBR0ksZUFBaUJOLGVBQWVNLGtCQUdyQ04sZUFBZUksYUFBZSxTQUFTRixHQU9yQyxRQUFTRSxHQUFhRyxHQW9RcEIsUUFBU0MsR0FBS0MsR0FDWixNQUFPQyxLQUFlQyxjQUFjLDBCQUE0QkYsR0FHbEUsUUFBU0csS0FFUCxHQUFJQyxHQUFjTCxFQUFLLEdBRXBCSyxJQUNESCxJQUFlSSxZQUFZRCxHQUkvQixRQUFTRSxHQUFVQyxFQUFNQyxFQUFPQyxHQUc5QixJQUFLLEdBRkRDLEdBQUtDLEVBQWNKLEdBRWRLLEVBQUksRUFBR0EsRUFBSUMsVUFBVUMsT0FBUUYsSUFBSyxDQUN6QyxHQUFJRyxHQUFRRixVQUFVRCxFQUVELGlCQUFWRyxHQUNUTCxFQUFHTSxZQUFZQyxFQUFlRixJQUUxQkEsR0FDRkwsRUFBR00sWUFBWUQsR0FLckIsSUFBSyxHQUFJRyxLQUFRVixHQUNILGFBQVJVLEVBQ0ZSLEVBQUdRLEdBQVFWLEVBQU1VLEdBRWpCUixFQUFHUyxhQUFhRCxFQUFNVixFQUFNVSxHQUloQyxPQUFPUixHQUdULFFBQVNVLEdBQVVDLEVBQVVDLEdBQzNCLEdBQUlDLEdBQWlCLEdBQVRELEVBQWFELEVBQVdBLEVBQVcsR0FFL0MsT0FBTyxHQUFLQyxFQUFRLElBQU1DLEVBRzVCLFFBQVNDLEdBQVNDLEdBQ2hCLE1BQU9DLEdBQXlCLE9B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SCxFQUFTSixFQUFTSyxNQUFNLElBQ3hCLEtBQUssR0FBSXpILEdBQUksRUFBR0EsRUFBSXdILEVBQU90SCxPQUFRRixJQUFLLENBQ3RDLEdBQUkwSCxHQUFJRixFQUFPeEgsR0FBR3lILE1BQU0sS0FDcEJ2RyxFQUFReUcsbUJBQW1CRCxFQUFFLEdBQ25CLFVBQVZ4RyxHQUE4QixVQUFWQSxJQUN0QkEsRUFBUTBHLEtBQUtDLE1BQU0zRyxJQUVyQjRGLEVBQVNhLG1CQUFtQkQsRUFBRSxLQUFPeEcsR0FJekMsTUFBTzRGLEdBM0JULE1BZEExRSxNQUFLMEYscUJBQXVCLFNBQVM3RyxFQUFLQyxHQUN4Q2hDLEVBQVFtSSxvQkFBb0JDLE9BQVNsRixLQUFLMkYsdUJBQXVCOUcsRUFBS0MsSUFHeEVrQixLQUFLMkYsdUJBQXlCLFNBQVM5RyxFQUFLQyxHQUMxQyxHQUFJNEYsR0FBV0ssR0FFZixPQURBTCxHQUFTN0YsR0FBT0MsRUFDVDJGLEVBQWNDLElBR3ZCMUUsS0FBSzRGLFNBQVcsU0FBUy9HLEdBQ3ZCLE1BQU9rRyxLQUF3QmxHLElBRzFCbUIsS0FnQ1QsTUFBT3BEIiwiZmlsZSI6InZlbmRvci9qYXNtaW5lLTIuMy40L2phc21pbmUtaHRtbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMDgtMjAxNSBQaXZvdGFsIExhYnNcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nXG5hIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xud2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG5wZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cbnRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbmluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG5NRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRVxuTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG5XSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiovXG5qYXNtaW5lUmVxdWlyZS5odG1sID0gZnVuY3Rpb24oaiQpIHtcbiAgaiQuUmVzdWx0c05vZGUgPSBqYXNtaW5lUmVxdWlyZS5SZXN1bHRzTm9kZSgpO1xuICBqJC5IdG1sUmVwb3J0ZXIgPSBqYXNtaW5lUmVxdWlyZS5IdG1sUmVwb3J0ZXIoaiQpO1xuICBqJC5RdWVyeVN0cmluZyA9IGphc21pbmVSZXF1aXJlLlF1ZXJ5U3RyaW5nKCk7XG4gIGokLkh0bWxTcGVjRmlsdGVyID0gamFzbWluZVJlcXVpcmUuSHRtbFNwZWNGaWx0ZXIoKTtcbn07XG5cbmphc21pbmVSZXF1aXJlLkh0bWxSZXBvcnRlciA9IGZ1bmN0aW9uKGokKSB7XG5cbiAgdmFyIG5vb3BUaW1lciA9IHtcbiAgICBzdGFydDogZnVuY3Rpb24oKSB7fSxcbiAgICBlbGFwc2VkOiBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH1cbiAgfTtcblxuICBmdW5jdGlvbiBIdG1sUmVwb3J0ZXIob3B0aW9ucykge1xuICAgIHZhciBlbnYgPSBvcHRpb25zLmVudiB8fCB7fSxcbiAgICAgIGdldENvbnRhaW5lciA9IG9wdGlvbnMuZ2V0Q29udGFpbmVyLFxuICAgICAgY3JlYXRlRWxlbWVudCA9IG9wdGlvbnMuY3JlYXRlRWxlbWVudCxcbiAgICAgIGNyZWF0ZVRleHROb2RlID0gb3B0aW9ucy5jcmVhdGVUZXh0Tm9kZSxcbiAgICAgIG9uUmFpc2VFeGNlcHRpb25zQ2xpY2sgPSBvcHRpb25zLm9uUmFpc2VFeGNlcHRpb25zQ2xpY2sgfHwgZnVuY3Rpb24oKSB7fSxcbiAgICAgIG9uVGhyb3dFeHBlY3RhdGlvbnNDbGljayA9IG9wdGlvbnMub25UaHJvd0V4cGVjdGF0aW9uc0NsaWNrIHx8IGZ1bmN0aW9uKCkge30sXG4gICAgICBhZGRUb0V4aXN0aW5nUXVlcnlTdHJpbmcgPSBvcHRpb25zLmFkZFRvRXhpc3RpbmdRdWVyeVN0cmluZyB8fCBkZWZhdWx0UXVlcnlTdHJpbmcsXG4gICAgICB0aW1lciA9IG9wdGlvbnMudGltZXIgfHwgbm9vcFRpbWVyLFxuICAgICAgcmVzdWx0cyA9IFtdLFxuICAgICAgc3BlY3NFeGVjdXRlZCA9IDAsXG4gICAgICBmYWlsdXJlQ291bnQgPSAwLFxuICAgICAgcGVuZGluZ1NwZWNDb3VudCA9IDAsXG4gICAgICBodG1sUmVwb3J0ZXJNYWluLFxuICAgICAgc3ltYm9scyxcbiAgICAgIGZhaWxlZFN1aXRlcyA9IFtdO1xuXG4gICAgdGhpcy5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclByaW9yKCk7XG4gICAgICBodG1sUmVwb3J0ZXJNYWluID0gY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnamFzbWluZV9odG1sLXJlcG9ydGVyJ30sXG4gICAgICAgIGNyZWF0ZURvbSgnZGl2Jywge2NsYXNzTmFtZTogJ2Jhbm5lcid9LFxuICAgICAgICAgIGNyZWF0ZURvbSgnYScsIHtjbGFzc05hbWU6ICd0aXRsZScsIGhyZWY6ICdodHRwOi8vamFzbWluZS5naXRodWIuaW8vJywgdGFyZ2V0OiAnX2JsYW5rJ30pLFxuICAgICAgICAgIGNyZWF0ZURvbSgnc3BhbicsIHtjbGFzc05hbWU6ICd2ZXJzaW9uJ30sIGokLnZlcnNpb24pXG4gICAgICAgICksXG4gICAgICAgIGNyZWF0ZURvbSgndWwnLCB7Y2xhc3NOYW1lOiAnc3ltYm9sLXN1bW1hcnknfSksXG4gICAgICAgIGNyZWF0ZURvbSgnZGl2Jywge2NsYXNzTmFtZTogJ2FsZXJ0J30pLFxuICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdyZXN1bHRzJ30sXG4gICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnZmFpbHVyZXMnfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGdldENvbnRhaW5lcigpLmFwcGVuZENoaWxkKGh0bWxSZXBvcnRlck1haW4pO1xuXG4gICAgICBzeW1ib2xzID0gZmluZCgnLnN5bWJvbC1zdW1tYXJ5Jyk7XG4gICAgfTtcblxuICAgIHZhciB0b3RhbFNwZWNzRGVmaW5lZDtcbiAgICB0aGlzLmphc21pbmVTdGFydGVkID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdG90YWxTcGVjc0RlZmluZWQgPSBvcHRpb25zLnRvdGFsU3BlY3NEZWZpbmVkIHx8IDA7XG4gICAgICB0aW1lci5zdGFydCgpO1xuICAgIH07XG5cbiAgICB2YXIgc3VtbWFyeSA9IGNyZWF0ZURvbSgnZGl2Jywge2NsYXNzTmFtZTogJ3N1bW1hcnknfSk7XG5cbiAgICB2YXIgdG9wUmVzdWx0cyA9IG5ldyBqJC5SZXN1bHRzTm9kZSh7fSwgJycsIG51bGwpLFxuICAgICAgY3VycmVudFBhcmVudCA9IHRvcFJlc3VsdHM7XG5cbiAgICB0aGlzLnN1aXRlU3RhcnRlZCA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgY3VycmVudFBhcmVudC5hZGRDaGlsZChyZXN1bHQsICdzdWl0ZScpO1xuICAgICAgY3VycmVudFBhcmVudCA9IGN1cnJlbnRQYXJlbnQubGFzdCgpO1xuICAgIH07XG5cbiAgICB0aGlzLnN1aXRlRG9uZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgZmFpbGVkU3VpdGVzLnB1c2gocmVzdWx0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRQYXJlbnQgPT0gdG9wUmVzdWx0cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRQYXJlbnQgPSBjdXJyZW50UGFyZW50LnBhcmVudDtcbiAgICB9O1xuXG4gICAgdGhpcy5zcGVjU3RhcnRlZCA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgY3VycmVudFBhcmVudC5hZGRDaGlsZChyZXN1bHQsICdzcGVjJyk7XG4gICAgfTtcblxuICAgIHZhciBmYWlsdXJlcyA9IFtdO1xuICAgIHRoaXMuc3BlY0RvbmUgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIGlmKG5vRXhwZWN0YXRpb25zKHJlc3VsdCkgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmVycm9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTcGVjIFxcJycgKyByZXN1bHQuZnVsbE5hbWUgKyAnXFwnIGhhcyBubyBleHBlY3RhdGlvbnMuJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9ICdkaXNhYmxlZCcpIHtcbiAgICAgICAgc3BlY3NFeGVjdXRlZCsrO1xuICAgICAgfVxuXG4gICAgICBzeW1ib2xzLmFwcGVuZENoaWxkKGNyZWF0ZURvbSgnbGknLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBub0V4cGVjdGF0aW9ucyhyZXN1bHQpID8gJ2VtcHR5JyA6IHJlc3VsdC5zdGF0dXMsXG4gICAgICAgICAgaWQ6ICdzcGVjXycgKyByZXN1bHQuaWQsXG4gICAgICAgICAgdGl0bGU6IHJlc3VsdC5mdWxsTmFtZVxuICAgICAgICB9XG4gICAgICApKTtcblxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgZmFpbHVyZUNvdW50Kys7XG5cbiAgICAgICAgdmFyIGZhaWx1cmUgPVxuICAgICAgICAgIGNyZWF0ZURvbSgnZGl2Jywge2NsYXNzTmFtZTogJ3NwZWMtZGV0YWlsIGZhaWxlZCd9LFxuICAgICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnZGVzY3JpcHRpb24nfSxcbiAgICAgICAgICAgICAgY3JlYXRlRG9tKCdhJywge3RpdGxlOiByZXN1bHQuZnVsbE5hbWUsIGhyZWY6IHNwZWNIcmVmKHJlc3VsdCl9LCByZXN1bHQuZnVsbE5hbWUpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnbWVzc2FnZXMnfSlcbiAgICAgICAgICApO1xuICAgICAgICB2YXIgbWVzc2FnZXMgPSBmYWlsdXJlLmNoaWxkTm9kZXNbMV07XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQuZmFpbGVkRXhwZWN0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGV4cGVjdGF0aW9uID0gcmVzdWx0LmZhaWxlZEV4cGVjdGF0aW9uc1tpXTtcbiAgICAgICAgICBtZXNzYWdlcy5hcHBlbmRDaGlsZChjcmVhdGVEb20oJ2RpdicsIHtjbGFzc05hbWU6ICdyZXN1bHQtbWVzc2FnZSd9LCBleHBlY3RhdGlvbi5tZXNzYWdlKSk7XG4gICAgICAgICAgbWVzc2FnZXMuYXBwZW5kQ2hpbGQoY3JlYXRlRG9tKCdkaXYnLCB7Y2xhc3NOYW1lOiAnc3RhY2stdHJhY2UnfSwgZXhwZWN0YXRpb24uc3RhY2spKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZhaWx1cmVzLnB1c2goZmFpbHVyZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09ICdwZW5kaW5nJykge1xuICAgICAgICBwZW5kaW5nU3BlY0NvdW50Kys7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuamFzbWluZURvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYW5uZXIgPSBmaW5kKCcuYmFubmVyJyk7XG4gICAgICB2YXIgYWxlcnQgPSBmaW5kKCcuYWxlcnQnKTtcbiAgICAgIGFsZXJ0LmFwcGVuZENoaWxkKGNyZWF0ZURvbSgnc3BhbicsIHtjbGFzc05hbWU6ICdkdXJhdGlvbid9LCAnZmluaXNoZWQgaW4gJyArIHRpbWVyLmVsYXBzZWQoKSAvIDEwMDAgKyAncycpKTtcblxuICAgICAgYmFubmVyLmFwcGVuZENoaWxkKFxuICAgICAgICBjcmVhdGVEb20oJ2RpdicsIHsgY2xhc3NOYW1lOiAncnVuLW9wdGlvbnMnIH0sXG4gICAgICAgICAgY3JlYXRlRG9tKCdzcGFuJywgeyBjbGFzc05hbWU6ICd0cmlnZ2VyJyB9LCAnT3B0aW9ucycpLFxuICAgICAgICAgIGNyZWF0ZURvbSgnZGl2JywgeyBjbGFzc05hbWU6ICdwYXlsb2FkJyB9LFxuICAgICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7IGNsYXNzTmFtZTogJ2V4Y2VwdGlvbnMnIH0sXG4gICAgICAgICAgICAgIGNyZWF0ZURvbSgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmFpc2UnLFxuICAgICAgICAgICAgICAgIGlkOiAncmFpc2UtZXhjZXB0aW9ucycsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94J1xuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgY3JlYXRlRG9tKCdsYWJlbCcsIHsgY2xhc3NOYW1lOiAnbGFiZWwnLCAnZm9yJzogJ3JhaXNlLWV4Y2VwdGlvbnMnIH0sICdyYWlzZSBleGNlcHRpb25zJykpLFxuICAgICAgICAgICAgY3JlYXRlRG9tKCdkaXYnLCB7IGNsYXNzTmFtZTogJ3Rocm93LWZhaWx1cmVzJyB9LFxuICAgICAgICAgICAgICBjcmVhdGVEb20oJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3Rocm93JyxcbiAgICAgICAgICAgICAgICBpZDogJ3Rocm93LWZhaWx1cmVzJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBjcmVhdGVEb20oJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdsYWJlbCcsICdmb3InOiAndGhyb3ctZmFpbHVyZXMnIH0sICdzdG9wIHNwZWMgb24gZXhwZWN0YXRpb24gZmFpbHVyZScpKVxuICAgICAgICAgIClcbiAgICAgICAgKSk7XG5cbiAgICAgIHZhciByYWlzZUNoZWNrYm94ID0gZmluZCgnI3JhaXNlLWV4Y2VwdGlvbnMnKTtcblxuICAgICAgcmFpc2VDaGVja2JveC5jaGVja2VkID0gIWVudi5jYXRjaGluZ0V4Y2VwdGlvbnMoKTtcbiAgICAgIHJhaXNlQ2hlY2tib3gub25jbGljayA9IG9uUmFpc2VFeGNlcHRpb25zQ2xpY2s7XG5cbiAgICAgIHZhciB0aHJvd0NoZWNrYm94ID0gZmluZCgnI3Rocm93LWZhaWx1cmVzJyk7XG4gICAgICB0aHJvd0NoZWNrYm94LmNoZWNrZWQgPSBlbnYudGhyb3dpbmdFeHBlY3RhdGlvbkZhaWx1cmVzKCk7XG4gICAgICB0aHJvd0NoZWNrYm94Lm9uY2xpY2sgPSBvblRocm93RXhwZWN0YXRpb25zQ2xpY2s7XG5cbiAgICAgIHZhciBvcHRpb25zTWVudSA9IGZpbmQoJy5ydW4tb3B0aW9ucycpLFxuICAgICAgICAgIG9wdGlvbnNUcmlnZ2VyID0gb3B0aW9uc01lbnUucXVlcnlTZWxlY3RvcignLnRyaWdnZXInKSxcbiAgICAgICAgICBvcHRpb25zUGF5bG9hZCA9IG9wdGlvbnNNZW51LnF1ZXJ5U2VsZWN0b3IoJy5wYXlsb2FkJyksXG4gICAgICAgICAgaXNPcGVuID0gL1xcYm9wZW5cXGIvO1xuXG4gICAgICBvcHRpb25zVHJpZ2dlci5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpc09wZW4udGVzdChvcHRpb25zUGF5bG9hZC5jbGFzc05hbWUpKSB7XG4gICAgICAgICAgb3B0aW9uc1BheWxvYWQuY2xhc3NOYW1lID0gb3B0aW9uc1BheWxvYWQuY2xhc3NOYW1lLnJlcGxhY2UoaXNPcGVuLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uc1BheWxvYWQuY2xhc3NOYW1lICs9ICcgb3Blbic7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChzcGVjc0V4ZWN1dGVkIDwgdG90YWxTcGVjc0RlZmluZWQpIHtcbiAgICAgICAgdmFyIHNraXBwZWRNZXNzYWdlID0gJ1JhbiAnICsgc3BlY3NFeGVjdXRlZCArICcgb2YgJyArIHRvdGFsU3BlY3NEZWZpbmVkICsgJyBzcGVjcyAtIHJ1biBhbGwnO1xuICAgICAgICBhbGVydC5hcHBlbmRDaGlsZChcbiAgICAgICAgICBjcmVhdGVEb20oJ3NwYW4nLCB7Y2xhc3NOYW1lOiAnYmFyIHNraXBwZWQnfSxcbiAgICAgICAgICAgIGNyZWF0ZURvbSgnYScsIHtocmVmOiAnPycsIHRpdGxlOiAnUnVuIGFsbCBzcGVjcyd9LCBza2lwcGVkTWVzc2FnZSlcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2YXIgc3RhdHVzQmFyTWVzc2FnZSA9ICcnO1xuICAgICAgdmFyIHN0YXR1c0JhckNsYXNzTmFtZSA9ICdiYXIgJztcblxuICAgICAgaWYgKHRvdGFsU3BlY3NEZWZpbmVkID4gMCkge1xuICAgICAgICBzdGF0dXNCYXJNZXNzYWdlICs9IHBsdXJhbGl6ZSgnc3BlYycsIHNwZWNzRXhlY3V0ZWQpICsgJywgJyArIHBsdXJhbGl6ZSgnZmFpbHVyZScsIGZhaWx1cmVDb3VudCk7XG4gICAgICAgIGlmIChwZW5kaW5nU3BlY0NvdW50KSB7IHN0YXR1c0Jhck1lc3NhZ2UgKz0gJywgJyArIHBsdXJhbGl6ZSgncGVuZGluZyBzcGVjJywgcGVuZGluZ1NwZWNDb3VudCk7IH1cbiAgICAgICAgc3RhdHVzQmFyQ2xhc3NOYW1lICs9IChmYWlsdXJlQ291bnQgPiAwKSA/ICdmYWlsZWQnIDogJ3Bhc3NlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXNCYXJDbGFzc05hbWUgKz0gJ3NraXBwZWQnO1xuICAgICAgICBzdGF0dXNCYXJNZXNzYWdlICs9ICdObyBzcGVjcyBmb3VuZCc7XG4gICAgICB9XG5cbiAgICAgIGFsZXJ0LmFwcGVuZENoaWxkKGNyZWF0ZURvbSgnc3BhbicsIHtjbGFzc05hbWU6IHN0YXR1c0JhckNsYXNzTmFtZX0sIHN0YXR1c0Jhck1lc3NhZ2UpKTtcblxuICAgICAgZm9yKGkgPSAwOyBpIDwgZmFpbGVkU3VpdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBmYWlsZWRTdWl0ZSA9IGZhaWxlZFN1aXRlc1tpXTtcbiAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGZhaWxlZFN1aXRlLmZhaWxlZEV4cGVjdGF0aW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHZhciBlcnJvckJhck1lc3NhZ2UgPSAnQWZ0ZXJBbGwgJyArIGZhaWxlZFN1aXRlLmZhaWxlZEV4cGVjdGF0aW9uc1tqXS5tZXNzYWdlO1xuICAgICAgICAgIHZhciBlcnJvckJhckNsYXNzTmFtZSA9ICdiYXIgZXJyb3JlZCc7XG4gICAgICAgICAgYWxlcnQuYXBwZW5kQ2hpbGQoY3JlYXRlRG9tKCdzcGFuJywge2NsYXNzTmFtZTogZXJyb3JCYXJDbGFzc05hbWV9LCBlcnJvckJhck1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0cyA9IGZpbmQoJy5yZXN1bHRzJyk7XG4gICAgICByZXN1bHRzLmFwcGVuZENoaWxkKHN1bW1hcnkpO1xuXG4gICAgICBzdW1tYXJ5TGlzdCh0b3BSZXN1bHRzLCBzdW1tYXJ5KTtcblxuICAgICAgZnVuY3Rpb24gc3VtbWFyeUxpc3QocmVzdWx0c1RyZWUsIGRvbVBhcmVudCkge1xuICAgICAgICB2YXIgc3BlY0xpc3ROb2RlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdHNUcmVlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdE5vZGUgPSByZXN1bHRzVHJlZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICBpZiAocmVzdWx0Tm9kZS50eXBlID09ICdzdWl0ZScpIHtcbiAgICAgICAgICAgIHZhciBzdWl0ZUxpc3ROb2RlID0gY3JlYXRlRG9tKCd1bCcsIHtjbGFzc05hbWU6ICdzdWl0ZScsIGlkOiAnc3VpdGUtJyArIHJlc3VsdE5vZGUucmVzdWx0LmlkfSxcbiAgICAgICAgICAgICAgY3JlYXRlRG9tKCdsaScsIHtjbGFzc05hbWU6ICdzdWl0ZS1kZXRhaWwnfSxcbiAgICAgICAgICAgICAgICBjcmVhdGVEb20oJ2EnLCB7aHJlZjogc3BlY0hyZWYocmVzdWx0Tm9kZS5yZXN1bHQpfSwgcmVzdWx0Tm9kZS5yZXN1bHQuZGVzY3JpcHRpb24pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHN1bW1hcnlMaXN0KHJlc3VsdE5vZGUsIHN1aXRlTGlzdE5vZGUpO1xuICAgICAgICAgICAgZG9tUGFyZW50LmFwcGVuZENoaWxkKHN1aXRlTGlzdE5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVzdWx0Tm9kZS50eXBlID09ICdzcGVjJykge1xuICAgICAgICAgICAgaWYgKGRvbVBhcmVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgIT0gJ3NwZWNzJykge1xuICAgICAgICAgICAgICBzcGVjTGlzdE5vZGUgPSBjcmVhdGVEb20oJ3VsJywge2NsYXNzTmFtZTogJ3NwZWNzJ30pO1xuICAgICAgICAgICAgICBkb21QYXJlbnQuYXBwZW5kQ2hpbGQoc3BlY0xpc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzcGVjRGVzY3JpcHRpb24gPSByZXN1bHROb2RlLnJlc3VsdC5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIGlmKG5vRXhwZWN0YXRpb25zKHJlc3VsdE5vZGUucmVzdWx0KSkge1xuICAgICAgICAgICAgICBzcGVjRGVzY3JpcHRpb24gPSAnU1BFQyBIQVMgTk8gRVhQRUNUQVRJT05TICcgKyBzcGVjRGVzY3JpcHRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyZXN1bHROb2RlLnJlc3VsdC5zdGF0dXMgPT09ICdwZW5kaW5nJyAmJiByZXN1bHROb2RlLnJlc3VsdC5wZW5kaW5nUmVhc29uICE9PSAnJykge1xuICAgICAgICAgICAgICBzcGVjRGVzY3JpcHRpb24gPSBzcGVjRGVzY3JpcHRpb24gKyAnIFBFTkRJTkcgV0lUSCBNRVNTQUdFOiAnICsgcmVzdWx0Tm9kZS5yZXN1bHQucGVuZGluZ1JlYXNvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwZWNMaXN0Tm9kZS5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgY3JlYXRlRG9tKCdsaScsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcmVzdWx0Tm9kZS5yZXN1bHQuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgaWQ6ICdzcGVjLScgKyByZXN1bHROb2RlLnJlc3VsdC5pZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY3JlYXRlRG9tKCdhJywge2hyZWY6IHNwZWNIcmVmKHJlc3VsdE5vZGUucmVzdWx0KX0sIHNwZWNEZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZhaWx1cmVzLmxlbmd0aCkge1xuICAgICAgICBhbGVydC5hcHBlbmRDaGlsZChcbiAgICAgICAgICBjcmVhdGVEb20oJ3NwYW4nLCB7Y2xhc3NOYW1lOiAnbWVudSBiYXIgc3BlYy1saXN0J30sXG4gICAgICAgICAgICBjcmVhdGVEb20oJ3NwYW4nLCB7fSwgJ1NwZWMgTGlzdCB8ICcpLFxuICAgICAgICAgICAgY3JlYXRlRG9tKCdhJywge2NsYXNzTmFtZTogJ2ZhaWx1cmVzLW1lbnUnLCBocmVmOiAnIyd9LCAnRmFpbHVyZXMnKSkpO1xuICAgICAgICBhbGVydC5hcHBlbmRDaGlsZChcbiAgICAgICAgICBjcmVhdGVEb20oJ3NwYW4nLCB7Y2xhc3NOYW1lOiAnbWVudSBiYXIgZmFpbHVyZS1saXN0J30sXG4gICAgICAgICAgICBjcmVhdGVEb20oJ2EnLCB7Y2xhc3NOYW1lOiAnc3BlYy1saXN0LW1lbnUnLCBocmVmOiAnIyd9LCAnU3BlYyBMaXN0JyksXG4gICAgICAgICAgICBjcmVhdGVEb20oJ3NwYW4nLCB7fSwgJyB8IEZhaWx1cmVzICcpKSk7XG5cbiAgICAgICAgZmluZCgnLmZhaWx1cmVzLW1lbnUnKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0TWVudU1vZGVUbygnZmFpbHVyZS1saXN0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIGZpbmQoJy5zcGVjLWxpc3QtbWVudScpLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRNZW51TW9kZVRvKCdzcGVjLWxpc3QnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZXRNZW51TW9kZVRvKCdmYWlsdXJlLWxpc3QnKTtcblxuICAgICAgICB2YXIgZmFpbHVyZU5vZGUgPSBmaW5kKCcuZmFpbHVyZXMnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWlsdXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGZhaWx1cmVOb2RlLmFwcGVuZENoaWxkKGZhaWx1cmVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcztcblxuICAgIGZ1bmN0aW9uIGZpbmQoc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiBnZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcuamFzbWluZV9odG1sLXJlcG9ydGVyICcgKyBzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJQcmlvcigpIHtcbiAgICAgIC8vIHJldHVybiB0aGUgcmVwb3J0ZXJcbiAgICAgIHZhciBvbGRSZXBvcnRlciA9IGZpbmQoJycpO1xuXG4gICAgICBpZihvbGRSZXBvcnRlcikge1xuICAgICAgICBnZXRDb250YWluZXIoKS5yZW1vdmVDaGlsZChvbGRSZXBvcnRlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRG9tKHR5cGUsIGF0dHJzLCBjaGlsZHJlblZhckFyZ3MpIHtcbiAgICAgIHZhciBlbCA9IGNyZWF0ZUVsZW1lbnQodHlwZSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgICBpZiAodHlwZW9mIGNoaWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZVRleHROb2RlKGNoaWxkKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKGF0dHIgPT0gJ2NsYXNzTmFtZScpIHtcbiAgICAgICAgICBlbFthdHRyXSA9IGF0dHJzW2F0dHJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBsdXJhbGl6ZShzaW5ndWxhciwgY291bnQpIHtcbiAgICAgIHZhciB3b3JkID0gKGNvdW50ID09IDEgPyBzaW5ndWxhciA6IHNpbmd1bGFyICsgJ3MnKTtcblxuICAgICAgcmV0dXJuICcnICsgY291bnQgKyAnICcgKyB3b3JkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNwZWNIcmVmKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIGFkZFRvRXhpc3RpbmdRdWVyeVN0cmluZygnc3BlYycsIHJlc3VsdC5mdWxsTmFtZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmYXVsdFF1ZXJ5U3RyaW5nKGtleSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiAnPycgKyBrZXkgKyAnPScgKyB2YWx1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRNZW51TW9kZVRvKG1vZGUpIHtcbiAgICAgIGh0bWxSZXBvcnRlck1haW4uc2V0QXR0cmlidXRlKCdjbGFzcycsICdqYXNtaW5lX2h0bWwtcmVwb3J0ZXIgJyArIG1vZGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vRXhwZWN0YXRpb25zKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIChyZXN1bHQuZmFpbGVkRXhwZWN0YXRpb25zLmxlbmd0aCArIHJlc3VsdC5wYXNzZWRFeHBlY3RhdGlvbnMubGVuZ3RoKSA9PT0gMCAmJlxuICAgICAgICByZXN1bHQuc3RhdHVzID09PSAncGFzc2VkJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gSHRtbFJlcG9ydGVyO1xufTtcblxuamFzbWluZVJlcXVpcmUuSHRtbFNwZWNGaWx0ZXIgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gSHRtbFNwZWNGaWx0ZXIob3B0aW9ucykge1xuICAgIHZhciBmaWx0ZXJTdHJpbmcgPSBvcHRpb25zICYmIG9wdGlvbnMuZmlsdGVyU3RyaW5nKCkgJiYgb3B0aW9ucy5maWx0ZXJTdHJpbmcoKS5yZXBsYWNlKC9bLVtcXF17fSgpKis/LixcXFxcXiR8I1xcc10vZywgJ1xcXFwkJicpO1xuICAgIHZhciBmaWx0ZXJQYXR0ZXJuID0gbmV3IFJlZ0V4cChmaWx0ZXJTdHJpbmcpO1xuXG4gICAgdGhpcy5tYXRjaGVzID0gZnVuY3Rpb24oc3BlY05hbWUpIHtcbiAgICAgIHJldHVybiBmaWx0ZXJQYXR0ZXJuLnRlc3Qoc3BlY05hbWUpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gSHRtbFNwZWNGaWx0ZXI7XG59O1xuXG5qYXNtaW5lUmVxdWlyZS5SZXN1bHRzTm9kZSA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBSZXN1bHRzTm9kZShyZXN1bHQsIHR5cGUsIHBhcmVudCkge1xuICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cbiAgICB0aGlzLmNoaWxkcmVuID0gW107XG5cbiAgICB0aGlzLmFkZENoaWxkID0gZnVuY3Rpb24ocmVzdWx0LCB0eXBlKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2gobmV3IFJlc3VsdHNOb2RlKHJlc3VsdCwgdHlwZSwgdGhpcykpO1xuICAgIH07XG5cbiAgICB0aGlzLmxhc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBSZXN1bHRzTm9kZTtcbn07XG5cbmphc21pbmVSZXF1aXJlLlF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIFF1ZXJ5U3RyaW5nKG9wdGlvbnMpIHtcblxuICAgIHRoaXMubmF2aWdhdGVXaXRoTmV3UGFyYW0gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICBvcHRpb25zLmdldFdpbmRvd0xvY2F0aW9uKCkuc2VhcmNoID0gdGhpcy5mdWxsU3RyaW5nV2l0aE5ld1BhcmFtKGtleSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICB0aGlzLmZ1bGxTdHJpbmdXaXRoTmV3UGFyYW0gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgcGFyYW1NYXAgPSBxdWVyeVN0cmluZ1RvUGFyYW1NYXAoKTtcbiAgICAgIHBhcmFtTWFwW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0b1F1ZXJ5U3RyaW5nKHBhcmFtTWFwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRQYXJhbSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nVG9QYXJhbU1hcCgpW2tleV07XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzO1xuXG4gICAgZnVuY3Rpb24gdG9RdWVyeVN0cmluZyhwYXJhbU1hcCkge1xuICAgICAgdmFyIHFTdHJQYWlycyA9IFtdO1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBwYXJhbU1hcCkge1xuICAgICAgICBxU3RyUGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQocHJvcCkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1NYXBbcHJvcF0pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAnPycgKyBxU3RyUGFpcnMuam9pbignJicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHF1ZXJ5U3RyaW5nVG9QYXJhbU1hcCgpIHtcbiAgICAgIHZhciBwYXJhbVN0ciA9IG9wdGlvbnMuZ2V0V2luZG93TG9jYXRpb24oKS5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgICBwYXJhbXMgPSBbXSxcbiAgICAgICAgcGFyYW1NYXAgPSB7fTtcblxuICAgICAgaWYgKHBhcmFtU3RyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zID0gcGFyYW1TdHIuc3BsaXQoJyYnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcCA9IHBhcmFtc1tpXS5zcGxpdCgnPScpO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChwWzFdKTtcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJyB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyYW1NYXBbZGVjb2RlVVJJQ29tcG9uZW50KHBbMF0pXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJhbU1hcDtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBRdWVyeVN0cmluZztcbn07XG4iXX0=
