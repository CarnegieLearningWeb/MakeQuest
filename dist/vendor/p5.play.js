function Sprite(t,i,e,s){this.position=createVector(t,i),this.previousPosition=createVector(t,i),this.newPosition=createVector(t,i),this.deltaX=0,this.deltaY=0,this.velocity=createVector(0,0),this.maxSpeed=-1,this.friction=1,this.collider,this.colliderType="none",this.touching={},this.touching.left=!1,this.touching.right=!1,this.touching.top=!1,this.touching.bottom=!1,this.mass=1,this.immovable=!1,this.restitution=1,this.rotation=0,this.rotationSpeed=0,this.rotateToDirection=!1,this.depth=0,this.scale=1;var o=1,r=1;this.visible=!0,this.mouseActive=!1,this.mouseIsOver=!1,this.mouseIsPressed=!1,void 0==e?this.width=100:this.width=e,void 0==s?this.height=100:this.height=s,this.originalWidth=this.width,this.originalHeight=this.height,this.removed=!1,this.life=-1,this.debug=!1,this.shapeColor=color(random(255),random(255),random(255)),this.groups=new Array;var n={},h="";this.animation,this.update=function(){if(!this.removed){if(this.newPosition!=this.position?this.previousPosition=createVector(this.newPosition.x,this.newPosition.y):this.previousPosition=createVector(this.position.x,this.position.y),this.velocity.x*=this.friction,this.velocity.y*=this.friction,-1!=this.maxSpeed&&this.limitSpeed(this.maxSpeed),this.rotateToDirection?this.rotation=this.getDirection():this.rotation+=this.rotationSpeed,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.newPosition=createVector(this.position.x,this.position.y),this.deltaX=this.position.x-this.previousPosition.x,this.deltaY=this.position.y-this.previousPosition.y,null!=n[h]&&(n[h].update(),"default"==this.colliderType&&1!=n[h].getWidth()&&1!=n[h].getHeight()&&(this.collider=this.getBoundingBox(),this.colliderType="image",this.width=n[h].getWidth()*abs(this.scale),this.height=n[h].getHeight()*abs(this.scale)),(n[h].frameChanged||void 0==this.width||void 0==this.height)&&(this.width=n[h].getWidth()*abs(this.scale),this.height=n[h].getHeight()*abs(this.scale))),null!=this.collider){if(this.collider instanceof AABB){var t=radians(this.rotation);"custom"==this.colliderType?(this.collider.extents.x=this.collider.originalExtents.x*abs(this.scale)*abs(cos(t))+this.collider.originalExtents.y*abs(this.scale)*abs(sin(t)),this.collider.extents.y=this.collider.originalExtents.x*abs(this.scale)*abs(sin(t))+this.collider.originalExtents.y*abs(this.scale)*abs(cos(t))):"default"==this.colliderType?(this.collider.extents.x=this.originalWidth*abs(this.scale)*abs(cos(t))+this.originalHeight*abs(this.scale)*abs(sin(t)),this.collider.extents.y=this.originalWidth*abs(this.scale)*abs(sin(t))+this.originalHeight*abs(this.scale)*abs(cos(t))):"image"==this.colliderType&&(this.collider.extents.x=this.width*abs(cos(t))+this.height*abs(sin(t)),this.collider.extents.y=this.width*abs(sin(t))+this.height*abs(cos(t)))}this.collider instanceof CircleCollider&&(this.collider.radius=this.collider.originalRadius*abs(this.scale))}this.mouseActive?(null==this.collider&&this.setDefaultCollider(),this.mouseUpdate()):("function"==typeof this.onMouseOver||"function"==typeof this.onMouseOut||"function"==typeof this.onMousePressed||"function"==typeof this.onMouseReleased)&&(this.mouseActive=!0,null==this.collider&&this.setDefaultCollider(),this.mouseUpdate()),this.life>0&&this.life--,0===this.life&&this.remove()}},this.setDefaultCollider=function(){null!=n[h]&&1!=n[h].getWidth()&&1!=n[h].getHeight()?(this.collider=this.getBoundingBox(),this.width=n[h].getWidth()*abs(this.scale),this.height=n[h].getHeight()*abs(this.scale),this.colliderType="image"):null!=n[h]&&1==n[h].getWidth()&&1==n[h].getHeight()||(this.collider=new AABB(this.position,createVector(this.width,this.height)),this.colliderType="default"),quadTree.insert(this)},this.mouseUpdate=function(){var t=this.mouseIsOver,i=this.mouseIsPressed;this.mouseIsOver=!1,this.mouseIsPressed=!1;var e;e=camera.active?createVector(camera.mouseX,camera.mouseY):createVector(mouseX,mouseY),null!=this.collider&&(this.collider instanceof CircleCollider?dist(e.x,e.y,this.collider.center.x,this.collider.center.y)<this.collider.radius&&(this.mouseIsOver=!0):this.collider instanceof AABB&&e.x>this.collider.left()&&e.y>this.collider.top()&&e.x<this.collider.right()&&e.y<this.collider.bottom()&&(this.mouseIsOver=!0),this.mouseIsOver&&mouseIsPressed&&(this.mouseIsPressed=!0),!t&&this.mouseIsOver&&void 0!=this.onMouseOver&&("function"==typeof this.onMouseOver?this.onMouseOver.call(this,this):print("Warning: onMouseOver should be a function")),t&&!this.mouseIsOver&&void 0!=this.onMouseOut&&("function"==typeof this.onMouseOut?this.onMouseOut.call(this,this):print("Warning: onMouseOut should be a function")),!i&&this.mouseIsPressed&&void 0!=this.onMousePressed&&("function"==typeof this.onMousePressed?this.onMousePressed.call(this,this):print("Warning: onMousePressed should be a function")),i&&!this.mouseIsPressed&&void 0!=this.onMouseReleased&&("function"==typeof this.onMouseReleased?this.onMouseReleased.call(this,this):print("Warning: onMouseReleased should be a function")))},this.setCollider=function(t,i,e,s,o){if(this.colliderType="custom","rectangle"==t&&5==arguments.length)this.collider=new AABB(this.position,createVector(arguments[3],arguments[4]),createVector(arguments[1],arguments[2]));else if("circle"==t){createVector(arguments[1],arguments[2]);4!=arguments.length&&print('Warning: usage setCollider("circle", offsetX, offsetY, radius)'),this.collider=new CircleCollider(this.position,arguments[3],createVector(arguments[1],arguments[2]))}quadTree.insert(this)},this.getBoundingBox=function(){var t=n[h].getWidth()*abs(this.scale),i=n[h].getHeight()*abs(this.scale);return 1===t&&1===i?new AABB(this.position,createVector(t,i)):new AABB(this.position,createVector(t,i))},this.mirrorX=function(t){return 1!=t&&-1!=t?o:void(o=t)},this.mirrorY=function(t){return 1!=t&&-1!=t?r:void(r=t)},this.display=function(){this.visible&&!this.removed&&(push(),colorMode(RGB),noStroke(),rectMode(CENTER),ellipseMode(CENTER),imageMode(CENTER),translate(this.position.x,this.position.y),scale(this.scale*o,this.scale*r),rotate(radians(this.rotation)),this.draw(),pop(),this.debug&&(stroke(0,255,0),line(this.position.x-10,this.position.y,this.position.x+10,this.position.y),line(this.position.x,this.position.y-10,this.position.x,this.position.y+10),noFill(),noStroke(),fill(0,255,0),textAlign(LEFT,BOTTOM),textSize(16),text(this.depth+"",this.position.x+4,this.position.y-2),noFill(),stroke(0,255,0),void 0!=this.collider&&this.collider.draw()))},this.draw=function(){""!=h&&null!=n?null!=n[h]&&n[h].draw(0,0,0):(noStroke(),fill(this.shapeColor),rect(0,0,this.width,this.height))},this.remove=function(){this.removed=!0,quadTree.removeObject(this);for(var t=0;t<this.groups.length;t++)this.groups[t].remove(this)},this.setVelocity=function(t,i){this.velocity.x=t,this.velocity.y=i},this.getSpeed=function(){return this.velocity.mag()},this.getDirection=function(){var t=atan2(this.velocity.y,this.velocity.x);return isNaN(t)&&(t=0),degrees(t)},this.addToGroup=function(t){t instanceof Array?t.add(this):print("addToGroup error: "+t+" is not a group")},this.limitSpeed=function(t){var i=this.getSpeed();if(abs(i)>t){var e=t/abs(i);this.velocity.x*=e,this.velocity.y*=e}},this.setSpeed=function(t,i){var e=radians(i);this.velocity.x=cos(e)*t,this.velocity.y=sin(e)*t},this.addSpeed=function(t,i){var e=radians(i);this.velocity.x+=cos(e)*t,this.velocity.y+=sin(e)*t},this.attractionPoint=function(t,i,e){var s=atan2(e-this.position.y,i-this.position.x);this.velocity.x+=cos(s)*t,this.velocity.y+=sin(s)*t},this.addImage=function(){if("string"==typeof arguments[0]&&arguments[1]instanceof p5.Image)this.addAnimation(arguments[0],arguments[1]);else{if(!(arguments[0]instanceof p5.Image))throw"addImage error: allowed usages are <image> or <label>, <image>";this.addAnimation("normal",arguments[0])}},this.addAnimation=function(t,i){var e;if("string"!=typeof t)return print("Sprite.addAnimation error: the first argument must be a label (String)"),-1;if(arguments.length<2)return print("addAnimation error: you must specify a label and n frame images"),-1;if(arguments[1]instanceof Animation){var s=arguments[1],o=s.clone();return n[t]=o,""==h&&(h=t,this.animation=o),o.isSpriteAnimation=!0,o}for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);return e=construct(Animation,r),n[t]=e,""==h&&(h=t,this.animation=e),e.isSpriteAnimation=!0,e},this.changeImage=function(t){this.changeAnimation(t)},this.getAnimationLabel=function(){return h},this.changeAnimation=function(t){null==n[t]?print("changeAnimation error: no animation labeled "+t):(h=t,this.animation=n[t])},this.overlapPixel=function(t,i){var e=createVector(arguments[0],arguments[1]),s=this.animation.getFrameImage();if(e.x-=this.position.x-s.width/2,e.y-=this.position.y-s.height/2,e.x<0||e.x>s.width||e.y<0||e.y>s.height)return!1;if(0==this.rotation&&1==this.scale){var o=s.get(e.x,e.y);return 255==o[3]}return print("Error: overlapPixel doesn't work with scaled or rotated sprites yet"),!1},this.overlapPoint=function(t,i){var e=createVector(arguments[0],arguments[1]);if(null==this.collider&&this.setDefaultCollider(),void 0!=this.collider){if(this.collider instanceof AABB)return e.x>this.collider.left()&&e.x<this.collider.right()&&e.y>this.collider.top()&&e.y<this.collider.bottom();if(this.collider instanceof CircleCollider){var s=this.collider.radius*this.collider.radius,o=pow(this.collider.center.x-e.x,2)+pow(this.collider.center.y-e.y,2);return s>o}return!1}return!1},this.overlap=function(t,i){return this.AABBops("overlap",t,i)},this.collide=function(t,i){return this.AABBops("collide",t,i)},this.displace=function(t,i){return this.AABBops("displace",t,i)},this.bounce=function(t,i){return this.AABBops("bounce",t,i)},this.AABBops=function(t,i,e){this.touching.left=!1,this.touching.right=!1,this.touching.top=!1,this.touching.bottom=!1;var s=!1,o=[];if(i instanceof Sprite)o.push(i);else{if(!(i instanceof Array))throw"Error: overlap can only be checked between sprites or groups";void 0!=quadTree&&quadTree.active&&(o=quadTree.retrieveFromGroup(this,i)),0==o.length&&(o=i)}for(var r=0;r<o.length;r++)if(this!=o[r]&&!this.removed){var n=o[r];if(void 0==this.collider&&this.setDefaultCollider(),void 0==n.collider&&n.setDefaultCollider(),void 0!=this.collider&&void 0!=n.collider)if("overlap"==t){var h;h=this.collider instanceof CircleCollider?n.collider.overlap(this.collider):this.collider.overlap(n.collider),h&&(s=!0,void 0!=e&&"function"==typeof e&&e.call(this,this,n))}else if("collide"==t||"bounce"==t){var a=createVector(0,0),l=abs(this.velocity.x-n.velocity.x)>=n.collider.extents.x/2&&0==round(this.deltaX-this.velocity.x),c=abs(this.velocity.y-n.velocity.y)>=n.collider.size().y/2&&0==round(this.deltaY-this.velocity.y);if(l||c){var u=createVector((this.position.x+this.previousPosition.x)/2,(this.position.y+this.previousPosition.y)/2),d=createVector(abs(this.position.x-this.previousPosition.x)+this.collider.extents.x,abs(this.position.y-this.previousPosition.y)+this.collider.extents.y),p=new AABB(u,d,this.collider.offset);p.overlap(n.collider)&&(l&&(this.velocity.x<0?a.x=n.collider.right()-this.collider.left()+1:this.velocity.x>0&&(a.x=n.collider.left()-this.collider.right()-1)),c&&(this.velocity.y>0?a.y=n.collider.top()-this.collider.bottom()-1:this.velocity.y<0&&(a.y=n.collider.bottom()-this.collider.top()+1)))}else a=this.collider instanceof CircleCollider?n.collider.collide(this.collider).mult(-1):this.collider.collide(n.collider);if(0==a.x&&0==a.y)s=!1;else{if(this.immovable||(this.position.add(a),this.previousPosition=createVector(this.position.x,this.position.y),this.newPosition=createVector(this.position.x,this.position.y)),a.x>0&&(this.touching.left=!0),a.x<0&&(this.touching.right=!0),a.y<0&&(this.touching.bottom=!0),a.y>0&&(this.touching.top=!0),"bounce"==t){if(n.immovable)var f=-this.velocity.x+n.velocity.x,g=-this.velocity.y+n.velocity.y;else var f=(this.velocity.x*(this.mass-n.mass)+2*n.mass*n.velocity.x)/(this.mass+n.mass),g=(this.velocity.y*(this.mass-n.mass)+2*n.mass*n.velocity.y)/(this.mass+n.mass),m=(n.velocity.x*(n.mass-this.mass)+2*this.mass*this.velocity.x)/(this.mass+n.mass),y=(n.velocity.y*(n.mass-this.mass)+2*this.mass*this.velocity.y)/(this.mass+n.mass);abs(a.x)>abs(a.y)&&(this.immovable||(this.velocity.x=f*this.restitution),n.immovable||(n.velocity.x=m*n.restitution)),abs(a.x)<abs(a.y)&&(this.immovable||(this.velocity.y=g*this.restitution),n.immovable||(n.velocity.y=y*n.restitution))}void 0!=e&&"function"==typeof e&&e.call(this,this,n),s=!0}}else"displace"==t&&(a=this.collider instanceof CircleCollider?n.collider.collide(this.collider).mult(-1):this.collider.collide(n.collider),0==a.x&&0==a.y?s=!1:(n.position.sub(a),a.x>0&&(this.touching.left=!0),a.x<0&&(this.touching.right=!0),a.y<0&&(this.touching.bottom=!0),a.y>0&&(this.touching.top=!0),void 0!=e&&"function"==typeof e&&e.call(this,this,n),s=!0))}return s}}function Camera(t,i,e){this.position=p5.prototype.createVector(t,i),this.zoom=e,this.mouseX=p5.prototype.mouseX,this.mouseY=p5.prototype.mouseY,this.active=!1,this.on=function(){this.active||(cameraPush(),this.active=!0)},this.off=function(){this.active&&(cameraPop(),this.active=!1)}}function cameraPush(){camera.init||0!=camera.position.x||0!=camera.position.y||(camera.position.x=width/2,camera.position.y=height/2,camera.init=!0),camera.mouseX=mouseX+camera.position.x-width/2,camera.mouseY=mouseY+camera.position.y-height/2,camera.active||(camera.active=!0,push(),scale(camera.zoom),translate(-camera.position.x+width/2/camera.zoom,-camera.position.y+height/2/camera.zoom))}function cameraPop(){camera.active&&(pop(),camera.active=!1)}function Group(){function t(t,i){return null===t||null===i?null===t&&null===i:"string"==typeof t?t===i:"object"!=typeof t?t===i:t.equals instanceof Function?t.equals(i):t===i}var i=[];return i.get=function(t){return i[t]},i.contains=function(t){return this.indexOf(t)>-1},i.indexOf=function(e){for(var s=0,o=i.length;o>s;++s)if(t(e,i[s]))return s;return-1},i.add=function(t){if(t instanceof Sprite==0)throw"Error: you can only add sprites to a group";i.push(t),t.groups.push(this)},i.size=function(){return i.length},i.removeSprites=function(){for(var t=0;t<i.length;t++)i[t].remove();i.length=0},i.clear=function(){i.length=0},i.remove=function(t){if(t instanceof Sprite==0)throw"Error: you can only remove sprites from a group";return t=this.indexOf(t),t>-1?(i.splice(t,1),!0):!1},i.toArray=function(){return i.slice(0)},i.maxDepth=function(){var t;t=0==i.length?0:i[0].depth;for(var e=0;e<i.length;e++)i[e].depth>t&&(t=i[e].depth);return t},i.minDepth=function(){var t;t=0==i.length?99999:i[0].depth;for(var e=0;e<i.length;e++)i[e].depth<t&&(t=i[e].depth);return t},i.draw=function(){this.sort(function(t,i){return t.depth-i.depth});for(var t=0;t<this.size();t++)this.get(t).display()},i.overlap=function(t,i){for(var e=0;e<this.size();e++)this.get(e).AABBops("overlap",t,i)},i.collide=function(t,i){for(var e=0;e<this.size();e++)this.get(e).AABBops("collide",t,i)},i.displace=function(t,i){for(var e=0;e<this.size();e++)this.get(e).AABBops("displace",t,i)},i.bounce=function(t,i){for(var e=0;e<this.size();e++)this.get(e).AABBops("bounce",t,i)},i}function CircleCollider(t,i,e){this.center=t,this.radius=i,this.originalRadius=i,void 0==e?this.offset=createVector(0,0):this.offset=e,this.extents=createVector(2*i,2*i),this.draw=function(t){noFill(),stroke(0,255,0),rectMode(CENTER),ellipse(this.center.x+this.offset.x,this.center.y+this.offset.y,2*this.radius,2*this.radius)},this.overlap=function(t){var i=this.radius+t.radius;i*=i;var e=pow(this.center.x-t.center.x,2)+pow(this.center.y-t.center.y,2);return i>e},this.collide=function(t){if(this.overlap(t)){var i=atan2(this.center.y-t.center.y,this.center.x-t.center.x),e=this.radius+t.radius,s=abs(e-dist(this.center.x,this.center.y,t.center.x,t.center.y)),o=createVector(cos(i)*s,sin(i)*s);return o}return createVector(0,0)},this.size=function(){return createVector(2*this.radius,2*this.radius)},this.left=function(){return this.center.x+this.offset.x-this.radius},this.right=function(){return this.center.x+this.offset.x+this.radius},this.top=function(){return this.center.y+this.offset.y-this.radius},this.bottom=function(){return this.center.y+this.offset.y+this.radius}}function AABB(t,i,e){this.center=t,this.extents=i,this.originalExtents=i.copy(),void 0==e?this.offset=createVector(0,0):this.offset=e,this.min=function(){return createVector(this.center.x+this.offset.x-this.extents.x,this.center.y+this.offset.y-this.extents.y)},this.max=function(){return createVector(this.center.x+this.offset.x+this.extents.x,this.center.y+this.offset.y+this.extents.y)},this.right=function(){return this.center.x+this.offset.x+this.extents.x/2},this.left=function(){return this.center.x+this.offset.x-this.extents.x/2},this.top=function(){return this.center.y+this.offset.y-this.extents.y/2},this.bottom=function(){return this.center.y+this.offset.y+this.extents.y/2},this.size=function(){return createVector(2*this.extents.x,2*this.extents.y)},this.rotate=function(t){var i=radians(t),e=this.extents.x*abs(cos(i))+this.extents.y*abs(sin(i)),s=this.extents.x*abs(sin(i))+this.extents.y*abs(cos(i));this.extents.x=e,this.extents.y=s},this.draw=function(t){noFill(),stroke(0,255,0),rectMode(CENTER),rect(this.center.x+this.offset.x,this.center.y+this.offset.y,this.size().x/2,this.size().y/2)},this.overlap=function(t){if(t instanceof AABB){var i=t.minkowskiDifference(this);return i.min().x<=0&&i.max().x>=0&&i.min().y<=0&&i.max().y>=0?!0:!1}if(t instanceof CircleCollider){var e=createVector(t.center.x,t.center.y);t.center.x<this.left()?e.x=this.left():t.center.x>this.right()&&(e.x=this.right()),t.center.y<this.top()?e.y=this.top():t.center.y>this.bottom()&&(e.y=this.bottom());var s=e.dist(t.center);return s<t.radius}},this.collide=function(t){if(t instanceof AABB){var i=t.minkowskiDifference(this);if(i.min().x<=0&&i.max().x>=0&&i.min().y<=0&&i.max().y>=0){var e=i.closestPointOnBoundsToPoint(createVector(0,0));return e}return createVector(0,0)}if(t instanceof CircleCollider){var s=createVector(t.center.x,t.center.y);t.center.x<this.left()?s.x=this.left():t.center.x>this.right()&&(s.x=this.right()),t.center.y<this.top()?s.y=this.top():t.center.y>this.bottom()&&(s.y=this.bottom());var o,r=s.dist(t.center);if(r<t.radius){if(s.x===t.center.x&&s.y===t.center.y){var n=s.x-this.center.x,h=s.y-this.center.y;abs(n)<abs(h)?n>0?s.x=this.right():s.x=this.left():0>h?s.y=this.top():s.y=this.bottom(),o=atan2(t.center.y-s.y,t.center.x-s.x),0==o&&(s.x==this.right()&&(o=PI),s.y==this.top()&&(o=PI/2),s.y==this.bottom()&&(o=-PI/2))}else o=atan2(s.y-t.center.y,s.x-t.center.x);var a=createVector(s.x-t.center.x,s.y-t.center.y),l=createVector(cos(o)*t.radius-a.x,sin(o)*t.radius-a.y);return l}return createVector(0,0)}},this.minkowskiDifference=function(t){var i=this.min().sub(t.max()),e=this.size().add(t.size());return new AABB(i.add(e.div(2)),e.div(2))},this.closestPointOnBoundsToPoint=function(t){var i=abs(t.x-this.min().x),e=createVector(this.min().x,t.y);return abs(this.max().x-t.x)<i&&(i=abs(this.max().x-t.x),e=createVector(this.max().x,t.y)),abs(this.max().y-t.y)<i&&(i=abs(this.max().y-t.y),e=createVector(t.x,this.max().y)),abs(this.min().y-t.y)<i&&(i=abs(this.min.y-t.y),e=createVector(t.x,this.min().y)),e}}function Animation(){this.images=[];var t=0,i=0,e=-1;if(this.offX=0,this.offY=0,this.frameDelay=4,this.playing=!0,this.visible=!0,this.looping=!0,this.frameChanged=!1,this.imageCollider=!1,2==arguments.length&&"string"==typeof arguments[0]&&"string"==typeof arguments[1]){var s=arguments[0],o=arguments[1],r=s.substring(s.length-4,s.length);".png"!=r&&(println("Animation error: you need to use .png files (filename "+s+")"),s=-1);var n=o.substring(o.length-4,o.length);if(".png"!=n&&(println("Animation error: you need to use .png files (filename "+o+")"),o=-1),-1!=s&&-1!=o){for(var h=0,a=0,l=s.length-5;l>=0;l--)s.charAt(l)>="0"&&s.charAt(l)<="9"&&h++;for(var l=o.length-5;l>=0;l--)o.charAt(l)>="0"&&o.charAt(l)<="9"&&a++;var c=s.substring(0,s.length-(4+h)),u=o.substring(0,o.length-(4+a)),d=parseInt(s.substring(s.length-(4+h),s.length-4)),p=parseInt(o.substring(o.length-(4+a),o.length-4));if(d>p){var f=p;p=d,d=f}if(c!=u)this.images.push(loadImage(s)),this.images.push(loadImage(o));else if(h==a)for(var l=d;p>=l;l++){var g=c+nf(l,h)+".png";this.images.push(loadImage(g))}else for(var l=d;p>=l;l++){var g=c+l+".png";this.images.push(loadImage(g))}}}else if(0!=arguments.length)for(var l=0;l<arguments.length;l++)arguments[l]instanceof p5.Image?this.images.push(arguments[l]):this.images.push(loadImage(arguments[l]));this.clone=function(){var t=new Animation;t.images=[];for(var i=0;i<this.images.length;i++)t.images.push(this.images[i]);return t.offX=this.offX,t.offY=this.offY,t.frameDelay=this.frameDelay,t.playing=this.playing,t.looping=this.looping,t},this.draw=function(i,e){this.xpos=arguments[0],this.ypos=arguments[1],void 0!=arguments[2]?this.rotation=arguments[2]:this.rotation=0,this.visible&&(null==this.isSpriteAnimation&&this.update(),push(),imageMode(CENTER),translate(this.xpos,this.ypos),rotate(radians(this.rotation)),void 0!==this.images[t]?image(this.images[t],this.offX,this.offY):print("Warning undefined frame "+t),pop())},this.update=function(){i++;var s=t;this.frameChanged=!1,1==this.images.length&&(this.playing=!1,t=0),this.playing&&i%this.frameDelay===0&&(e>t&&-1!==e?t++:t>e&&-1!==e?t--:e==t&&-1!==e?this.playing=!1:this.looping?t>=this.images.length-1?t=0:t++:t<this.images.length-1&&t++),s!=t&&(this.frameChanged=!0)},this.play=function(){this.playing=!0,e=-1},this.stop=function(){this.playing=!1},this.rewind=function(){t=0},this.changeFrame=function(i){t=i<this.images.length?i:this.images.length-1,e=-1},this.nextFrame=function(){t<this.images.length-1?t+=1:this.looping&&(t=0),e=-1,this.playing=!1},this.previousFrame=function(){t>0?t-=1:this.looping&&(t=this.images.length-1),e=-1,this.playing=!1},this.goToFrame=function(i){this.f=i,this.f>=0&&this.f<this.images.length&&(e=this.f),e!=t&&(this.playing=!0)},this.getFrame=function(){return t},this.getLastFrame=function(){return this.images.length-1},this.getFrameImage=function(){return this.images[t]},this.getImageAt=function(t){return this.images[t]},this.getWidth=function(){return this.images[t].width},this.getHeight=function(){return this.images[t].height}}function construct(t,i){function e(){return t.apply(this,i)}return e.prototype=t.prototype,new e}function Quadtree(t,i,e,s){this.active=!0,this.max_objects=i||10,this.max_levels=e||4,this.level=s||0,this.bounds=t,this.objects=[],this.object_refs=[],this.nodes=[]}function updateTree(){quadTree.active&&(quadTree.updateBounds(),quadTree.cleanup())}!function(t,i){"function"==typeof define&&define.amd?define("p5.play",["p5"],function(t){i(t)}):i("object"==typeof exports?require("../p5"):t.p5)}(this,function(t){t.prototype.allSprites=new Group,t.prototype.createSprite=function(t,i,e,s){var o=new Sprite(t,i,e,s);return o.depth=allSprites.maxDepth()+1,allSprites.add(o),o},t.prototype.removeSprite=function(t){t.remove()},t.prototype.updateSprites=function(t){if(0==t&&(spriteUpdate=!1),1==t&&(spriteUpdate=!0),spriteUpdate)for(var i=0;i<allSprites.size();i++)allSprites.get(i).update()},t.prototype.spriteUpdate=!0,t.prototype.getSprites=function(){if(0===arguments.length)return allSprites.toArray();for(var t=[],i=0;i<arguments.length;i++)for(var e=0;e<allSprites.size();e++)allSprites.get(e).isTagged(arguments[i])&&t.push(allSprites.get(e));return t},t.prototype.drawSprites=function(t){if(0===arguments.length){allSprites.sort(function(t,i){return t.depth-i.depth});for(var i=0;i<allSprites.size();i++)allSprites.get(i).display()}else if(1===arguments.length){if(arguments[0]instanceof Array==0)throw"Error: with drawSprites you can only draw all sprites or a group";arguments[0].draw()}},t.prototype.drawSprite=function(t){null!=t&&t.display()},t.prototype.loadAnimation=function(){return construct(Animation,arguments)},t.prototype.animation=function(t,i,e){t.draw(i,e)};var i={},e={},s=0,o=1,r=2,n=3;t.prototype.keyWentDown=function(t){var e;return e="string"==typeof t?KEY[t.toUpperCase()]:t,void 0==i[e]&&(keyIsDown(e)?i[e]=r:i[e]=s),i[e]==o},t.prototype.keyWentUp=function(t){var e;return e="string"==typeof t?KEY[t.toUpperCase()]:t,void 0===i[e]&&(keyIsDown(t)?i[e]=r:i[e]=s),i[e]==n},t.prototype.keyDown=function(t){var e;return e="string"==typeof t?KEY[t.toUpperCase()]:t,void 0===i[e]&&(keyIsDown(t)?i[e]=r:i[e]=s),i[e]==r},t.prototype.mouseDown=function(t){return t=void 0==t?LEFT:t,void 0===e[t]&&(mouseIsPressed&&mouseButton==t?e[t]=r:e[t]=s),e[t]==r},t.prototype.mouseUp=function(t){return t=void 0==t?LEFT:t,void 0===e[t]&&(mouseIsPressed&&mouseButton==t?e[t]=r:e[t]=s),e[t]==s},t.prototype.mouseWentUp=function(t){return t=void 0==t?LEFT:t,void 0===e[t]&&(mouseIsPressed&&mouseButton==t?e[t]=r:e[t]=s),e[t]==n},t.prototype.mouseWentDown=function(t){return t=void 0==t?LEFT:t,void 0===e[t]&&(mouseIsPressed&&mouseButton==t?e[t]=r:e[t]=s),e[t]==o},t.prototype.KEY={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,PAGE_UP:33,SPACE:33," ":33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"0NUMPAD":96,"1NUMPAD":97,"2NUMPAD":98,"3NUMPAD":99,"4NUMPAD":100,"5NUMPAD":101,"6NUMPAD":102,"7NUMPAD":103,"8NUMPAD":104,"9NUMPAD":105,MULTIPLY:106,PLUS:107,MINUT:109,DOT:110,SLASH1:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,EQUAL:187,COMA:188,SLASH:191,BACKSLASH:220},t.prototype.readPresses=function(){for(var t in i)keyIsDown(t)?i[t]==s?i[t]=o:i[t]=r:i[t]==r?i[t]=n:i[t]=s;for(var h in e)mouseIsPressed&&mouseButton==h?e[h]==s?e[h]=o:e[h]=r:e[h]==r?e[h]=n:e[h]=s},t.prototype.useQuadTree=function(t){return void 0==quadTree?!1:void 0==t?quadTree.active:void(t?quadTree.active=!0:quadTree.active=!1)},t.prototype.quadTree=new Quadtree({x:0,y:0,width:0,height:0},4)}),p5.prototype.camera=new Camera(0,0,1),p5.prototype.camera.init=!1,Quadtree.prototype.updateBounds=function(){for(var t=this.getAll(),i=1e4,e=1e4,s=-1e4,o=-1e4,r=0;r<t.length;r++)t[r].position.x<i&&(i=t[r].position.x),t[r].position.y<e&&(e=t[r].position.y),t[r].position.x>s&&(s=t[r].position.x),t[r].position.y>o&&(o=t[r].position.y);this.bounds={x:i,y:e,width:s,height:o}},Quadtree.prototype.split=function(){var t=this.level+1,i=Math.round(this.bounds.width/2),e=Math.round(this.bounds.height/2),s=Math.round(this.bounds.x),o=Math.round(this.bounds.y);this.nodes[0]=new Quadtree({x:s+i,y:o,width:i,height:e},this.max_objects,this.max_levels,t),this.nodes[1]=new Quadtree({x:s,y:o,width:i,height:e},this.max_objects,this.max_levels,t),this.nodes[2]=new Quadtree({x:s,y:o+e,width:i,height:e},this.max_objects,this.max_levels,t),this.nodes[3]=new Quadtree({x:s+i,y:o+e,width:i,height:e},this.max_objects,this.max_levels,t)},Quadtree.prototype.getIndex=function(t){if(null==t.collider)return-1;var i=-1,e=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,o=t.collider.top()<s&&t.collider.top()+t.collider.size().y<s,r=t.collider.top()>s;return t.collider.left()<e&&t.collider.left()+t.collider.size().x<e?o?i=1:r&&(i=2):t.collider.left()>e&&(o?i=0:r&&(i=3)),i},Quadtree.prototype.insert=function(t){if(-1==this.objects.indexOf(t)){var i,e=0;if("undefined"!=typeof this.nodes[0]&&(i=this.getIndex(t),-1!==i))return void this.nodes[i].insert(t);if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels)for("undefined"==typeof this.nodes[0]&&this.split();e<this.objects.length;)i=this.getIndex(this.objects[e]),-1!==i?this.nodes[i].insert(this.objects.splice(e,1)[0]):e+=1}},Quadtree.prototype.retrieve=function(t){var i=this.getIndex(t),e=this.objects;if("undefined"!=typeof this.nodes[0])if(-1!==i)e=e.concat(this.nodes[i].retrieve(t));else for(var s=0;s<this.nodes.length;s+=1)e=e.concat(this.nodes[s].retrieve(t));return e},Quadtree.prototype.retrieveFromGroup=function(t,i){for(var e=[],s=this.retrieve(t),o=0;o<s.length;o++)i.contains(s[o])&&e.push(s[o]);return e},Quadtree.prototype.getAll=function(){for(var t=this.objects,i=0;i<this.nodes.length;i+=1)t=t.concat(this.nodes[i].getAll());return t},Quadtree.prototype.getObjectNode=function(t){var i;if(!this.nodes.length)return this;if(i=this.getIndex(t),-1===i)return this;var e=this.nodes[i].getObjectNode(t);return e?e:!1},Quadtree.prototype.removeObject=function(t){var i=this.getObjectNode(t),e=i.objects.indexOf(t);return-1===e?!1:void i.objects.splice(e,1)},Quadtree.prototype.clear=function(){if(this.objects=[],this.nodes.length){for(var t=0;t<this.nodes.length;t+=1)this.nodes[t].clear();this.nodes=[]}},Quadtree.prototype.cleanup=function(){var t=this.getAll();this.clear();for(var i=0;i<t.length;i++)this.insert(t[i])},p5.prototype.registerMethod("pre",p5.prototype.readPresses),p5.prototype.registerMethod("pre",p5.prototype.updateSprites),p5.prototype.registerMethod("post",updateTree),p5.prototype.registerMethod("pre",cameraPush),p5.prototype.registerMethod("post",cameraPop);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9wNS5wbGF5LmpzIl0sIm5hbWVzIjpbIlNwcml0ZSIsIl94IiwiX3kiLCJfdyIsIl9oIiwidGhpcyIsInBvc2l0aW9uIiwiY3JlYXRlVmVjdG9yIiwicHJldmlvdXNQb3NpdGlvbiIsIm5ld1Bvc2l0aW9uIiwiZGVsdGFYIiwiZGVsdGFZIiwidmVsb2NpdHkiLCJtYXhTcGVlZCIsImZyaWN0aW9uIiwiY29sbGlkZXIiLCJjb2xsaWRlclR5cGUiLCJ0b3VjaGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsIm1hc3MiLCJpbW1vdmFibGUiLCJyZXN0aXR1dGlvbiIsInJvdGF0aW9uIiwicm90YXRpb25TcGVlZCIsInJvdGF0ZVRvRGlyZWN0aW9uIiwiZGVwdGgiLCJzY2FsZSIsImRpclgiLCJkaXJZIiwidmlzaWJsZSIsIm1vdXNlQWN0aXZlIiwibW91c2VJc092ZXIiLCJtb3VzZUlzUHJlc3NlZCIsInVuZGVmaW5lZCIsIndpZHRoIiwiaGVpZ2h0Iiwib3JpZ2luYWxXaWR0aCIsIm9yaWdpbmFsSGVpZ2h0IiwicmVtb3ZlZCIsImxpZmUiLCJkZWJ1ZyIsInNoYXBlQ29sb3IiLCJjb2xvciIsInJhbmRvbSIsImdyb3VwcyIsIkFycmF5IiwiYW5pbWF0aW9ucyIsImN1cnJlbnRBbmltYXRpb24iLCJhbmltYXRpb24iLCJ1cGRhdGUiLCJ4IiwieSIsImxpbWl0U3BlZWQiLCJnZXREaXJlY3Rpb24iLCJnZXRXaWR0aCIsImdldEhlaWdodCIsImdldEJvdW5kaW5nQm94IiwiYWJzIiwiZnJhbWVDaGFuZ2VkIiwiQUFCQiIsInQiLCJyYWRpYW5zIiwiZXh0ZW50cyIsIm9yaWdpbmFsRXh0ZW50cyIsImNvcyIsInNpbiIsIkNpcmNsZUNvbGxpZGVyIiwicmFkaXVzIiwib3JpZ2luYWxSYWRpdXMiLCJzZXREZWZhdWx0Q29sbGlkZXIiLCJtb3VzZVVwZGF0ZSIsInJlbW92ZSIsInF1YWRUcmVlIiwiaW5zZXJ0IiwibW91c2VXYXNPdmVyIiwibW91c2VXYXNQcmVzc2VkIiwibW91c2VQb3NpdGlvbiIsImNhbWVyYSIsImFjdGl2ZSIsIm1vdXNlWCIsIm1vdXNlWSIsImRpc3QiLCJjZW50ZXIiLCJvbk1vdXNlT3ZlciIsImNhbGwiLCJwcmludCIsIm9uTW91c2VPdXQiLCJvbk1vdXNlUHJlc3NlZCIsIm9uTW91c2VSZWxlYXNlZCIsInNldENvbGxpZGVyIiwidHlwZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidyIsImgiLCJtaXJyb3JYIiwiZGlyIiwibWlycm9yWSIsImRpc3BsYXkiLCJwdXNoIiwiY29sb3JNb2RlIiwiUkdCIiwibm9TdHJva2UiLCJyZWN0TW9kZSIsIkNFTlRFUiIsImVsbGlwc2VNb2RlIiwiaW1hZ2VNb2RlIiwidHJhbnNsYXRlIiwicm90YXRlIiwiZHJhdyIsInBvcCIsInN0cm9rZSIsImxpbmUiLCJub0ZpbGwiLCJmaWxsIiwidGV4dEFsaWduIiwiTEVGVCIsIkJPVFRPTSIsInRleHRTaXplIiwidGV4dCIsInJlY3QiLCJyZW1vdmVPYmplY3QiLCJpIiwic2V0VmVsb2NpdHkiLCJnZXRTcGVlZCIsIm1hZyIsImRpcmVjdGlvbiIsImF0YW4yIiwiaXNOYU4iLCJkZWdyZWVzIiwiYWRkVG9Hcm91cCIsImdyb3VwIiwiYWRkIiwibWF4Iiwic3BlZWQiLCJrIiwic2V0U3BlZWQiLCJhbmdsZSIsImEiLCJhZGRTcGVlZCIsImF0dHJhY3Rpb25Qb2ludCIsIm1hZ25pdHVkZSIsInBvaW50WCIsInBvaW50WSIsImFkZEltYWdlIiwicDUiLCJJbWFnZSIsImFkZEFuaW1hdGlvbiIsImxhYmVsIiwiYW5pbSIsIkFuaW1hdGlvbiIsInNvdXJjZUFuaW1hdGlvbiIsIm5ld0FuaW1hdGlvbiIsImNsb25lIiwiaXNTcHJpdGVBbmltYXRpb24iLCJhbmltRnJhbWVzIiwiY29uc3RydWN0IiwiY2hhbmdlSW1hZ2UiLCJjaGFuZ2VBbmltYXRpb24iLCJnZXRBbmltYXRpb25MYWJlbCIsIm92ZXJsYXBQaXhlbCIsInBvaW50IiwiaW1nIiwiZ2V0RnJhbWVJbWFnZSIsInZhbHVlcyIsImdldCIsIm92ZXJsYXBQb2ludCIsInNxUmFkaXVzIiwic3FEaXN0IiwicG93Iiwib3ZlcmxhcCIsInRhcmdldCIsImNhbGxiYWNrIiwiQUFCQm9wcyIsImNvbGxpZGUiLCJkaXNwbGFjZSIsImJvdW5jZSIsInJlc3VsdCIsIm90aGVycyIsInJldHJpZXZlRnJvbUdyb3VwIiwib3RoZXIiLCJvdmVyIiwiZGlzcGxhY2VtZW50IiwidHVubmVsWCIsInJvdW5kIiwidHVubmVsWSIsInNpemUiLCJjIiwiZSIsImJib3giLCJvZmZzZXQiLCJtdWx0IiwibmV3VmVsWDEiLCJuZXdWZWxZMSIsIm5ld1ZlbFgyIiwibmV3VmVsWTIiLCJzdWIiLCJDYW1lcmEiLCJ6b29tIiwicHJvdG90eXBlIiwib24iLCJjYW1lcmFQdXNoIiwib2ZmIiwiY2FtZXJhUG9wIiwiaW5pdCIsIkdyb3VwIiwidmlydEVxdWFscyIsIm9iaiIsImVxdWFscyIsIkZ1bmN0aW9uIiwiYXJyYXkiLCJjb250YWlucyIsInNwcml0ZSIsImluZGV4T2YiLCJpdGVtIiwibGVuIiwicyIsInJlbW92ZVNwcml0ZXMiLCJjbGVhciIsInNwbGljZSIsInRvQXJyYXkiLCJzbGljZSIsIm1heERlcHRoIiwibWluRGVwdGgiLCJtaW4iLCJzb3J0IiwiYiIsIl9jZW50ZXIiLCJfcmFkaXVzIiwiX29mZnNldCIsImNvbCIsImVsbGlwc2UiLCJyIiwicmFkaWkiLCJpbnRlcnNlY3Rpb24iLCJfZXh0ZW50cyIsImNvcHkiLCJ3MiIsImgyIiwibWQiLCJtaW5rb3dza2lEaWZmZXJlbmNlIiwicHQiLCJkaXN0YW5jZSIsImJvdW5kc1BvaW50IiwiY2xvc2VzdFBvaW50T25Cb3VuZHNUb1BvaW50IiwieE92ZXJsYXAiLCJ5T3ZlcmxhcCIsIlBJIiwiZCIsInRvcExlZnQiLCJmdWxsU2l6ZSIsImRpdiIsIm1pbkRpc3QiLCJpbWFnZXMiLCJmcmFtZSIsImN5Y2xlcyIsInRhcmdldEZyYW1lIiwib2ZmWCIsIm9mZlkiLCJmcmFtZURlbGF5IiwicGxheWluZyIsImxvb3BpbmciLCJpbWFnZUNvbGxpZGVyIiwiZnJvbSIsInRvIiwiZXh0MSIsInN1YnN0cmluZyIsInByaW50bG4iLCJleHQyIiwiZGlnaXRzMSIsImRpZ2l0czIiLCJjaGFyQXQiLCJwcmVmaXgxIiwicHJlZml4MiIsIm51bWJlcjEiLCJwYXJzZUludCIsIm51bWJlcjIiLCJsb2FkSW1hZ2UiLCJmaWxlTmFtZSIsIm5mIiwibXlDbG9uZSIsInhwb3MiLCJ5cG9zIiwiaW1hZ2UiLCJwcmV2aW91c0ZyYW1lIiwicGxheSIsInN0b3AiLCJyZXdpbmQiLCJjaGFuZ2VGcmFtZSIsImYiLCJuZXh0RnJhbWUiLCJnb1RvRnJhbWUiLCJnZXRGcmFtZSIsImdldExhc3RGcmFtZSIsImdldEltYWdlQXQiLCJjb25zdHJ1Y3RvciIsImFyZ3MiLCJGIiwiYXBwbHkiLCJRdWFkdHJlZSIsImJvdW5kcyIsIm1heF9vYmplY3RzIiwibWF4X2xldmVscyIsImxldmVsIiwib2JqZWN0cyIsIm9iamVjdF9yZWZzIiwibm9kZXMiLCJ1cGRhdGVUcmVlIiwidXBkYXRlQm91bmRzIiwiY2xlYW51cCIsInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJhbGxTcHJpdGVzIiwiY3JlYXRlU3ByaXRlIiwicmVtb3ZlU3ByaXRlIiwidXBkYXRlU3ByaXRlcyIsInVwZCIsInNwcml0ZVVwZGF0ZSIsImdldFNwcml0ZXMiLCJhcnIiLCJqIiwiaXNUYWdnZWQiLCJkcmF3U3ByaXRlcyIsImRyYXdTcHJpdGUiLCJsb2FkQW5pbWF0aW9uIiwia2V5U3RhdGVzIiwibW91c2VTdGF0ZXMiLCJLRVlfSVNfVVAiLCJLRVlfV0VOVF9ET1dOIiwiS0VZX0lTX0RPV04iLCJLRVlfV0VOVF9VUCIsImtleVdlbnREb3duIiwia2V5Iiwia2V5Q29kZSIsIktFWSIsInRvVXBwZXJDYXNlIiwia2V5SXNEb3duIiwia2V5V2VudFVwIiwia2V5RG93biIsIm1vdXNlRG93biIsImJ1dHRvbkNvZGUiLCJtb3VzZUJ1dHRvbiIsIm1vdXNlVXAiLCJtb3VzZVdlbnRVcCIsIm1vdXNlV2VudERvd24iLCJCQUNLU1BBQ0UiLCJUQUIiLCJFTlRFUiIsIlNISUZUIiwiQ1RSTCIsIkFMVCIsIlBBVVNFIiwiQ0FQU19MT0NLIiwiRVNDIiwiUEFHRV9VUCIsIlNQQUNFIiwiICIsIlBBR0VfRE9XTiIsIkVORCIsIkhPTUUiLCJMRUZUX0FSUk9XIiwiVVBfQVJST1ciLCJSSUdIVF9BUlJPVyIsIkRPV05fQVJST1ciLCJJTlNFUlQiLCJERUxFVEUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiQSIsIkIiLCJDIiwiRCIsIkUiLCJHIiwiSCIsIkkiLCJKIiwiSyIsIkwiLCJNIiwiTiIsIk8iLCJQIiwiUSIsIlIiLCJTIiwiVCIsIlUiLCJWIiwiVyIsIlgiLCJZIiwiWiIsIjBOVU1QQUQiLCIxTlVNUEFEIiwiMk5VTVBBRCIsIjNOVU1QQUQiLCI0TlVNUEFEIiwiNU5VTVBBRCIsIjZOVU1QQUQiLCI3TlVNUEFEIiwiOE5VTVBBRCIsIjlOVU1QQUQiLCJNVUxUSVBMWSIsIlBMVVMiLCJNSU5VVCIsIkRPVCIsIlNMQVNIMSIsIkYxIiwiRjIiLCJGMyIsIkY0IiwiRjUiLCJGNiIsIkY3IiwiRjgiLCJGOSIsIkYxMCIsIkYxMSIsIkYxMiIsIkVRVUFMIiwiQ09NQSIsIlNMQVNIIiwiQkFDS1NMQVNIIiwicmVhZFByZXNzZXMiLCJidG4iLCJ1c2VRdWFkVHJlZSIsInVzZSIsImdldEFsbCIsInNwbGl0IiwibmV4dExldmVsIiwic3ViV2lkdGgiLCJNYXRoIiwic3ViSGVpZ2h0IiwiZ2V0SW5kZXgiLCJwUmVjdCIsImluZGV4IiwidmVydGljYWxNaWRwb2ludCIsImhvcml6b250YWxNaWRwb2ludCIsInRvcFF1YWRyYW50IiwiYm90dG9tUXVhZHJhbnQiLCJyZXRyaWV2ZSIsInJldHVybk9iamVjdHMiLCJjb25jYXQiLCJyZXN1bHRzIiwiY2Fu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QVVoVCxLQUFLd2IsUUFFbkJ4YixNQUFLME4sT0FFTCxLQUFLLEdBQUloRyxHQUFFLEVBQUdBLEVBQUlzTCxFQUFRcE4sT0FBUThCLElBQ2hDMUgsS0FBS3VFLE9BQVF5TyxFQUFRdEwsS0FlekJ1QixHQUFHc0QsVUFBVXFRLGVBQWUsTUFBTzNULEdBQUdzRCxVQUFVNk8sYUFHaERuUyxHQUFHc0QsVUFBVXFRLGVBQWUsTUFBTzNULEdBQUdzRCxVQUFVd0gsZUFHaEQ5SyxHQUFHc0QsVUFBVXFRLGVBQWUsT0FBUXpKLFlBR3BDbEssR0FBR3NELFVBQVVxUSxlQUFlLE1BQU9uUSxZQUNuQ3hELEdBQUdzRCxVQUFVcVEsZUFBZSxPQUFRalEiLCJmaWxlIjoidmVuZG9yL3A1LnBsYXkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxucDUucGxheVxuYnkgUGFvbG8gUGVkZXJjaW5pL21vbGxlaW5kdXN0cmlhLCAyMDE1XG5odHRwOi8vbW9sbGVpbmR1c3RyaWEub3JnL1xuXG5UaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbnRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4oYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG5UaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbmJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG5NRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG5HTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG5Zb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4qL1xuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbmlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5kZWZpbmUoJ3A1LnBsYXknLCBbJ3A1J10sIGZ1bmN0aW9uIChwNSkgeyAoZmFjdG9yeShwNSkpO30pO1xuZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuZmFjdG9yeShyZXF1aXJlKCcuLi9wNScpKTtcbmVsc2VcbmZhY3Rvcnkocm9vdFsncDUnXSk7XG59XG4odGhpcywgZnVuY3Rpb24gKHA1KSB7XG4vKipcbiAqIHA1LnBsYXkgaXMgYSBsaWJyYXJ5IGZvciBwNS5qcyB0byBmYWNpbGl0YXRlIHRoZSBjcmVhdGlvbiBvZiBnYW1lcyBhbmQgZ2FtZWxpa2VcbiAqIHByb2plY3RzLiBcbiAqXG4gKiBJdCBwcm92aWRlcyBhIGZsZXhpYmxlIFNwcml0ZSBjbGFzcyB0byBtYW5hZ2UgdmlzdWFsIG9iamVjdHMgaW4gMkQgc3BhY2VcbiAqIGFuZCBmZWF0dXJlcyBzdWNoIGFzIGFuaW1hdGlvbiBzdXBwb3J0LCBiYXNpYyBjb2xsaXNpb24gZGV0ZWN0aW9uIFxuICogYW5kIHJlc29sdXRpb24sIG1vdXNlIGFuZCBrZXlib2FyZCBpbnRlcmFjdGlvbnMsIGFuZCBhIHZpcnR1YWwgY2FtZXJhLlxuICogIFxuICogcDUucGxheSBpcyBub3QgYSBib3gyRC1kZXJpdmVkIHBoeXNpY3MgZW5naW5lLCBpdCBkb2Vzbid0IHVzZSBldmVudHMsIGFuZCBpdCdzIFxuICogZGVzaWduZWQgdG8gYmUgdW5kZXJzdG9vZCBhbmQgcG9zc2libHkgbW9kaWZpZWQgYnkgaW50ZXJtZWRpYXRlIHByb2dyYW1tZXJzLlxuICpcbiAqIFNlZSB0aGUgZXhhbXBsZXMgZm9sZGVyIGZvciBtb3JlIGluZm8gb24gaG93IHRvIHVzZSB0aGlzIGxpYnJhcnkuXG4gKiBcbiAqIEBtb2R1bGUgcDUucGxheVxuICogQHN1Ym1vZHVsZSBwNS5wbGF5XG4gKiBAZm9yIHA1LnBsYXlcbiAqIEBtYWluXG4gKi9cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgIHA1IGFkZGl0aW9uc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqIFxuKiBBIEdyb3VwIGNvbnRhaW5pbmcgYWxsIHRoZSBzcHJpdGVzIGluIHRoZSBza2V0Y2guXG4qXG4qIEBwcm9wZXJ0eSBhbGxTcHJpdGVzXG4qIEB0eXBlIHtHcm91cH1cbiovXG5wNS5wcm90b3R5cGUuYWxsU3ByaXRlcyA9IG5ldyBHcm91cCgpO1xuXG4vKipcbiAgICogQSBTcHJpdGUgaXMgdGhlIG1haW4gYnVpbGRpbmcgYmxvY2sgb2YgcDUucGxheTpcbiAgICogYW4gZWxlbWVudCBhYmxlIHRvIHN0b3JlIGltYWdlcyBvciBhbmltYXRpb25zIHdpdGggYSBzZXQgb2ZcbiAgICogcHJvcGVydGllcyBzdWNoIGFzIHBvc2l0aW9uIGFuZCB2aXNpYmlsaXR5LlxuICAgKiBBIFNwcml0ZSBjYW4gaGF2ZSBhIGNvbGxpZGVyIHRoYXQgZGVmaW5lcyB0aGUgYWN0aXZlIGFyZWEgdG8gZGV0ZWN0XG4gICAqIGNvbGxpc2lvbnMgb3Igb3ZlcmxhcHBpbmdzIHdpdGggb3RoZXIgc3ByaXRlcyBhbmQgbW91c2UgaW50ZXJhY3Rpb25zLlxuICAgKiBcbiAgICogQG1ldGhvZCBjcmVhdGVTcHJpdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggSW5pdGlhbCB4IGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgSW5pdGlhbCB5IGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSBwbGFjZWhvbGRlciByZWN0YW5nbGUgYW5kIG9mIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIgdW50aWwgYW4gaW1hZ2Ugb3IgbmV3IGNvbGxpZGVyIGFyZSBzZXRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdGhlIHBsYWNlaG9sZGVyIHJlY3RhbmdsZSBhbmQgb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICBjb2xsaWRlciB1bnRpbCBhbiBpbWFnZSBvciBuZXcgY29sbGlkZXIgYXJlIHNldFxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBuZXcgc3ByaXRlIGluc3RhbmNlXG4gICAqL1xuXG5wNS5wcm90b3R5cGUuY3JlYXRlU3ByaXRlID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICB2YXIgcyA9IG5ldyBTcHJpdGUoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gIHMuZGVwdGggPSBhbGxTcHJpdGVzLm1heERlcHRoKCkrMTtcbiAgYWxsU3ByaXRlcy5hZGQocyk7XG4gIHJldHVybiBzO1xufVxuXG5cbi8qKlxuICAgKiBSZW1vdmVzIGEgU3ByaXRlIGZyb20gdGhlIHNrZXRjaC4gXG4gICAqIFRoZSByZW1vdmVkIFNwcml0ZSB3b24ndCBiZSBkcmF3biBvciB1cGRhdGVkIGFueW1vcmUuXG4gICAqIEVxdWl2YWxlbnQgdG8gU3ByaXRlLnJlbW92ZSgpXG4gICAqXG4gICAqIEBtZXRob2QgcmVtb3ZlU3ByaXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzcHJpdGUgU3ByaXRlIHRvIGJlIHJlbW92ZWRcbiovXG5wNS5wcm90b3R5cGUucmVtb3ZlU3ByaXRlID0gZnVuY3Rpb24oc3ByaXRlKSB7XG4gIHNwcml0ZS5yZW1vdmUoKTtcbn1cblxuLyoqIFxuKiBVcGRhdGVzIGFsbCB0aGUgc3ByaXRlcyBpbiB0aGUgc2tldGNoIChwb3NpdGlvbiwgYW5pbWF0aW9uLi4uKVxuKiBpdCdzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IGF0IGV2ZXJ5IGRyYXcoKS5cbiogSXQgY2FuIGJlIHBhdXNlZCBieSBwYXNzaW5nIGEgcGFyYW1ldGVyIHRydWUgb3IgZmFsc2U7XG4qIE5vdGU6IGl0IGRvZXMgbm90IHJlbmRlciB0aGUgc3ByaXRlcy5cbipcbiogQG1ldGhvZCB1cGRhdGVTcHJpdGVzXG4qIEBwYXJhbSB7Qm9vbGVhbn0gdXBkYXRpbmcgZmFsc2UgdG8gcGF1c2UgdGhlIHVwZGF0ZSwgdHJ1ZSB0byByZXN1bWUgXG4qL1xucDUucHJvdG90eXBlLnVwZGF0ZVNwcml0ZXMgPSBmdW5jdGlvbih1cGQpIHtcbiAgXG4gIGlmKHVwZD09ZmFsc2UpXG4gICAgc3ByaXRlVXBkYXRlID0gZmFsc2U7XG4gIGlmKHVwZD09dHJ1ZSlcbiAgICBzcHJpdGVVcGRhdGUgPSB0cnVlO1xuICBcbiAgaWYoc3ByaXRlVXBkYXRlKVxuICBmb3IodmFyIGkgPSAwOyBpPGFsbFNwcml0ZXMuc2l6ZSgpOyBpKyspXG4gIHtcbiAgICBhbGxTcHJpdGVzLmdldChpKS51cGRhdGUoKTtcbiAgfVxufVxuXG5wNS5wcm90b3R5cGUuc3ByaXRlVXBkYXRlID0gdHJ1ZTtcblxuLyoqIFxuKiBSZXR1cm5zIGFsbCB0aGUgc3ByaXRlcyBpbiB0aGUgc2tldGNoIGFzIGFuIGFycmF5XG4qXG4qIEBtZXRob2QgZ2V0U3ByaXRlc1xuKiBAcmV0dXJuIHtBcnJheX0gQXJyYXkgb2YgU3ByaXRlc1xuKi9cbnA1LnByb3RvdHlwZS5nZXRTcHJpdGVzID0gZnVuY3Rpb24oKSB7XG5cbiAgLy9kcmF3IGV2ZXJ5dGhpbmdcbiAgaWYoYXJndW1lbnRzLmxlbmd0aD09PTApXG4gIHtcbiAgICByZXR1cm4gYWxsU3ByaXRlcy50b0FycmF5KCk7XG4gIH1cbiAgZWxzZVxuICB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIC8vZm9yIGV2ZXJ5IHRhZ1xuICAgIGZvcih2YXIgaj0wOyBqPGFyZ3VtZW50cy5sZW5ndGg7IGorKylcbiAgICB7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpPGFsbFNwcml0ZXMuc2l6ZSgpOyBpKyspXG4gICAgICB7XG4gICAgICAgIGlmKGFsbFNwcml0ZXMuZ2V0KGkpLmlzVGFnZ2VkKGFyZ3VtZW50c1tqXSkpXG4gICAgICAgICAgYXJyLnB1c2goYWxsU3ByaXRlcy5nZXQoaSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhcnI7XG4gIH1cblxufVxuXG4vKiogXG4qIERpc3BsYXlzIGEgR3JvdXAgb2Ygc3ByaXRlcy5cbiogSWYgbm8gcGFyYW1ldGVyIGlzIHNwZWNpZmllZCwgZHJhd3MgYWxsIHNwcml0ZXMgaW4gdGhlXG4qIHNrZXRjaC5cbiogVGhlIGRyYXdpbmcgb3JkZXIgaXMgZGV0ZXJtaW5lZCBieSB0aGUgU3ByaXRlIHByb3BlcnR5IFwiZGVwdGhcIlxuKlxuKiBAbWV0aGlkIGRyYXdTcHJpdGVzXG4qIEBwYXJhbSB7R3JvdXB9IFtncm91cF0gR3JvdXAgb2YgU3ByaXRlcyB0byBiZSBkaXNwbGF5ZWRcbiovXG5wNS5wcm90b3R5cGUuZHJhd1Nwcml0ZXMgPSBmdW5jdGlvbihncm91cCkge1xuXG4gIC8vZHJhdyBldmVyeXRoaW5nXG4gIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKVxuICB7XG4gICAgLy9zb3J0IGJ5IGRlcHRoXG4gICAgYWxsU3ByaXRlcy5zb3J0KGZ1bmN0aW9uKGEsYikgeyBcbiAgICAgIHJldHVybiBhLmRlcHRoIC0gYi5kZXB0aDtcbiAgICB9KTtcblxuICAgIGZvcih2YXIgaSA9IDA7IGk8YWxsU3ByaXRlcy5zaXplKCk7IGkrKylcbiAgICB7XG4gICAgICBhbGxTcHJpdGVzLmdldChpKS5kaXNwbGF5KCk7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09PTEpXG4gIHtcbiAgICBpZihhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBBcnJheSA9PSBmYWxzZSlcbiAgICAgIHRocm93KFwiRXJyb3I6IHdpdGggZHJhd1Nwcml0ZXMgeW91IGNhbiBvbmx5IGRyYXcgYWxsIHNwcml0ZXMgb3IgYSBncm91cFwiKTtcbiAgICBlbHNlXG4gICAge1xuICAgICAgYXJndW1lbnRzWzBdLmRyYXcoKTtcbiAgICB9XG5cbiAgfVxufVxuXG4vKiogXG4qIERpc3BsYXlzIGEgU3ByaXRlLlxuKiBUbyBiZSB0eXBpY2FsbHkgdXNlZCBpbiB0aGUgbWFpbiBkcmF3IGZ1bmN0aW9uLlxuKiBcbiogQG1ldGhvZCBkcmF3U3ByaXRlXG4qIEBwYXJhbSB7U3ByaXRlfSBzcHJpdGUgU3ByaXRlIHRvIGJlIGRpc3BsYXllZFxuKi9cbnA1LnByb3RvdHlwZS5kcmF3U3ByaXRlID0gZnVuY3Rpb24oc3ByaXRlKSB7XG4gIGlmKHNwcml0ZSE9bnVsbClcbiAgc3ByaXRlLmRpc3BsYXkoKTtcbn1cblxuLyoqIFxuKiBMb2FkcyBhbiBhbmltYXRpb24uXG4qIFRvIGJlIHR5cGljYWxseSB1c2VkIGluIHRoZSBwcmVsb2FkKCkgZnVuY3Rpb24gb2YgdGhlIHNrZXRjaC5cbiogXG4qIEBtZXRob2QgbG9hZEFuaW1hdGlvblxuKiBAcGFyYW0ge1Nwcml0ZX0gc3ByaXRlIFNwcml0ZSB0byBiZSBkaXNwbGF5ZWRcbiovXG5wNS5wcm90b3R5cGUubG9hZEFuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gY29uc3RydWN0KEFuaW1hdGlvbiwgYXJndW1lbnRzKTtcbn1cblxuLyoqIFxuKiBEaXNwbGF5cyBhbiBhbmltYXRpb24uXG4qIFxuKiBAbWV0aG9kIGFuaW1hdGlvblxuKiBAcGFyYW0ge0FuaW1hdGlvbn0gYW5pbSBBbmltYXRpb24gdG8gYmUgZGlzcGxheWVkXG4qIEBwYXJhbSB7TnVtYmVyfSB4IFggY29vcmRpbmF0ZVxuKiBAcGFyYW0ge051bWJlcn0geSBZIGNvb3JkaW5hdGVcbipcbiovXG5wNS5wcm90b3R5cGUuYW5pbWF0aW9uID0gZnVuY3Rpb24oYW5pbSwgeCwgeSkge1xuICBhbmltLmRyYXcoeCwgeSk7XG59XG5cbi8vdmFyaWFibGUgdG8gZGV0ZWN0IGluc3RhbnQgcHJlc3Nlc1xudmFyIGtleVN0YXRlcyA9IHt9O1xudmFyIG1vdXNlU3RhdGVzID0ge307XG52YXIgS0VZX0lTX1VQID0gMDtcbnZhciBLRVlfV0VOVF9ET1dOID0gMTtcbnZhciBLRVlfSVNfRE9XTiA9IDI7XG52YXIgS0VZX1dFTlRfVVAgPSAzO1xuXG5cbi8qKiBcbiogRGV0ZWN0cyBpZiBhIGtleSB3YXMgcHJlc3NlZCBkdXJpbmcgdGhlIGxhc3QgY3ljbGUuXG4qIEl0IGNhbiBiZSB1c2VkIHRvIHRyaWdnZXIgZXZlbnRzIG9uY2UsIHdoZW4gYSBrZXkgaXMgcHJlc3NlZCBvciByZWxlYXNlZC5cbiogRXhhbXBsZTogU3VwZXIgTWFyaW8ganVtcGluZy4gXG4qIFxuKiBAbWV0aG9kIGtleVdlbnREb3duXG4qIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30ga2V5IEtleSBjb2RlIG9yIGNoYXJhY3RlclxuKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSBrZXkgd2FzIHByZXNzZWRcbiovXG5wNS5wcm90b3R5cGUua2V5V2VudERvd24gPSBmdW5jdGlvbihrZXkpIHtcbiAgdmFyIGtleUNvZGU7XG4gIFxuICBpZih0eXBlb2Yga2V5ID09IFwic3RyaW5nXCIpXG4gICAga2V5Q29kZSA9IEtFWVtrZXkudG9VcHBlckNhc2UoKV07XG4gIGVsc2VcbiAgICBrZXlDb2RlID0ga2V5O1xuICBcbiAgLy9pZiB1bmRlZmluZWQgc3RhcnQgY2hlY2tpbmcgaXRcbiAgaWYoa2V5U3RhdGVzW2tleUNvZGVdPT11bmRlZmluZWQpXG4gIHtcbiAgICBpZihrZXlJc0Rvd24oa2V5Q29kZSkpXG4gICAgICBrZXlTdGF0ZXNba2V5Q29kZV0gPSBLRVlfSVNfRE9XTjtcbiAgICBlbHNlXG4gICAgICBrZXlTdGF0ZXNba2V5Q29kZV0gPSBLRVlfSVNfVVA7XG4gIH1cblxuICByZXR1cm4gKGtleVN0YXRlc1trZXlDb2RlXSA9PSBLRVlfV0VOVF9ET1dOKTtcbn1cblxuXG4vKiogXG4qIERldGVjdHMgaWYgYSBrZXkgd2FzIHJlbGVhc2VkIGR1cmluZyB0aGUgbGFzdCBjeWNsZS5cbiogSXQgY2FuIGJlIHVzZWQgdG8gdHJpZ2dlciBldmVudHMgb25jZSwgd2hlbiBhIGtleSBpcyBwcmVzc2VkIG9yIHJlbGVhc2VkLlxuKiBFeGFtcGxlOiBTcGFjZXNoaXAgc2hvb3RpbmcuIFxuKiBcbiogQG1ldGhvZCBrZXlXZW50VXBcbiogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBrZXkgS2V5IGNvZGUgb3IgY2hhcmFjdGVyXG4qIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIGtleSB3YXMgcmVsZWFzZWRcbiovXG5wNS5wcm90b3R5cGUua2V5V2VudFVwID0gZnVuY3Rpb24oa2V5KSB7XG4gIFxuICB2YXIga2V5Q29kZTtcbiAgXG4gIGlmKHR5cGVvZiBrZXkgPT0gXCJzdHJpbmdcIilcbiAgICBrZXlDb2RlID0gS0VZW2tleS50b1VwcGVyQ2FzZSgpXTtcbiAgZWxzZVxuICAgIGtleUNvZGUgPSBrZXk7XG4gIFxuICAvL2lmIHVuZGVmaW5lZCBzdGFydCBjaGVja2luZyBpdFxuICBpZihrZXlTdGF0ZXNba2V5Q29kZV09PT11bmRlZmluZWQpXG4gIHtcbiAgICBpZihrZXlJc0Rvd24oa2V5KSlcbiAgICAgIGtleVN0YXRlc1trZXlDb2RlXSA9IEtFWV9JU19ET1dOO1xuICAgIGVsc2VcbiAgICAgIGtleVN0YXRlc1trZXlDb2RlXSA9IEtFWV9JU19VUDtcbiAgfVxuXG4gIHJldHVybiAoa2V5U3RhdGVzW2tleUNvZGVdID09IEtFWV9XRU5UX1VQKTtcbn1cblxuLyoqIFxuKiBEZXRlY3RzIGlmIGEga2V5IGlzIGN1cnJlbnRseSBwcmVzc2VkXG4qIExpa2UgcDUga2V5SXNEb3duIGJ1dCBhY2NlcHRzIHN0cmluZ3MgYW5kIGNvZGVzXG4qIFxuKiBAbWV0aG9kIGtleURvd25cbiogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBrZXkgS2V5IGNvZGUgb3IgY2hhcmFjdGVyXG4qIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIGtleSBpcyBkb3duXG4qL1xucDUucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbihrZXkpIHtcbiAgXG4gIHZhciBrZXlDb2RlO1xuICBcbiAgaWYodHlwZW9mIGtleSA9PSBcInN0cmluZ1wiKVxuICAgIGtleUNvZGUgPSBLRVlba2V5LnRvVXBwZXJDYXNlKCldO1xuICBlbHNlXG4gICAga2V5Q29kZSA9IGtleTtcbiAgXG4gIC8vaWYgdW5kZWZpbmVkIHN0YXJ0IGNoZWNraW5nIGl0XG4gIGlmKGtleVN0YXRlc1trZXlDb2RlXT09PXVuZGVmaW5lZClcbiAge1xuICAgIGlmKGtleUlzRG93bihrZXkpKVxuICAgICAga2V5U3RhdGVzW2tleUNvZGVdID0gS0VZX0lTX0RPV047XG4gICAgZWxzZVxuICAgICAga2V5U3RhdGVzW2tleUNvZGVdID0gS0VZX0lTX1VQO1xuICB9XG5cbiAgcmV0dXJuIChrZXlTdGF0ZXNba2V5Q29kZV0gPT0gS0VZX0lTX0RPV04pO1xufVxuXG4vKiogXG4qIERldGVjdHMgaWYgYSBtb3VzZSBidXR0b24gaXMgY3VycmVudGx5IGRvd25cbiogQ29tYmluZXMgbW91c2VJc1ByZXNzZWQgYW5kIG1vdXNlQnV0dG9uIG9mIHA1XG4qXG4qIEBtZXRob2QgbW91c2VEb3duXG4qIEBwYXJhbSB7TnVtYmVyfSBidXR0b24gTW91c2UgYnV0dG9uIGNvbnN0YW50IExFRlQsIFJJR0hUIG9yIENFTlRFUlxuKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSBidXR0b24gaXMgZG93blxuKi9cbnA1LnByb3RvdHlwZS5tb3VzZURvd24gPSBmdW5jdGlvbihidXR0b25Db2RlKSB7XG4gIFxuICBpZihidXR0b25Db2RlID09IHVuZGVmaW5lZClcbiAgICBidXR0b25Db2RlID0gTEVGVDtcbiAgZWxzZVxuICAgIGJ1dHRvbkNvZGUgPSBidXR0b25Db2RlO1xuICBcbiAgLy91bmRlZmluZWQgPSBub3QgdHJhY2tlZCB5ZXQsIHN0YXJ0IHRyYWNraW5nXG4gIGlmKG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdPT09dW5kZWZpbmVkKVxuICB7XG4gIGlmKG1vdXNlSXNQcmVzc2VkICYmIG1vdXNlQnV0dG9uID09IGJ1dHRvbkNvZGUpIFxuICAgIG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdID0gS0VZX0lTX0RPV047XG4gIGVsc2VcbiAgICBtb3VzZVN0YXRlc1tidXR0b25Db2RlXSA9IEtFWV9JU19VUDtcbiAgfSBcblxuICByZXR1cm4gKG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdID09IEtFWV9JU19ET1dOKTtcbn1cblxuLyoqIFxuKiBEZXRlY3RzIGlmIGEgbW91c2UgYnV0dG9uIGlzIGN1cnJlbnRseSB1cFxuKiBDb21iaW5lcyBtb3VzZUlzUHJlc3NlZCBhbmQgbW91c2VCdXR0b24gb2YgcDUgXG4qXG4qIEBtZXRob2QgbW91c2VVcFxuKiBAcGFyYW0ge051bWJlcn0gYnV0dG9uIE1vdXNlIGJ1dHRvbiBjb25zdGFudCBMRUZULCBSSUdIVCBvciBDRU5URVJcbiogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgYnV0dG9uIGlzIHVwXG4qL1xucDUucHJvdG90eXBlLm1vdXNlVXAgPSBmdW5jdGlvbihidXR0b25Db2RlKSB7XG4gIFxuICBpZihidXR0b25Db2RlID09IHVuZGVmaW5lZClcbiAgICBidXR0b25Db2RlID0gTEVGVDtcbiAgZWxzZVxuICAgIGJ1dHRvbkNvZGUgPSBidXR0b25Db2RlO1xuICBcbiAgLy91bmRlZmluZWQgPSBub3QgdHJhY2tlZCB5ZXQsIHN0YXJ0IHRyYWNraW5nXG4gIGlmKG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdPT09dW5kZWZpbmVkKVxuICB7XG4gIGlmKG1vdXNlSXNQcmVzc2VkICYmIG1vdXNlQnV0dG9uID09IGJ1dHRvbkNvZGUpIFxuICAgIG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdID0gS0VZX0lTX0RPV047XG4gIGVsc2VcbiAgICBtb3VzZVN0YXRlc1tidXR0b25Db2RlXSA9IEtFWV9JU19VUDtcbiAgfSBcblxuICByZXR1cm4gKG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdID09IEtFWV9JU19VUCk7XG59XG5cbi8qKiBcbiogRGV0ZWN0cyBpZiBhIG1vdXNlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgZHVyaW5nIHRoZSBsYXN0IGN5Y2xlLlxuKiBJdCBjYW4gYmUgdXNlZCB0byB0cmlnZ2VyIGV2ZW50cyBvbmNlLCB0byBiZSBjaGVja2VkIGluIHRoZSBkcmF3IGN5Y2xlXG4qXG4qIEBtZXRob2QgbW91c2VXZW50VXBcbiogQHBhcmFtIHtOdW1iZXJ9IGJ1dHRvbiBNb3VzZSBidXR0b24gY29uc3RhbnQgTEVGVCwgUklHSFQgb3IgQ0VOVEVSXG4qIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIGJ1dHRvbiB3YXMganVzdCByZWxlYXNlZFxuKi9cbnA1LnByb3RvdHlwZS5tb3VzZVdlbnRVcCA9IGZ1bmN0aW9uKGJ1dHRvbkNvZGUpIHtcbiAgXG4gIGlmKGJ1dHRvbkNvZGUgPT0gdW5kZWZpbmVkKVxuICAgIGJ1dHRvbkNvZGUgPSBMRUZUO1xuICBlbHNlXG4gICAgYnV0dG9uQ29kZSA9IGJ1dHRvbkNvZGU7XG4gIFxuICAvL3VuZGVmaW5lZCA9IG5vdCB0cmFja2VkIHlldCwgc3RhcnQgdHJhY2tpbmdcbiAgaWYobW91c2VTdGF0ZXNbYnV0dG9uQ29kZV09PT11bmRlZmluZWQpXG4gIHtcbiAgaWYobW91c2VJc1ByZXNzZWQgJiYgbW91c2VCdXR0b24gPT0gYnV0dG9uQ29kZSkgXG4gICAgbW91c2VTdGF0ZXNbYnV0dG9uQ29kZV0gPSBLRVlfSVNfRE9XTjtcbiAgZWxzZVxuICAgIG1vdXNlU3RhdGVzW2J1dHRvbkNvZGVdID0gS0VZX0lTX1VQO1xuICB9IFxuXG4gIHJldHVybiAobW91c2VTdGF0ZXNbYnV0dG9uQ29kZV0gPT0gS0VZX1dFTlRfVVApO1xufVxuXG5cbi8qKiBcbiogRGV0ZWN0cyBpZiBhIG1vdXNlIGJ1dHRvbiB3YXMgcHJlc3NlZCBkdXJpbmcgdGhlIGxhc3QgY3ljbGUuXG4qIEl0IGNhbiBiZSB1c2VkIHRvIHRyaWdnZXIgZXZlbnRzIG9uY2UsIHRvIGJlIGNoZWNrZWQgaW4gdGhlIGRyYXcgY3ljbGVcbipcbiogQG1ldGhvZCBtb3VzZVdlbnREb3duXG4qIEBwYXJhbSB7TnVtYmVyfSBidXR0b24gTW91c2UgYnV0dG9uIGNvbnN0YW50IExFRlQsIFJJR0hUIG9yIENFTlRFUlxuKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSBidXR0b24gd2FzIGp1c3QgcHJlc3NlZFxuKi9cbnA1LnByb3RvdHlwZS5tb3VzZVdlbnREb3duID0gZnVuY3Rpb24oYnV0dG9uQ29kZSkge1xuICBcbiAgaWYoYnV0dG9uQ29kZSA9PSB1bmRlZmluZWQpXG4gICAgYnV0dG9uQ29kZSA9IExFRlQ7XG4gIGVsc2VcbiAgICBidXR0b25Db2RlID0gYnV0dG9uQ29kZTtcbiAgXG4gIC8vdW5kZWZpbmVkID0gbm90IHRyYWNrZWQgeWV0LCBzdGFydCB0cmFja2luZ1xuICBpZihtb3VzZVN0YXRlc1tidXR0b25Db2RlXT09PXVuZGVmaW5lZClcbiAge1xuICBpZihtb3VzZUlzUHJlc3NlZCAmJiBtb3VzZUJ1dHRvbiA9PSBidXR0b25Db2RlKSBcbiAgICBtb3VzZVN0YXRlc1tidXR0b25Db2RlXSA9IEtFWV9JU19ET1dOO1xuICBlbHNlXG4gICAgbW91c2VTdGF0ZXNbYnV0dG9uQ29kZV0gPSBLRVlfSVNfVVA7XG4gIH0gXG5cbiAgcmV0dXJuIChtb3VzZVN0YXRlc1tidXR0b25Db2RlXSA9PSBLRVlfV0VOVF9ET1dOKTtcbn1cblxuXG4vKiogXG4qIEFuIG9iamVjdCBzdG9yaW5nIGFsbCB1c2VmdWwga2V5cyBmb3IgZWFzeSBhY2Nlc3NcbiogS2V5LnRhYiA9IDlcbipcbiogQHByb3BlcnR5IEtFWVxuKiBAdHlwZSB7R3JvdXB9XG4qL1xuXG5wNS5wcm90b3R5cGUuS0VZID0ge1xuICAgICdCQUNLU1BBQ0UnOiA4LFxuICAgICdUQUInOiA5LFxuICAgICdFTlRFUic6IDEzLFxuICAgICdTSElGVCc6IDE2LFxuICAgICdDVFJMJzogMTcsXG4gICAgJ0FMVCc6IDE4LFxuICAgICdQQVVTRSc6IDE5LFxuICAgICdDQVBTX0xPQ0snOiAyMCxcbiAgICAnRVNDJzogMjcsXG4gICAgJ1BBR0VfVVAnOiAzMyxcbiAgICAnU1BBQ0UnOiAzMyxcbiAgICAnICc6IDMzLFxuICAgICdQQUdFX0RPV04nOiAzNCxcbiAgICAnRU5EJzogMzUsXG4gICAgJ0hPTUUnOiAzNixcbiAgICAnTEVGVF9BUlJPVyc6IDM3LFxuICAgICdVUF9BUlJPVyc6IDM4LFxuICAgICdSSUdIVF9BUlJPVyc6IDM5LFxuICAgICdET1dOX0FSUk9XJzogNDAsXG4gICAgJ0lOU0VSVCc6IDQ1LFxuICAgICdERUxFVEUnOiA0NixcbiAgICAnMCc6IDQ4LFxuICAgICcxJzogNDksXG4gICAgJzInOiA1MCxcbiAgICAnMyc6IDUxLFxuICAgICc0JzogNTIsXG4gICAgJzUnOiA1MyxcbiAgICAnNic6IDU0LFxuICAgICc3JzogNTUsXG4gICAgJzgnOiA1NixcbiAgICAnOSc6IDU3LFxuICAgICdBJzogNjUsXG4gICAgJ0InOiA2NixcbiAgICAnQyc6IDY3LFxuICAgICdEJzogNjgsXG4gICAgJ0UnOiA2OSxcbiAgICAnRic6IDcwLFxuICAgICdHJzogNzEsXG4gICAgJ0gnOiA3MixcbiAgICAnSSc6IDczLFxuICAgICdKJzogNzQsXG4gICAgJ0snOiA3NSxcbiAgICAnTCc6IDc2LFxuICAgICdNJzogNzcsXG4gICAgJ04nOiA3OCxcbiAgICAnTyc6IDc5LFxuICAgICdQJzogODAsXG4gICAgJ1EnOiA4MSxcbiAgICAnUic6IDgyLFxuICAgICdTJzogODMsXG4gICAgJ1QnOiA4NCxcbiAgICAnVSc6IDg1LFxuICAgICdWJzogODYsXG4gICAgJ1cnOiA4NyxcbiAgICAnWCc6IDg4LFxuICAgICdZJzogODksXG4gICAgJ1onOiA5MCxcbiAgICAnME5VTVBBRCc6IDk2LFxuICAgICcxTlVNUEFEJzogOTcsXG4gICAgJzJOVU1QQUQnOiA5OCxcbiAgICAnM05VTVBBRCc6IDk5LFxuICAgICc0TlVNUEFEJzogMTAwLFxuICAgICc1TlVNUEFEJzogMTAxLFxuICAgICc2TlVNUEFEJzogMTAyLFxuICAgICc3TlVNUEFEJzogMTAzLFxuICAgICc4TlVNUEFEJzogMTA0LFxuICAgICc5TlVNUEFEJzogMTA1LFxuICAgICdNVUxUSVBMWSc6IDEwNixcbiAgICAnUExVUyc6IDEwNyxcbiAgICAnTUlOVVQnOiAxMDksXG4gICAgJ0RPVCc6IDExMCxcbiAgICAnU0xBU0gxJzogMTExLFxuICAgICdGMSc6IDExMixcbiAgICAnRjInOiAxMTMsXG4gICAgJ0YzJzogMTE0LFxuICAgICdGNCc6IDExNSxcbiAgICAnRjUnOiAxMTYsXG4gICAgJ0Y2JzogMTE3LFxuICAgICdGNyc6IDExOCxcbiAgICAnRjgnOiAxMTksXG4gICAgJ0Y5JzogMTIwLFxuICAgICdGMTAnOiAxMjEsXG4gICAgJ0YxMSc6IDEyMixcbiAgICAnRjEyJzogMTIzLFxuICAgICdFUVVBTCc6IDE4NyxcbiAgICAnQ09NQSc6IDE4OCxcbiAgICAnU0xBU0gnOiAxOTEsXG4gICAgJ0JBQ0tTTEFTSCc6IDIyMFxufVxuXG5cblxuLy9wcmUgZHJhdzogZGV0ZWN0IGtleVN0YXRlc1xucDUucHJvdG90eXBlLnJlYWRQcmVzc2VzID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIGtleSBpbiBrZXlTdGF0ZXMpIHtcbiAgICBpZihrZXlJc0Rvd24oa2V5KSkgLy9pZiBpcyBkb3duXG4gICAge1xuICAgICAgaWYoa2V5U3RhdGVzW2tleV0gPT0gS0VZX0lTX1VQKS8vYW5kIHdhcyB1cFxuICAgICAgICBrZXlTdGF0ZXNba2V5XSA9IEtFWV9XRU5UX0RPV047XG4gICAgICBlbHNlIFxuICAgICAgICBrZXlTdGF0ZXNba2V5XSA9IEtFWV9JU19ET1dOOyAvL25vdyBpcyBzaW1wbHkgZG93blxuICAgIH1cbiAgICBlbHNlIC8vaWYgaXQncyB1cFxuICAgIHtcbiAgICAgIGlmKGtleVN0YXRlc1trZXldID09IEtFWV9JU19ET1dOKS8vYW5kIHdhcyB1cFxuICAgICAgICBrZXlTdGF0ZXNba2V5XSA9IEtFWV9XRU5UX1VQO1xuICAgICAgZWxzZSBcbiAgICAgICAga2V5U3RhdGVzW2tleV0gPSBLRVlfSVNfVVA7IC8vbm93IGlzIHNpbXBseSBkb3duXG4gICAgfVxuICB9XG4gIFxuICAvL21vdXNlXG4gIGZvciAodmFyIGJ0biBpbiBtb3VzZVN0YXRlcykge1xuICAgIFxuICAgIGlmKG1vdXNlSXNQcmVzc2VkICYmIG1vdXNlQnV0dG9uID09IGJ0bikgLy9pZiBpcyBkb3duXG4gICAge1xuICAgICAgaWYobW91c2VTdGF0ZXNbYnRuXSA9PSBLRVlfSVNfVVApLy9hbmQgd2FzIHVwXG4gICAgICAgIG1vdXNlU3RhdGVzW2J0bl0gPSBLRVlfV0VOVF9ET1dOO1xuICAgICAgZWxzZSBcbiAgICAgICAgbW91c2VTdGF0ZXNbYnRuXSA9IEtFWV9JU19ET1dOOyAvL25vdyBpcyBzaW1wbHkgZG93blxuICAgIH1cbiAgICBlbHNlIC8vaWYgaXQncyB1cFxuICAgIHtcbiAgICAgIGlmKG1vdXNlU3RhdGVzW2J0bl0gPT0gS0VZX0lTX0RPV04pLy9hbmQgd2FzIHVwXG4gICAgICAgIG1vdXNlU3RhdGVzW2J0bl0gPSBLRVlfV0VOVF9VUDtcbiAgICAgIGVsc2UgXG4gICAgICAgIG1vdXNlU3RhdGVzW2J0bl0gPSBLRVlfSVNfVVA7IC8vbm93IGlzIHNpbXBseSBkb3duXG4gICAgfVxuICB9XG4gIFxufVxuXG4vKiogXG4qIFR1cm5zIHRoZSBxdWFkVHJlZSBvbiBvciBvZmYuXG4qIEEgcXVhZHRyZWUgaXMgYSBkYXRhIHN0cnVjdHVyZSB1c2VkIHRvIG9wdGltaXplIGNvbGxpc2lvbiBkZXRlY3Rpb24uXG4qIEl0IGNhbiBpbXByb3ZlIHBlcmZvcm1hbmNlIHdoZW4gdGhlcmUgaXMgYSBsYXJnZSBudW1iZXIgb2YgU3ByaXRlcyB0byBiZVxuKiBjaGVja2VkIGNvbnRpbnVvdXNseSBmb3Igb3ZlcmxhcHBpbmcuXG4qIFxuKiBwNS5wbGF5IHdpbGwgY3JlYXRlIGFuZCB1cGRhdGUgYSBxdWFkdHJlZSBhdXRvbWF0aWNhbGx5LlxuKiBcbiogQG1ldGhvZCB1c2VRdWFkVHJlZVxuKiBAcGFyYW0ge0Jvb2xlYW59IHVzZSBQYXNzIHRydWUgdG8gZW5hYmxlLCBmYWxzZSB0byBkaXNhYmxlXG4qL1xucDUucHJvdG90eXBlLnVzZVF1YWRUcmVlID0gZnVuY3Rpb24odXNlKSB7XG5cbiAgaWYocXVhZFRyZWUhPXVuZGVmaW5lZClcbiAge1xuICAgIGlmKHVzZT09dW5kZWZpbmVkKVxuICAgICAgcmV0dXJuIHF1YWRUcmVlLmFjdGl2ZTtcbiAgICBlbHNlIGlmKHVzZSlcbiAgICAgIHF1YWRUcmVlLmFjdGl2ZSA9IHRydWU7XG4gICAgZWxzZVxuICAgICAgcXVhZFRyZWUuYWN0aXZlID0gZmFsc2U7XG4gIH1cbiAgZWxzZVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy90aGUgYWN0dWFsIHF1YWRUcmVlXG5wNS5wcm90b3R5cGUucXVhZFRyZWUgPSBuZXcgUXVhZHRyZWUoe1xuICB4OiAwLFxuICB5OiAwLFxuICB3aWR0aDogMCxcbiAgaGVpZ2h0OiAwXG59LCA0KTtcblxuXG4vKlxuLy9mcmFtZXJhdGUgaW5kZXBlbmRlbnQgZGVsdGEsIGRvZXNuJ3QgcmVhbGx5IHdvcmtcbnA1LnByb3RvdHlwZS5kZWx0YVRpbWUgPSAxO1xuXG52YXIgbm93ID0gRGF0ZS5ub3coKTtcbnZhciB0aGVuID0gRGF0ZS5ub3coKTtcbnZhciBJTlRFUlZBTF82MCA9IDAuMDE2NjY2NjsgLy82MCBmcHNcblxuZnVuY3Rpb24gdXBkYXRlRGVsdGEoKSB7XG50aGVuID0gbm93O1xubm93ID0gRGF0ZS5ub3coKTtcbmRlbHRhVGltZSA9ICgobm93IC0gdGhlbikgLyAxMDAwKS9JTlRFUlZBTF82MDsgLy8gc2Vjb25kcyBzaW5jZSBsYXN0IGZyYW1lXG59XG4qL1xuXG59KSk7XG4gIFxuLyoqXG4gICAqIEEgU3ByaXRlIGlzIHRoZSBtYWluIGJ1aWxkaW5nIGJsb2NrIG9mIHA1LnBsYXk6XG4gICAqIGFuIGVsZW1lbnQgYWJsZSB0byBzdG9yZSBpbWFnZXMgb3IgYW5pbWF0aW9ucyB3aXRoIGEgc2V0IG9mXG4gICAqIHByb3BlcnRpZXMgc3VjaCBhcyBwb3NpdGlvbiBhbmQgdmlzaWJpbGl0eS5cbiAgICogQSBTcHJpdGUgY2FuIGhhdmUgYSBjb2xsaWRlciB0aGF0IGRlZmluZXMgdGhlIGFjdGl2ZSBhcmVhIHRvIGRldGVjdFxuICAgKiBjb2xsaXNpb25zIG9yIG92ZXJsYXBwaW5ncyB3aXRoIG90aGVyIHNwcml0ZXMgYW5kIG1vdXNlIGludGVyYWN0aW9ucy5cbiAgICogXG4gICAqIEBjbGFzcyBTcHJpdGVcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB4IEluaXRpYWwgeCBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5IEluaXRpYWwgeSBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgcGxhY2Vob2xkZXIgcmVjdGFuZ2xlIGFuZCBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyIHVudGlsIGFuIGltYWdlIG9yIG5ldyBjb2xsaWRlciBhcmUgc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSBwbGFjZWhvbGRlciByZWN0YW5nbGUgYW5kIG9mIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIgdW50aWwgYW4gaW1hZ2Ugb3IgbmV3IGNvbGxpZGVyIGFyZSBzZXRcbiAgICovIFxuXG5cbmZ1bmN0aW9uIFNwcml0ZShfeCwgX3ksIF93LCBfaCkge1xuXG4gIC8qKlxuICAqIFRoZSBzcHJpdGUncyBwb3NpdGlvbiBvZiB0aGUgc3ByaXRlIGFzIGEgdmVjdG9yICh4LHkpLlxuICAqIEBwcm9wZXJ0eSBwb3NpdGlvblxuICAqIEB0eXBlIHtwNS5WZWN0b3J9XG4gICovXG4gIHRoaXMucG9zaXRpb24gPSBjcmVhdGVWZWN0b3IoX3gsIF95KTtcblxuICAvKipcbiAgKiBUaGUgc3ByaXRlJ3MgcG9zaXRpb24gYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbGFzdCB1cGRhdGUgYXMgYSB2ZWN0b3IgKHgseSkuXG4gICogQHByb3BlcnR5IHByZXZpb3VzUG9zaXRpb25cbiAgKiBAdHlwZSB7cDUuVmVjdG9yfVxuICAqL1xuICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSBjcmVhdGVWZWN0b3IoX3gsIF95KTtcblxuICAvKlxuICBUaGUgc3ByaXRlJ3MgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiB0aGUgbGFzdCB1cGRhdGUgYXMgYSB2ZWN0b3IgKHgseSkuXG4gIE5vdGU6IHRoaXMgd2lsbCBkaWZmZXIgZnJvbSBwb3NpdGlvbiB3aGVuZXZlciB0aGUgcG9zaXRpb24gaXMgY2hhbmdlZFxuICBkaXJlY3RseSBieSBhc3NpZ25tZW50LlxuICAqL1xuICB0aGlzLm5ld1Bvc2l0aW9uID0gY3JlYXRlVmVjdG9yKF94LCBfeSk7XG5cbiAgLy9Qb3NpdGlvbiBkaXNwbGFjZW1lbnQgb24gdGhlIHggY29vcmRpbmF0ZSBzaW5jZSB0aGUgbGFzdCB1cGRhdGVcbiAgdGhpcy5kZWx0YVggPSAwO1xuICB0aGlzLmRlbHRhWSA9IDA7XG5cbiAgLyoqXG4gICogVGhlIHNwcml0ZSdzIHZlbG9jaXR5IGFzIGEgdmVjdG9yICh4LHkpXG4gICogVmVsb2NpdHkgaXMgc3BlZWQgYnJva2VuIGRvd24gdG8gaXRzIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIGNvbXBvbmVudHMuXG4gICpcbiAgKiBAcHJvcGVydHkgdmVsb2NpdHlcbiAgKiBAdHlwZSB7cDUuVmVjdG9yfVxuICAqL1xuICB0aGlzLnZlbG9jaXR5ID0gY3JlYXRlVmVjdG9yKDAsIDApO1xuXG4gIC8qKlxuICAqIFNldCBhIGxpbWl0IHRvIHRoZSBzcHJpdGUncyBzY2FsYXIgc3BlZWQgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uLlxuICAqIFRoZSB2YWx1ZSBjYW4gb25seSBiZSBwb3NpdGl2ZS4gSWYgc2V0IHRvIC0xLCB0aGVyZSdzIG5vIGxpbWl0LlxuICAqIFxuICAqIEBwcm9wZXJ0eSBtYXhTcGVlZFxuICAqIEB0eXBlIHtOdW1iZXJ9XG4gICogQGRlZmF1bHQgLTFcbiAgKi9cbiAgdGhpcy5tYXhTcGVlZCA9IC0xO1xuXG4gIC8qKlxuICAqIEZyaWN0aW9uIGZhY3RvciwgcmVkdWNlcyB0aGUgc3ByaXRlJ3MgdmVsb2NpdHkuXG4gICogVGhlIGZyaWN0aW9uIHNob3VsZCBiZSBjbG9zZSB0byAxIChlZy4gMC45OSlcbiAgKiAxOiBubyBmcmljdGlvblxuICAqXG4gICogQHByb3BlcnR5IGZyaWN0aW9uXG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAtMVxuICAqL1xuICB0aGlzLmZyaWN0aW9uID0gMTtcblxuICAvKipcbiAgKiBUaGUgc3ByaXRlJ3MgY3VycmVudCBjb2xsaWRlci5cbiAgKiBJdCBjYW4gZWl0aGVyIGJlIGFuIEF4aXMgQWxpZ25lZCBCb3VuZGluZyBCb3ggKGEgbm9uLXJvdGF0ZWQgcmVjdGFuZ2xlKVxuICAqIG9yIGEgY2lyY3VsYXIgY29sbGlkZXIuXG4gICogSWYgdGhlIHNwcml0ZSBpcyBjaGVja2VkIGZvciBjb2xsaXNpb24sIGJvdW5jZSwgb3ZlcmxhcHBpbmcgb3IgbW91c2UgZXZlbnRzIHRoZVxuICAqIGNvbGxpZGVyIGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBmcm9tIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IHBhcmFtZXRlciBwYXNzZWQgYXQgdGhlXG4gICogY3JlYXRpb24gb2YgdGhlIHNwcml0ZSBvciB0aGUgZnJvbSB0aGUgaW1hZ2UgZGltZW5zaW9uIGluIGNhc2Ugb2YgYW5pbWF0ZSBzcHJpdGVzXG4gICpcbiAgKiBZb3UgY2FuIHNldCBhIGN1c3RvbSBjb2xsaWRlciB3aXRoIFNwcml0ZS5zZXRDb2xsaWRlclxuICAqXG4gICogQHByb3BlcnR5IGNvbGxpZGVyXG4gICogQHR5cGUge09iamVjdH1cbiAgKi9cbiAgdGhpcy5jb2xsaWRlcjtcbiAgXG4gIC8vaW50ZXJuYWwgdXNlXG4gIC8vXCJkZWZhdWx0XCIgLSBubyBpbWFnZSBvciBjdXN0b20gY29sbGlkZXIgaXMgc3BlY2lmaWVkLCB1c2UgdGhlIHNoYXBlIHdpZHRoIC8gaGVpZ2h0XG4gIC8vXCJjdXN0b21cIiAtIHNwZWNpZmllZCB3aXRoIHNldENvbGxpZGVyXG4gIC8vXCJpbWFnZVwiIC0gbm8gY29sbGlkZXIgaXMgc2V0IHdpdGggc2V0Q29sbGlkZXIgYW5kIGFuIGltYWdlIGlzIGFkZGVkXG4gIHRoaXMuY29sbGlkZXJUeXBlID0gXCJub25lXCI7XG4gIFxuICAvKipcbiAgKiBPYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9zdCByZWNlbnQgY29sbGlzaW9uL292ZXJsYXBwaW5nXG4gICogVG8gYmUgdHlwaWNhbGx5IHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBTcHJpdGUub3ZlcmxhcCBvciBTcHJpdGUuY29sbGlkZVxuICAqIGZ1bmN0aW9ucy5cbiAgKiBUaGUgcHJvcGVydGllcyBhcmUgdG91Y2hpbmcubGVmdCwgdG91Y2hpbmcucmlnaHQsIHRvdWNoaW5nLnRvcCwgXG4gICogdG91Y2hpbmcuYm90dG9tIGFuZCBhcmUgZWl0aGVyIHRydWUgb3IgZmFsc2UgZGVwZW5kaW5nIG9uIHRoZSBzaWRlIG9mIHRoZVxuICAqIGNvbGxpZGVyLlxuICAqXG4gICogQHByb3BlcnR5IHRvdWNoaW5nXG4gICogQHR5cGUge09iamVjdH1cbiAgKi9cbiAgdGhpcy50b3VjaGluZyA9IHt9O1xuICB0aGlzLnRvdWNoaW5nLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy50b3VjaGluZy5yaWdodCA9IGZhbHNlO1xuICB0aGlzLnRvdWNoaW5nLnRvcCA9IGZhbHNlO1xuICB0aGlzLnRvdWNoaW5nLmJvdHRvbSA9IGZhbHNlO1xuXG4gIC8qKlxuICAqIFRoZSBtYXNzIGRldGVybWluZXMgdGhlIHZlbG9jaXR5IHRyYW5zZmVyIHdoZW4gc3ByaXRlcyBib3VuY2VcbiAgKiBhZ2FpbnN0IGVhY2ggb3RoZXIuIFNlZSBTcHJpdGUuYm91bmNlXG4gICogVGhlIGhpZ2hlciB0aGUgbWFzcyB0aGUgbGVhc3QgdGhlIHNwcml0ZSB3aWxsIGJlIGFmZmVjdGVkIGJ5IGNvbGxpc2lvbnMuXG4gICpcbiAgKiBAcHJvcGVydHkgbWFzc1xuICAqIEB0eXBlIHtOdW1iZXJ9XG4gICogQGRlZmF1bHQgMVxuICAqL1xuICB0aGlzLm1hc3MgPSAxO1xuXG4gIC8qKlxuICAqIElmIHNldCB0byB0cnVlIHRoZSBzcHJpdGUgd29uJ3QgYm91bmNlIG9yIGJlIGRpc3BsYWNlZCBieSBjb2xsaXNpb25zXG4gICogU2ltdWxhdGVzIGFuIGluZmluaXRlIG1hc3Mgb3IgYW4gYW5jaG9yZWQgb2JqZWN0LlxuICAqXG4gICogQHByb3BlcnR5IGltbW92YWJsZVxuICAqIEB0eXBlIHtCb29sZWFufVxuICAqIEBkZWZhdWx0IGZhbHNlXG4gICovXG4gIHRoaXMuaW1tb3ZhYmxlID0gZmFsc2U7XG5cbiAgLy9Db2VmZmljaWVudCBvZiByZXN0aXR1dGlvbiAtIHZlbG9jaXR5IGxvc3QgaW4gdGhlIGJvdW5jaW5nXG4gIC8vMCBwZXJmZWN0bHkgaW5lbGFzdGljICwgMSBlbGFzdGljLCA+IDEgaHlwZXIgZWxhc3RpY1xuXG4gIC8qKlxuICAqIENvZWZmaWNpZW50IG9mIHJlc3RpdHV0aW9uLiBUaGUgdmVsb2NpdHkgbG9zdCBhZnRlciBib3VuY2luZy5cbiAgKiAxOiBwZXJmZWN0bHkgZWxhc3RpYywgbm8gZW5lcmd5IGlzIGxvc3RcbiAgKiAwOiBwZXJmZWN0bHkgaW5lbGFzdGljLCBubyBib3VuY2luZ1xuICAqIDwxOiBpbmVsYXN0aWMsIHRoaXMgaXMgdGhlIG1vc3QgY29tbW9uIGluIG5hdHVyZVxuICAqID4xOiBoeXBlciBlbGFzdGljLCBlbmVyZ3kgaXMgaW5jcmVhc2VkIGxpa2UgaW4gYSBwaW5iYWxsIGJ1bXBlclxuICAqXG4gICogQHByb3BlcnR5IHJlc3RpdHV0aW9uXG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAxXG4gICovXG4gIHRoaXMucmVzdGl0dXRpb24gPSAxO1xuXG4gIC8qKlxuICAqIFJvdGF0aW9uIGluIGRlZ3JlZXMgb2YgdGhlIHZpc3VhbCBlbGVtZW50IChpbWFnZSBvciBhbmltYXRpb24pXG4gICogTm90ZTogdGhpcyBpcyBub3QgdGhlIG1vdmVtZW50J3MgZGlyZWN0aW9uLCBzZWUgZ2V0RGlyZWN0aW9uLlxuICAqXG4gICogQHByb3BlcnR5IHJvdGF0aW9uXG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAwXG4gICovXG4gIHRoaXMucm90YXRpb24gPSAwO1xuXG4gIC8qKlxuICAqIFJvdGF0aW9uIGNoYW5nZSBpbiBkZWdyZWVzIHBlciBmcmFtZSBvZiB0aGV2aXN1YWwgZWxlbWVudCAoaW1hZ2Ugb3IgYW5pbWF0aW9uKVxuICAqIE5vdGU6IHRoaXMgaXMgbm90IHRoZSBtb3ZlbWVudCdzIGRpcmVjdGlvbiwgc2VlIGdldERpcmVjdGlvbi5cbiAgKlxuICAqIEBwcm9wZXJ0eSByb3RhdGlvblNwZWVkXG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAwXG4gICovXG4gIHRoaXMucm90YXRpb25TcGVlZCA9IDA7XG5cbiAgXG4gIC8qKlxuICAqIEF1dG9tYXRpY2FsbHkgc2V0IHRoZSByb3RhdGlvbiBvZiB0aGUgdmlzdWFsIGVsZW1lbnQgXG4gICogKGltYWdlIG9yIGFuaW1hdGlvbikgdG8gdGhlIHNwcml0ZSdzIG1vdmVtZW50IGRpcmVjdGlvbi5cbiAgKlxuICAqIEBwcm9wZXJ0eSByb3RhdGVUb0RpcmVjdGlvblxuICAqIEB0eXBlIHtCb29sZWFufVxuICAqIEBkZWZhdWx0IGZhbHNlXG4gICovXG4gIHRoaXMucm90YXRlVG9EaXJlY3Rpb24gPSBmYWxzZTtcblxuXG4gIC8qKlxuICAqIERldGVybWluZXMgdGhlIHJlbmRlcmluZyBvcmRlciB3aXRoaW4gYSBncm91cDogYSBzcHJpdGUgd2l0aCBcbiAgKiBsb3dlciBkZXB0aCB3aWxsIGFwcGVhciBiZWxvdyB0aGUgb25lcyB3aXRoIGhpZ2hlciBkZXB0aC5cbiAgKlxuICAqIE5vdGU6IGRyYXdpbmcgYSBncm91cCBiZWZvcmUgYW5vdGhlciB3aXRoIGRyYXdTcHJpdGVzIHdpbGwgbWFrZVxuICAqIGl0cyBtZW1iZXJzIGFwcGVhciBiZWxvdyB0aGUgc2Vjb25kIG9uZSwgbGlrZSBpbiBub3JtYWwgcDUgY2FudmFzXG4gICogZHJhd2luZy5cbiAgKiBcbiAgKiBAcHJvcGVydHkgZGVwdGhcbiAgKiBAdHlwZSB7TnVtYmVyfVxuICAqIEBkZWZhdWx0IDBcbiAgKi9cbiAgdGhpcy5kZXB0aCA9IDA7XG5cbiAgLyoqXG4gICogRGV0ZXJtaW5lcyB0aGUgc3ByaXRlJ3Mgc2NhbGUuXG4gICogRXhhbXBsZTogMiB3aWxsIGJlIHR3aWNlIHRoZSBuYXRpdmUgc2l6ZSBvZiB0aGUgdmlzdWFscyxcbiAgKiAwLjUgd2lsbCBiZSBoYWxmLiBTY2FsaW5nIHVwIG1heSBtYWtlIGltYWdlcyBibHVycnkuXG4gICogXG4gICogQHByb3BlcnR5IHNjYWxlXG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAxXG4gICovXG4gIHRoaXMuc2NhbGUgPSAxO1xuXG4gIHZhciBkaXJYID0gMTtcbiAgdmFyIGRpclkgPSAxO1xuXG4gIC8qKlxuICAqIFRoZSBzcHJpdGUncyB2aXNpYmlsaXR5LlxuICAqXG4gICogQHByb3BlcnR5IHZpc2libGVcbiAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgKiBAZGVmYXVsdCB0cnVlXG4gICovXG4gIHRoaXMudmlzaWJsZSA9IHRydWU7XG5cbiAgLyoqXG4gICogSWYgc2V0IHRvIHRydWUgc3ByaXRlIHdpbGwgdHJhY2sgaXRzIG1vdXNlIHN0YXRlLlxuICAqIHRoZSBwcm9wZXJ0aWVzIG1vdXNlSXNQcmVzc2VkIGFuZCBtb3VzZUlzT3ZlciB3aWxsIGJlIHVwZGF0ZWQuXG4gICogTm90ZTogYXV0b21hdGljYWxseSBzZXQgdG8gdHJ1ZSBpZiB0aGUgZnVuY3Rpb25zXG4gICogb25Nb3VzZVJlbGVhc2VkIG9yIG9uTW91c2VQcmVzc2VkIGFyZSBzZXQuXG4gICpcbiAgKiBAcHJvcGVydHkgbW91c2VBY3RpdmVcbiAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgKiBAZGVmYXVsdCBmYWxzZVxuICAqL1xuICB0aGlzLm1vdXNlQWN0aXZlID0gZmFsc2U7XG5cbiAgLyoqXG4gICogVHJ1ZSBpZiBtb3VzZSBpcyBvbiB0aGUgc3ByaXRlJ3MgY29sbGlkZXIuXG4gICogUmVhZCBvbmx5LlxuICAqXG4gICogQHByb3BlcnR5IG1vdXNlSXNPdmVyXG4gICogQHR5cGUge0Jvb2xlYW59XG4gICovXG4gIHRoaXMubW91c2VJc092ZXIgPSBmYWxzZTtcblxuICAvKipcbiAgKiBUcnVlIGlmIG1vdXNlIGlzIHByZXNzZWQgb24gdGhlIHNwcml0ZSdzIGNvbGxpZGVyLlxuICAqIFJlYWQgb25seS5cbiAgKlxuICAqIEBwcm9wZXJ0eSBtb3VzZUlzUHJlc3NlZFxuICAqIEB0eXBlIHtCb29sZWFufVxuICAqL1xuICB0aGlzLm1vdXNlSXNQcmVzc2VkID0gZmFsc2U7XG5cbiAgLyoqXG4gICogV2lkdGggb2YgdGhlIHNwcml0ZSdzIGN1cnJlbnQgaW1hZ2UuXG4gICogSWYgbm8gaW1hZ2VzIG9yIGFuaW1hdGlvbnMgYXJlIHNldCBpdCdzIHRoZSB3aWR0aCBvZiB0aGUgXG4gICogcGxhY2Vob2xkZXIgcmVjdGFuZ2xlLlxuICAqXG4gICogQHByb3BlcnR5IHdpZHRoXG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAxMDBcbiAgKi9cbiAgaWYoX3cgPT0gdW5kZWZpbmVkKVxuICAgIHRoaXMud2lkdGggPSAxMDA7XG4gIGVsc2VcbiAgICB0aGlzLndpZHRoID0gX3c7XG5cbiAgLyoqXG4gICogSGVpZ2h0IG9mIHRoZSBzcHJpdGUncyBjdXJyZW50IGltYWdlLlxuICAqIElmIG5vIGltYWdlcyBvciBhbmltYXRpb25zIGFyZSBzZXQgaXQncyB0aGUgaGVpZ2h0IG9mIHRoZSBcbiAgKiBwbGFjZWhvbGRlciByZWN0YW5nbGUuXG4gICpcbiAgKiBAcHJvcGVydHkgaGVpZ2h0XG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAxMDBcbiAgKi9cbiAgaWYoX2ggPT0gdW5kZWZpbmVkKVxuICAgIHRoaXMuaGVpZ2h0ID0gMTAwO1xuICBlbHNlXG4gICAgdGhpcy5oZWlnaHQgPSBfaDtcblxuICAvKipcbiAgKiBVbnNjYWxlZCB3aWR0aCBvZiB0aGUgc3ByaXRlXG4gICogSWYgbm8gaW1hZ2VzIG9yIGFuaW1hdGlvbnMgYXJlIHNldCBpdCdzIHRoZSB3aWR0aCBvZiB0aGUgXG4gICogcGxhY2Vob2xkZXIgcmVjdGFuZ2xlLlxuICAqXG4gICogQHByb3BlcnR5IG9yaWdpbmFsV2lkdGhcbiAgKiBAdHlwZSB7TnVtYmVyfVxuICAqIEBkZWZhdWx0IDEwMFxuICAqL1xuICB0aGlzLm9yaWdpbmFsV2lkdGggPSB0aGlzLndpZHRoO1xuICBcbiAgLyoqXG4gICogVW5zY2FsZWQgaGVpZ2h0IG9mIHRoZSBzcHJpdGVcbiAgKiBJZiBubyBpbWFnZXMgb3IgYW5pbWF0aW9ucyBhcmUgc2V0IGl0J3MgdGhlIGhlaWdodCBvZiB0aGUgXG4gICogcGxhY2Vob2xkZXIgcmVjdGFuZ2xlLlxuICAqXG4gICogQHByb3BlcnR5IG9yaWdpbmFsSGVpZ2h0XG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAxMDBcbiAgKi9cbiAgdGhpcy5vcmlnaW5hbEhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICBcbiAgLyoqXG4gICogRmFsc2UgaWYgdGhlIHNwcml0ZSBoYXMgYmVlbiByZW1vdmVkLlxuICAqXG4gICogQHByb3BlcnR5IHJlbW92ZWRcbiAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgKi9cbiAgdGhpcy5yZW1vdmVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICogQ3ljbGVzIGJlZm9yZSBzZWxmIHJlbW92YWwuXG4gICogU2V0IGl0IHRvIGluaXRpYXRlIGEgY291bnRkb3duLCBldmVyeSBkcmF3IGN5Y2xlIHRoZSBwcm9wZXJ0eSBpc1xuICAqIHJlZHVjZWQgYnkgMSB1bml0LiBBdCAwIGl0IHdpbGwgY2FsbCBhIHNwcml0ZS5yZW1vdmUoKVxuICAqIERpc2FibGVkIGlmIHNldCB0byAtMS5cbiAgKiBcbiAgKiBAcHJvcGVydHkgcmVtb3ZlZFxuICAqIEB0eXBlIHtOdW1iZXJ9XG4gICogQGRlZmF1bHQgLTFcbiAgKi9cbiAgdGhpcy5saWZlID0gLTE7XG5cbiAgLyoqXG4gICogSWYgc2V0IHRvIHRydWUsIGRyYXdzIGFuIG91dGxpbmUgb2YgdGhlIGNvbGxpZGVyLCB0aGUgZGVwdGgsIGFuZCBjZW50ZXIuXG4gICogXG4gICogQHByb3BlcnR5IGRlYnVnXG4gICogQHR5cGUge0Jvb2xlYW59XG4gICogQGRlZmF1bHQgZmFsc2VcbiAgKi9cbiAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuXG4gIC8qKlxuICAqIElmIG5vIGltYWdlIG9yIGFuaW1hdGlvbnMgYXJlIHNldCB0aGlzIGlzIGNvbG9yIG9mIHRoZSBcbiAgKiBwbGFjZWhvbGRlciByZWN0YW5nbGVcbiAgKlxuICAqIEBwcm9wZXJ0eSBzaGFwZUNvbG9yXG4gICogQHR5cGUge2NvbG9yfVxuICAqL1xuICB0aGlzLnNoYXBlQ29sb3IgPSBjb2xvcihyYW5kb20oMjU1KSwgcmFuZG9tKDI1NSksIHJhbmRvbSgyNTUpKTtcblxuICAvKipcbiAgKiBHcm91cHMgdGhlIHNwcml0ZSBiZWxvbmdzIHRvLCBpbmNsdWRpbmcgYWxsU3ByaXRlc1xuICAqXG4gICogQHByb3BlcnR5IGdyb3Vwc1xuICAqIEB0eXBlIHtBcnJheX1cbiAgKi9cbiAgdGhpcy5ncm91cHMgPSBuZXcgQXJyYXkoKTtcblxuICB2YXIgYW5pbWF0aW9ucyA9IHt9O1xuXG4gIC8vVGhlIGN1cnJlbnQgYW5pbWF0aW9uJ3MgbGFiZWwuXG4gIHZhciBjdXJyZW50QW5pbWF0aW9uID0gXCJcIjtcblxuICAvKipcbiAgKiBSZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgYW5pbWF0aW9uLlxuICAqXG4gICogQHByb3BlcnR5IGFuaW1hdGlvblxuICAqIEB0eXBlIHtBbmltYXRpb259XG4gICovXG4gIHRoaXMuYW5pbWF0aW9uO1xuXG4gIC8qKlxuICAqIFVwZGF0ZXMgdGhlIHNwcml0ZS5cbiAgKiBDYWxsZWQgYXV0b21hdGljYWxseSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBkcmF3IGN5Y2xlLlxuICAqXG4gICogQG1ldGhvZCB1cGRhdGVcbiAgKi9cbiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgIGlmKCF0aGlzLnJlbW92ZWQpXG4gICAge1xuICAgICAgLy9pZiB0aGVyZSBoYXMgYmVlbiBhIGNoYW5nZSBzb21ld2hlcmUgYWZ0ZXIgdGhlIGxhc3QgdXBkYXRlXG4gICAgICAvL3RoZSBvbGQgcG9zaXRpb24gaXMgdGhlIGxhc3QgcG9zaXRpb24gcmVnaXN0ZXJlZCBpbiB0aGUgdXBkYXRlXG4gICAgICBpZih0aGlzLm5ld1Bvc2l0aW9uICE9IHRoaXMucG9zaXRpb24pXG4gICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IGNyZWF0ZVZlY3Rvcih0aGlzLm5ld1Bvc2l0aW9uLngsIHRoaXMubmV3UG9zaXRpb24ueSk7XG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IGNyZWF0ZVZlY3Rvcih0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XG5cbiAgICAgIHRoaXMudmVsb2NpdHkueCAqPSB0aGlzLmZyaWN0aW9uO1xuICAgICAgdGhpcy52ZWxvY2l0eS55ICo9IHRoaXMuZnJpY3Rpb247XG5cbiAgICAgIGlmKHRoaXMubWF4U3BlZWQgIT0gLTEpXG4gICAgICAgIHRoaXMubGltaXRTcGVlZCh0aGlzLm1heFNwZWVkKTtcblxuICAgICAgaWYodGhpcy5yb3RhdGVUb0RpcmVjdGlvbilcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IHRoaXMuZ2V0RGlyZWN0aW9uKCk7XG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMucm90YXRpb24gKz0gdGhpcy5yb3RhdGlvblNwZWVkO1xuICAgICAgICBcbiAgICAgIHRoaXMucG9zaXRpb24ueCArPSB0aGlzLnZlbG9jaXR5Lng7XG4gICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gdGhpcy52ZWxvY2l0eS55O1xuXG4gICAgICB0aGlzLm5ld1Bvc2l0aW9uID0gY3JlYXRlVmVjdG9yKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcblxuICAgICAgdGhpcy5kZWx0YVggPSB0aGlzLnBvc2l0aW9uLnggLSB0aGlzLnByZXZpb3VzUG9zaXRpb24ueDtcbiAgICAgIHRoaXMuZGVsdGFZID0gdGhpcy5wb3NpdGlvbi55IC0gdGhpcy5wcmV2aW91c1Bvc2l0aW9uLnk7XG5cbiAgICAgIC8vaWYgdGhlcmUgaXMgYW4gYW5pbWF0aW9uIFxuICAgICAgaWYoYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXSAhPSBudWxsKVxuICAgICAge1xuICAgICAgICAvL3VwZGF0ZSBpdFxuICAgICAgICBhbmltYXRpb25zW2N1cnJlbnRBbmltYXRpb25dLnVwZGF0ZSgpO1xuICAgICAgIFxuICAgICAgICAvL2hhcyBhbiBhbmltYXRpb24gYnV0IHRoZSBjb2xsaWRlciBpcyBzdGlsbCBkZWZhdWx0XG4gICAgICAgIC8vdGhlIGFuaW1hdGlvbiB3YXNuJ3QgbG9hZGVkLiBpZiB0aGUgYW5pbWF0aW9uIGlzIG5vdCBhIDF4MSBpbWFnZVxuICAgICAgICAvL2l0IG1lYW5zIGl0IGp1c3QgZmluaXNoZWQgbG9hZGluZ1xuICAgICAgICBpZih0aGlzLmNvbGxpZGVyVHlwZT09XCJkZWZhdWx0XCIgJiYgXG4gICAgICAgICAgYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXS5nZXRXaWR0aCgpIT0xICYmXG4gICAgICAgICAgIGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0uZ2V0SGVpZ2h0KCkhPTFcbiAgICAgICAgICApXG4gICAgICAgIHtcbiAgICAgICAgdGhpcy5jb2xsaWRlciA9IHRoaXMuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgdGhpcy5jb2xsaWRlclR5cGUgPSBcImltYWdlXCI7XG4gICAgICAgIHRoaXMud2lkdGggPSBhbmltYXRpb25zW2N1cnJlbnRBbmltYXRpb25dLmdldFdpZHRoKCkqYWJzKHRoaXMuc2NhbGUpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0uZ2V0SGVpZ2h0KCkqYWJzKHRoaXMuc2NhbGUpO1xuICAgICAgICAvL3F1YWRUcmVlLmluc2VydCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy91cGRhdGUgc2l6ZSBhbmQgY29sbGlkZXJcbiAgICAgICAgaWYoYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXS5mcmFtZUNoYW5nZWQgfHwgdGhpcy53aWR0aCA9PSB1bmRlZmluZWQgfHwgdGhpcy5oZWlnaHQgPT0gdW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgIC8vdGhpcy5jb2xsaWRlciA9IHRoaXMuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgdGhpcy53aWR0aCA9IGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0uZ2V0V2lkdGgoKSphYnModGhpcy5zY2FsZSk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXS5nZXRIZWlnaHQoKSphYnModGhpcy5zY2FsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy9hIGNvbGxpZGVyIGlzIGNyZWF0ZWQgZWl0aGVyIG1hbnVhbGx5IHdpdGggc2V0Q29sbGlkZXIgb3IgXG4gICAgICAvL3doZW4gSSBjaGVjayB0aGlzIHNwcml0ZSBmb3IgY29sbGlzaW9ucyBvciBvdmVybGFwc1xuICAgICAgaWYodGhpcy5jb2xsaWRlciAhPSBudWxsKVxuICAgICAge1xuICAgICAgICBpZih0aGlzLmNvbGxpZGVyIGluc3RhbmNlb2YgQUFCQilcbiAgICAgICAge1xuICAgICAgICAvL3NjYWxlIC8gcm90YXRlIGNvbGxpZGVyXG4gICAgICAgIHZhciB0ID0gcmFkaWFucyh0aGlzLnJvdGF0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIGlmKHRoaXMuY29sbGlkZXJUeXBlID09IFwiY3VzdG9tXCIpXG4gICAgICAgICAge1xuICAgICAgICAgIHRoaXMuY29sbGlkZXIuZXh0ZW50cy54ID0gdGhpcy5jb2xsaWRlci5vcmlnaW5hbEV4dGVudHMueCAqIGFicyh0aGlzLnNjYWxlKSAqIGFicyhjb3ModCkpICtcbiAgICAgICAgICB0aGlzLmNvbGxpZGVyLm9yaWdpbmFsRXh0ZW50cy55ICogYWJzKHRoaXMuc2NhbGUpICogYWJzKHNpbih0KSlcblxuICAgICAgICAgIHRoaXMuY29sbGlkZXIuZXh0ZW50cy55ID0gdGhpcy5jb2xsaWRlci5vcmlnaW5hbEV4dGVudHMueCAqIGFicyh0aGlzLnNjYWxlKSAqIGFicyhzaW4odCkpICtcbiAgICAgICAgICB0aGlzLmNvbGxpZGVyLm9yaWdpbmFsRXh0ZW50cy55ICogYWJzKHRoaXMuc2NhbGUpICogYWJzKGNvcyh0KSk7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMuY29sbGlkZXJUeXBlID09IFwiZGVmYXVsdFwiKVxuICAgICAgICAgIHtcbiAgICAgICAgICB0aGlzLmNvbGxpZGVyLmV4dGVudHMueCA9IHRoaXMub3JpZ2luYWxXaWR0aCAqIGFicyh0aGlzLnNjYWxlKSAqIGFicyhjb3ModCkpICtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsSGVpZ2h0ICogYWJzKHRoaXMuc2NhbGUpICogYWJzKHNpbih0KSlcbiAgICAgICAgICB0aGlzLmNvbGxpZGVyLmV4dGVudHMueSA9IHRoaXMub3JpZ2luYWxXaWR0aCAqIGFicyh0aGlzLnNjYWxlKSAqIGFicyhzaW4odCkpICtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsSGVpZ2h0ICogYWJzKHRoaXMuc2NhbGUpICogYWJzKGNvcyh0KSk7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMuY29sbGlkZXJUeXBlID09IFwiaW1hZ2VcIilcbiAgICAgICAgICB7XG4gICAgICAgICAgdGhpcy5jb2xsaWRlci5leHRlbnRzLnggPSB0aGlzLndpZHRoICogYWJzKGNvcyh0KSkgK1xuICAgICAgICAgIHRoaXMuaGVpZ2h0ICogYWJzKHNpbih0KSlcblxuICAgICAgICAgIHRoaXMuY29sbGlkZXIuZXh0ZW50cy55ID0gdGhpcy53aWR0aCAqIGFicyhzaW4odCkpICtcbiAgICAgICAgICB0aGlzLmhlaWdodCAgKiBhYnMoY29zKHQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKHRoaXMuY29sbGlkZXIgaW5zdGFuY2VvZiBDaXJjbGVDb2xsaWRlcilcbiAgICAgICAge1xuICAgICAgICAvL3ByaW50KHRoaXMuc2NhbGUpO1xuICAgICAgICB0aGlzLmNvbGxpZGVyLnJhZGl1cyA9IHRoaXMuY29sbGlkZXIub3JpZ2luYWxSYWRpdXMgKiBhYnModGhpcy5zY2FsZSk7XG4gICAgICAgIH1cblxuICAgICAgfS8vZW5kIGNvbGxpZGVyICE9IG51bGxcblxuICAgICAgLy9tb3VzZSBhY3Rpb25zXG4gICAgICBpZiAodGhpcy5tb3VzZUFjdGl2ZSlcbiAgICAgIHtcbiAgICAgICAgLy9pZiBubyBjb2xsaWRlciBzZXQgaXRcbiAgICAgICAgICBpZih0aGlzLmNvbGxpZGVyPT1udWxsKSBcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdENvbGxpZGVyKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1vdXNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgICBlbHNlXG4gICAgICB7XG4gICAgICAgIGlmKHR5cGVvZih0aGlzLm9uTW91c2VPdmVyKSA9PT0gXCJmdW5jdGlvblwiIFxuICAgICAgICAgICB8fCB0eXBlb2YodGhpcy5vbk1vdXNlT3V0KSA9PT0gXCJmdW5jdGlvblwiIFxuICAgICAgICAgICB8fCB0eXBlb2YodGhpcy5vbk1vdXNlUHJlc3NlZCkgPT09IFwiZnVuY3Rpb25cIiBcbiAgICAgICAgICAgfHwgdHlwZW9mKHRoaXMub25Nb3VzZVJlbGVhc2VkKSA9PT0gXCJmdW5jdGlvblwiIClcbiAgICAgICAge1xuICAgICAgICAgIC8vaWYgYSBtb3VzZSBmdW5jdGlvbiBpcyBzZXQgXG4gICAgICAgICAgLy9pdCdzIGltcGxpZWQgd2Ugd2FudCB0byBoYXZlIGl0IG1vdXNlIGFjdGl2ZSBzb1xuICAgICAgICAgIC8vd2UgZG8gdGhpcyBhdXRvbWF0aWNhbGx5XG4gICAgICAgICAgdGhpcy5tb3VzZUFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAvL2lmIG5vIGNvbGxpZGVyIHNldCBpdFxuICAgICAgICAgIGlmKHRoaXMuY29sbGlkZXI9PW51bGwpIFxuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0Q29sbGlkZXIoKTtcblxuICAgICAgICAgIHRoaXMubW91c2VVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvL3NlbGYgZGVzdHJ1Y3Rpb24gY291bnRkb3duXG4gICAgICBpZiAodGhpcy5saWZlPjApXG4gICAgICAgIHRoaXMubGlmZS0tO1xuICAgICAgaWYgKHRoaXMubGlmZSA9PT0gMClcbiAgICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9XG4gIH07Ly9lbmQgdXBkYXRlXG5cbiAgLyoqXG4gICogQ3JlYXRlcyBhIGRlZmF1bHQgY29sbGlkZXIgbWF0Y2hpbmcgdGhlIHNpemUgb2YgdGhlXG4gICogcGxhY2Vob2xkZXIgcmVjdGFuZ2xlIG9yIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIGltYWdlLlxuICAqL1xuICB0aGlzLnNldERlZmF1bHRDb2xsaWRlciA9IGZ1bmN0aW9uKCkge1xuICAgIFxuICAgIC8vaWYgaGFzIGFuaW1hdGlvbiBnZXQgdGhlIGFuaW1hdGlvbiBib3VuZGluZyBib3hcbiAgICAvL3dvcmtpbmcgb25seSBmb3IgcHJlbG9hZGVkIGltYWdlc1xuICAgIGlmKGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0gIT0gbnVsbCAmJiAoYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXS5nZXRXaWR0aCgpICE9IDEgJiYgYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXS5nZXRIZWlnaHQoKSE9MSkpXG4gICAge1xuICAgICAgdGhpcy5jb2xsaWRlciA9IHRoaXMuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgIHRoaXMud2lkdGggPSBhbmltYXRpb25zW2N1cnJlbnRBbmltYXRpb25dLmdldFdpZHRoKCkqYWJzKHRoaXMuc2NhbGUpO1xuICAgICAgdGhpcy5oZWlnaHQgPSBhbmltYXRpb25zW2N1cnJlbnRBbmltYXRpb25dLmdldEhlaWdodCgpKmFicyh0aGlzLnNjYWxlKTtcbiAgICAgIC8vcXVhZFRyZWUuaW5zZXJ0KHRoaXMpO1xuICAgICAgdGhpcy5jb2xsaWRlclR5cGUgPSBcImltYWdlXCI7XG4gICAgICAvL3ByaW50KFwiSU1BR0UgQ09MTElERVIgQURERURcIik7XG4gICAgfVxuICAgIGVsc2UgaWYoYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXSAhPSBudWxsICYmIGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0uZ2V0V2lkdGgoKSA9PSAxICYmIGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0uZ2V0SGVpZ2h0KCk9PTEpXG4gICAge1xuICAgIC8vYW5pbWF0aW9uIGlzIHN0aWxsIGxvYWRpbmcgXG4gICAgLy9wcmludChcIndhaXRcIik7XG4gICAgfVxuICAgIGVsc2UgLy9nZXQgdGhlIHdpdGggYW5kIGhlaWdodCBkZWZpbmVkIGF0IHRoZSBjcmVhdGlvblxuICAgIHtcbiAgICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgQUFCQih0aGlzLnBvc2l0aW9uLCBjcmVhdGVWZWN0b3IodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpKTtcbiAgICAgIC8vcXVhZFRyZWUuaW5zZXJ0KHRoaXMpO1xuICAgICAgdGhpcy5jb2xsaWRlclR5cGUgPSBcImRlZmF1bHRcIjtcbiAgICB9XG4gICAgXG4gICAgcXVhZFRyZWUuaW5zZXJ0KHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAqIFVwZGF0ZXMgdGhlIHNwcml0ZSBtb3VzZSBzdGF0ZXMgYW5kIHRyaWdnZXJzIHRoZSBtb3VzZSBldmVudHM6XG4gICogb25Nb3VzZU92ZXIsIG9uTW91c2VPdXQsIG9uTW91c2VQcmVzc2VkLCBvbk1vdXNlUmVsZWFzZWRcbiAgKi9cbiAgdGhpcy5tb3VzZVVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIG1vdXNlV2FzT3ZlciA9IHRoaXMubW91c2VJc092ZXI7XG4gICAgdmFyIG1vdXNlV2FzUHJlc3NlZCA9IHRoaXMubW91c2VJc1ByZXNzZWQ7XG5cbiAgICB0aGlzLm1vdXNlSXNPdmVyID0gZmFsc2U7XG4gICAgdGhpcy5tb3VzZUlzUHJlc3NlZCA9IGZhbHNlO1xuXG4gICAgdmFyIG1vdXNlUG9zaXRpb247XG5cbiAgICBpZihjYW1lcmEuYWN0aXZlKVxuICAgICAgbW91c2VQb3NpdGlvbiA9IGNyZWF0ZVZlY3RvcihjYW1lcmEubW91c2VYLCBjYW1lcmEubW91c2VZKTtcbiAgICBlbHNlXG4gICAgICBtb3VzZVBvc2l0aW9uID0gY3JlYXRlVmVjdG9yKG1vdXNlWCwgbW91c2VZKVxuXG4gICAgICAvL3JvbGxvdmVyXG4gICAgICBpZih0aGlzLmNvbGxpZGVyICE9IG51bGwpXG4gICAgICB7XG5cbiAgICAgICAgaWYgKHRoaXMuY29sbGlkZXIgaW5zdGFuY2VvZiBDaXJjbGVDb2xsaWRlcilcbiAgICAgICAge1xuICAgICAgICAgIGlmIChkaXN0KG1vdXNlUG9zaXRpb24ueCwgbW91c2VQb3NpdGlvbi55LCB0aGlzLmNvbGxpZGVyLmNlbnRlci54LCB0aGlzLmNvbGxpZGVyLmNlbnRlci55KSA8IHRoaXMuY29sbGlkZXIucmFkaXVzKVxuICAgICAgICAgICAgdGhpcy5tb3VzZUlzT3ZlciA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsaWRlciBpbnN0YW5jZW9mIEFBQkIpXG4gICAgICAgIHtcbiAgICAgICAgICBpZiAoICBtb3VzZVBvc2l0aW9uLnggPiB0aGlzLmNvbGxpZGVyLmxlZnQoKSBcbiAgICAgICAgICAgICAgJiYgbW91c2VQb3NpdGlvbi55ID4gdGhpcy5jb2xsaWRlci50b3AoKSBcbiAgICAgICAgICAgICAgJiYgbW91c2VQb3NpdGlvbi54IDwgdGhpcy5jb2xsaWRlci5yaWdodCgpXG4gICAgICAgICAgICAgICYmIG1vdXNlUG9zaXRpb24ueSA8IHRoaXMuY29sbGlkZXIuYm90dG9tKCkgKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VJc092ZXIgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vZ2xvYmFsIHA1IHZhclxuICAgICAgICBpZih0aGlzLm1vdXNlSXNPdmVyICYmIG1vdXNlSXNQcmVzc2VkKVxuICAgICAgICAgIHRoaXMubW91c2VJc1ByZXNzZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vZXZlbnQgY2hhbmdlIC0gY2FsbCBmdW5jdGlvbnNcbiAgICAgICAgaWYoIW1vdXNlV2FzT3ZlciAmJiB0aGlzLm1vdXNlSXNPdmVyICYmIHRoaXMub25Nb3VzZU92ZXIgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgIGlmKHR5cGVvZih0aGlzLm9uTW91c2VPdmVyKSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGhpcy5vbk1vdXNlT3Zlci5jYWxsKHRoaXMsdGhpcyk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgcHJpbnQoXCJXYXJuaW5nOiBvbk1vdXNlT3ZlciBzaG91bGQgYmUgYSBmdW5jdGlvblwiKTtcblxuICAgICAgICBpZihtb3VzZVdhc092ZXIgJiYgIXRoaXMubW91c2VJc092ZXIgJiYgdGhpcy5vbk1vdXNlT3V0ICE9IHVuZGVmaW5lZClcbiAgICAgICAgICBpZih0eXBlb2YodGhpcy5vbk1vdXNlT3V0KSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGhpcy5vbk1vdXNlT3V0LmNhbGwodGhpcyx0aGlzKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBwcmludChcIldhcm5pbmc6IG9uTW91c2VPdXQgc2hvdWxkIGJlIGEgZnVuY3Rpb25cIik7XG5cbiAgICAgICAgaWYoIW1vdXNlV2FzUHJlc3NlZCAmJiB0aGlzLm1vdXNlSXNQcmVzc2VkICYmIHRoaXMub25Nb3VzZVByZXNzZWQgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgIGlmKHR5cGVvZih0aGlzLm9uTW91c2VQcmVzc2VkKSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGhpcy5vbk1vdXNlUHJlc3NlZC5jYWxsKHRoaXMsdGhpcyk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgcHJpbnQoXCJXYXJuaW5nOiBvbk1vdXNlUHJlc3NlZCBzaG91bGQgYmUgYSBmdW5jdGlvblwiKTtcblxuICAgICAgICBpZihtb3VzZVdhc1ByZXNzZWQgJiYgIXRoaXMubW91c2VJc1ByZXNzZWQgJiYgdGhpcy5vbk1vdXNlUmVsZWFzZWQgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgIGlmKHR5cGVvZih0aGlzLm9uTW91c2VSZWxlYXNlZCkgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZVJlbGVhc2VkLmNhbGwodGhpcyx0aGlzKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBwcmludChcIldhcm5pbmc6IG9uTW91c2VSZWxlYXNlZCBzaG91bGQgYmUgYSBmdW5jdGlvblwiKTtcblxuICAgICAgfVxuXG4gIH07XG5cbiAgLyoqXG4gICogU2V0cyBhIGNvbGxpZGVyIGZvciB0aGUgc3ByaXRlLlxuICAqIFxuICAqIEluIHA1LnBsYXkgYSBDb2xsaWRlciBpcyBhbiBpbnZpc2libGUgY2lyY2xlIG9yIHJlY3RhbmdsZVxuICAqIHRoYXQgY2FuIGhhdmUgYW55IHNpemUgb3IgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHNwcml0ZSBhbmQgd2hpY2hcbiAgKiB3aWxsIGJlIHVzZWQgdG8gZGV0ZWN0IGNvbGxpc2lvbnMgYW5kIG92ZXJsYXBwaW5nIHdpdGggb3RoZXIgc3ByaXRlcyxcbiAgKiBvciB0aGUgbW91c2UgY3Vyc29yLlxuICAqXG4gICogSWYgdGhlIHNwcml0ZSBpcyBjaGVja2VkIGZvciBjb2xsaXNpb24sIGJvdW5jZSwgb3ZlcmxhcHBpbmcgb3IgbW91c2UgZXZlbnRzIGFcbiAgKiBjb2xsaWRlciBpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgZnJvbSB0aGUgd2lkdGggYW5kIGhlaWdodCBwYXJhbWV0ZXIgcGFzc2VkIGF0IHRoZVxuICAqIGNyZWF0aW9uIG9mIHRoZSBzcHJpdGUgb3IgdGhlIGZyb20gdGhlIGltYWdlIGRpbWVuc2lvbiBpbiBjYXNlIG9mIGFuaW1hdGUgc3ByaXRlcy5cbiAgKlxuICAqIE9mdGVuIHRoZSBpbWFnZSBib3VuZGluZyBib3ggaXMgbm90IGFwcHJvcHJpYXRlIGFzIGFjdGl2ZSBhcmVhIGZvclxuICAqIGEgY29sbGlzaW9uIGRldGVjdGlvbiBzbyB5b3UgY2FuIHNldCBhIGNpcmN1bGFyIG9yIHJlY3Rhbmd1bGFyIHNwcml0ZSB3aXRoIGRpZmZlcmVudFxuICAqIGRpbWVuc2lvbnMgYW5kIG9mZnNldCBmcm9tIHRoZSBzcHJpdGUncyBjZW50ZXIuXG4gICogXG4gICogc2V0Q29sbGlkZXJcbiAgKiBAbWV0aG9kIHNldENvbGxpZGVyXG4gICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgRWl0aGVyIFwicmVjdGFuZ2xlXCIgb3IgXCJjaXJjbGVcIlxuICAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXRYIENvbGxpZGVyIHggcG9zaXRpb24gZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBzcHJpdGVcbiAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0WSBDb2xsaWRlciB5IHBvc2l0aW9uIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgc3ByaXRlXG4gICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIENvbGxpZGVyIHdpZHRoIG9yIHJhZGl1c1xuICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQgQ29sbGlkZXIgaGVpZ2h0XG4gICogXG4gICovXG4gIHRoaXMuc2V0Q29sbGlkZXIgPSBmdW5jdGlvbih0eXBlLCBvZmZzZXRYLCBvZmZzZXRZLCB3aWR0aCwgaGVpZ2h0KSB7XG4gIFxuICB0aGlzLmNvbGxpZGVyVHlwZSA9IFwiY3VzdG9tXCI7XG4gIFxuICAgIGlmKHR5cGU9PVwicmVjdGFuZ2xlXCIgJiYgYXJndW1lbnRzLmxlbmd0aD09NSlcbiAgICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgQUFCQih0aGlzLnBvc2l0aW9uLCBjcmVhdGVWZWN0b3IoYXJndW1lbnRzWzNdLCBhcmd1bWVudHNbNF0pLCBjcmVhdGVWZWN0b3IoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSkgKTtcbiAgICBlbHNlIGlmKHR5cGU9PVwiY2lyY2xlXCIpXG4gICAge1xuICAgICAgdmFyIHYgPSBjcmVhdGVWZWN0b3IoYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pXG4gICAgICBcbiAgICAgIGlmKGFyZ3VtZW50cy5sZW5ndGghPTQpXG4gICAgICAgIHByaW50KFwiV2FybmluZzogdXNhZ2Ugc2V0Q29sbGlkZXIoXFxcImNpcmNsZVxcXCIsIG9mZnNldFgsIG9mZnNldFksIHJhZGl1cylcIik7IFxuICAgIFxuICAgICAgICB0aGlzLmNvbGxpZGVyID0gbmV3IENpcmNsZUNvbGxpZGVyKHRoaXMucG9zaXRpb24sICBhcmd1bWVudHNbM10sIGNyZWF0ZVZlY3Rvcihhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSkpO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBxdWFkVHJlZS5pbnNlcnQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgKiBSZXR1cm5zIGEgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgY3VycmVudCBpbWFnZVxuICAqL1xuICB0aGlzLmdldEJvdW5kaW5nQm94ID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgdyA9IGFuaW1hdGlvbnNbY3VycmVudEFuaW1hdGlvbl0uZ2V0V2lkdGgoKSphYnModGhpcy5zY2FsZSk7XG4gICAgdmFyIGggPSBhbmltYXRpb25zW2N1cnJlbnRBbmltYXRpb25dLmdldEhlaWdodCgpKmFicyh0aGlzLnNjYWxlKTtcblxuICAgIC8vaWYgdGhlIGJvdW5kaW5nIGJveCBpcyAxeDEgdGhlIGltYWdlIGlzIG5vdCBsb2FkZWRcbiAgICAvL3BvdGVudGlhbCBpc3N1ZSB3aXRoIGFjdHVhbCAxeDEgaW1hZ2VzXG4gICAgaWYodyA9PT0gMSAmJiBoID09PSAxKSB7XG4gICAgICAvL25vdCBsb2FkZWQgeWV0XG4gICAgICByZXR1cm4gbmV3IEFBQkIodGhpcy5wb3NpdGlvbiwgY3JlYXRlVmVjdG9yKHcsIGgpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IEFBQkIodGhpcy5wb3NpdGlvbiwgY3JlYXRlVmVjdG9yKHcsIGgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBTZXRzIHRoZSBzcHJpdGUncyBob3Jpem9udGFsIG1pcnJvcmluZy5cbiAgKiBJZiAxIHRoZSBpbWFnZXMgZGlzcGxheWVkIG5vcm1hbGx5XG4gICogSWYgLTEgdGhlIGltYWdlcyBhcmUgZmxpcHBlZCBob3Jpem9udGFsbHlcbiAgKiBJZiBubyBhcmd1bWVudCByZXR1cm5zIHRoZSBjdXJyZW50IHggbWlycm9yaW5nXG4gICpcbiAgKiBAbWV0aG9kIG1pcnJvclhcbiAgKiBAcGFyYW0ge051bWJlcn0gZGlyIEVpdGhlciAxIG9yIC0xXG4gICogQHJldHVybnMge051bWJlcn0gQ3VycmVudCBtaXJyb3JpbmcgaWYgbm8gcGFyYW1ldGVyIGlzIHNwZWNpZmllZFxuICAqL1xuICB0aGlzLm1pcnJvclggPSBmdW5jdGlvbihkaXIpIHtcbiAgICBpZihkaXIgPT0gMSB8fCBkaXIgPT0gLTEpXG4gICAgICBkaXJYID0gZGlyO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBkaXJYO1xuICB9XG5cbiAgLyoqXG4gICogU2V0cyB0aGUgc3ByaXRlJ3MgdmVydGljYWwgbWlycm9yaW5nLlxuICAqIElmIDEgdGhlIGltYWdlcyBkaXNwbGF5ZWQgbm9ybWFsbHlcbiAgKiBJZiAtMSB0aGUgaW1hZ2VzIGFyZSBmbGlwcGVkIHZlcnRpY2FsbHlcbiAgKiBJZiBubyBhcmd1bWVudCByZXR1cm5zIHRoZSBjdXJyZW50IHkgbWlycm9yaW5nXG4gICpcbiAgKiBAbWV0aG9kIG1pcnJvcllcbiAgKiBAcGFyYW0ge051bWJlcn0gZGlyIEVpdGhlciAxIG9yIC0xXG4gICogQHJldHVybnMge051bWJlcn0gQ3VycmVudCBtaXJyb3JpbmcgaWYgbm8gcGFyYW1ldGVyIGlzIHNwZWNpZmllZFxuICAqL1xuICB0aGlzLm1pcnJvclkgPSBmdW5jdGlvbihkaXIpIHtcbiAgICBpZihkaXIgPT0gMSB8fCBkaXIgPT0gLTEpXG4gICAgICBkaXJZID0gZGlyO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBkaXJZO1xuICB9XG5cblxuICAvKipcbiAgICogUmVzaXplIGltYWdlcyB0byBjdXN0b20gZGltZW5zaW9uc1xuICAgKi9cbiAgLy8gdGhpcy5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KXtcbiAgLy8gICB0aGlzLnJlc2l6ZVggPSB3aWR0aDtcbiAgLy8gICB0aGlzLnJlc2l6ZVkgPSBoZWlnaHQ7XG4gIC8vIH1cblxuICAvKipcbiAgKiBNYW5hZ2VzIHRoZSBwb3NpdGlvbmluZywgc2NhbGUgYW5kIHJvdGF0aW9uIG9mIHRoZSBzcHJpdGVcbiAgKiBDYWxsZWQgYXV0b21hdGljYWxseSwgaXQgc2hvdWxkIG5vdCBiZSBvdmVycmlkZGVuXG4gICovXG4gIHRoaXMuZGlzcGxheSA9IGZ1bmN0aW9uKClcbiAge1xuICAgIGlmICh0aGlzLnZpc2libGUgJiYgIXRoaXMucmVtb3ZlZClcbiAgICB7XG4gICAgICBwdXNoKCk7XG4gICAgICBjb2xvck1vZGUoUkdCKTtcblxuICAgICAgbm9TdHJva2UoKTtcbiAgICAgIHJlY3RNb2RlKENFTlRFUik7XG4gICAgICBlbGxpcHNlTW9kZShDRU5URVIpO1xuICAgICAgaW1hZ2VNb2RlKENFTlRFUik7XG5cbiAgICAgIC8vIFVzZSBuZXcgcmVzaXplIGZ1bmN0aW9uXG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICAgIC8vIGlmKHRoaXMucmVzaXplWCAmJiB0aGlzLnJlc2l6ZVkpe1xuICAgICAgLy8gICAvLyBUbyBhdm9pZCBjb2xsaXNpb25zIGJldHdlZW4gcmVzaXplIGFuZCBzY2FsZSwgcmVzZXQgc2NhbGUgdG8gMSB3aGVuZXZlciByZXNpemUgaXMgdXNlZFxuICAgICAgLy8gICB0aGlzLnNjYWxlID0gMTtcbiAgICAgIC8vICAgdGhpcy5hbmltYXRpb24uaW1hZ2VzWyB0aGlzLmFuaW1hdGlvbi5nZXRGcmFtZSgpIF0ucmVzaXplKHRoaXMucmVzaXplWCwgdGhpcy5yZXNpemVZKTsgIFxuICAgICAgLy8gfVxuICAgICAgXG4gICAgICB0cmFuc2xhdGUodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnkpO1xuICAgICAgc2NhbGUodGhpcy5zY2FsZSpkaXJYLCB0aGlzLnNjYWxlKmRpclkpO1xuICAgICAgcm90YXRlKHJhZGlhbnModGhpcy5yb3RhdGlvbikpO1xuICAgIFxuICAgICAgLy8gT3ZlcnJpZGUgaW1hZ2UgZGVmYXVsdCBjb2xvciBhbmQgdGludCB0aGUgb3V0cHV0XG4gICAgICAvLyB0aW50KHRoaXMuc2hhcGVDb2xvcik7XG4gICAgICBcbiAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgLy9kcmF3IGRlYnVnIGluZm9cbiAgICAgIHBvcCgpO1xuXG5cbiAgICAgIGlmKHRoaXMuZGVidWcpXG4gICAgICB7XG4gICAgICAgIC8vZHJhdyB0aGUgYW5jaG9yIHBvaW50XG4gICAgICAgIHN0cm9rZSgwLDI1NSwwKTtcbiAgICAgICAgbGluZSh0aGlzLnBvc2l0aW9uLngtMTAsIHRoaXMucG9zaXRpb24ueSwgdGhpcy5wb3NpdGlvbi54KzEwLCB0aGlzLnBvc2l0aW9uLnkpO1xuICAgICAgICBsaW5lKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LTEwLCB0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSsxMCk7XG4gICAgICAgIG5vRmlsbCgpO1xuXG4gICAgICAgIC8vZGVwdGggbnVtYmVyXG4gICAgICAgIG5vU3Ryb2tlKCk7XG4gICAgICAgIGZpbGwoMCwyNTUsMCk7XG4gICAgICAgIHRleHRBbGlnbihMRUZULCBCT1RUT00pO1xuICAgICAgICB0ZXh0U2l6ZSgxNik7XG4gICAgICAgIHRleHQodGhpcy5kZXB0aCtcIlwiLCB0aGlzLnBvc2l0aW9uLngrNCwgdGhpcy5wb3NpdGlvbi55LTIpO1xuXG4gICAgICAgIG5vRmlsbCgpO1xuICAgICAgICBzdHJva2UoMCwyNTUsMCk7XG5cbiAgICAgICAgLy9ib3VuZGluZyBib3hcbiAgICAgICAgaWYodGhpcy5jb2xsaWRlciE9dW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5jb2xsaWRlci5kcmF3KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICogTWFuYWdlcyB0aGUgdmlzdWFscyBvZiB0aGUgc3ByaXRlLlxuICAqIEl0IGNhbiBiZSBvdmVycmlkZGVuIHdpdGggYSBjdXN0b20gZHJhd2luZyBmdW5jdGlvbi4gXG4gICogVGhlIDAsMCBwb2ludCB3aWxsIGJlIHRoZSBjZW50ZXIgb2YgdGhlIHNwcml0ZS5cbiAgKiBFeGFtcGxlOlxuICAqIHNwcml0ZS5kcmF3ID0gZnVuY3Rpb24oKSB7IGVsbGlwc2UoMCwwLDEwLDEwKSB9XG4gICogV2lsbCBkaXNwbGF5IHRoZSBzcHJpdGUgYXMgY2lyY2xlLlxuICAqXG4gICogQG1ldGhvZCBkcmF3XG4gICovXG4gIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKClcbiAge1xuICAgIGlmKGN1cnJlbnRBbmltYXRpb24gIT0gXCJcIiAmJiBhbmltYXRpb25zICE9IG51bGwpXG4gICAge1xuICAgICAgaWYoYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXSAhPSBudWxsKVxuICAgICAgICBhbmltYXRpb25zW2N1cnJlbnRBbmltYXRpb25dLmRyYXcoMCwwLDApO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgbm9TdHJva2UoKTtcbiAgICAgIGZpbGwodGhpcy5zaGFwZUNvbG9yKTtcbiAgICAgIHJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBTcHJpdGUgZnJvbSB0aGUgc2tldGNoLiBcbiAgICogVGhlIHJlbW92ZWQgU3ByaXRlIHdvbid0IGJlIGRyYXduIG9yIHVwZGF0ZWQgYW55bW9yZS5cbiAgICpcbiAgICogQG1ldGhvZCByZW1vdmVcbiAgICovXG4gIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVkID0gdHJ1ZTtcblxuICAgIHF1YWRUcmVlLnJlbW92ZU9iamVjdCh0aGlzKTtcblxuICAgIC8vd2hlbiByZW1vdmVkIGZyb20gdGhlIFwic2NlbmVcIiBhbHNvIHJlbW92ZSBhbGwgdGhlIHJlZmVyZW5jZXMgaW4gYWxsIHRoZSBncm91cHNcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmdyb3Vwcy5sZW5ndGg7IGkrKylcbiAgICB7XG4gICAgICB0aGlzLmdyb3Vwc1tpXS5yZW1vdmUodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogU2V0cyB0aGUgdmVsb2NpdHkgdmVjdG9yLlxuICAqXG4gICogQG1ldGhvZCBzZXRWZWxvY2l0eVxuICAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gICogQHBhcmFtIHtOdW1iZXJ9IHggWSBjb21wb25lbnRcbiAgKi9cbiAgdGhpcy5zZXRWZWxvY2l0eSA9IGZ1bmN0aW9uKHgseSkge1xuICAgIHRoaXMudmVsb2NpdHkueCA9IHg7XG4gICAgdGhpcy52ZWxvY2l0eS55ID0geTtcbiAgfVxuXG4gIC8qKlxuICAqIENhbGN1bGF0ZXMgdGhlIHNjYWxhciBzcGVlZC5cbiAgKlxuICAqIEBtZXRob2Qgc2V0VmVsb2NpdHlcbiAgKiBAcmV0dXJuIHtOdW1iZXJ9IFNjYWxhciBzcGVlZFxuICAqL1xuICB0aGlzLmdldFNwZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmVsb2NpdHkubWFnKCk7XG4gIH1cblxuICAvKipcbiAgKiBDYWxjdWxhdGVzIHRoZSBtb3ZlbWVudCdzIGRpcmVjdGlvbiBpbiBkZWdyZWVzLlxuICAqXG4gICogQG1ldGhvZCBnZXREaXJlY3Rpb25cbiAgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuZ2xlIGluIGRlZ3JlZXNcbiAgKi9cbiAgdGhpcy5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBkaXJlY3Rpb24gPSBhdGFuMih0aGlzLnZlbG9jaXR5LnksIHRoaXMudmVsb2NpdHkueCk7XG5cbiAgICBpZihpc05hTihkaXJlY3Rpb24pKVxuICAgICAgZGlyZWN0aW9uID0gMDtcbiAgICByZXR1cm4gZGVncmVlcyhkaXJlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICogQWRkcyB0aGUgc3ByaXRlIHRvIGFuIGV4aXN0aW5nIGdyb3VwXG4gICpcbiAgKiBAbWV0aG9kIGFkZFRvR3JvdXBcbiAgKiBAcGFyYW0ge09iamVjdH0gZ3JvdXBcbiAgKi9cbiAgdGhpcy5hZGRUb0dyb3VwID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICBpZihncm91cCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgZ3JvdXAuYWRkKHRoaXMpO1xuICAgIGVsc2VcbiAgICAgIHByaW50KFwiYWRkVG9Hcm91cCBlcnJvcjogXCIrZ3JvdXArXCIgaXMgbm90IGEgZ3JvdXBcIik7XG4gIH1cblxuICAvKipcbiAgKiBMaW1pdHMgdGhlIHNjYWxhciBzcGVlZC5cbiAgKlxuICAqIEBtZXRob2QgbGltaXRTcGVlZFxuICAqIEBwYXJhbSB7TnVtYmVyfSBtYXggTWF4IHNwZWVkOiBwb3NpdGl2ZSBudW1iZXJcbiAgKi8gIFxuICB0aGlzLmxpbWl0U3BlZWQgPSBmdW5jdGlvbihtYXgpIHtcblxuICAgIC8vdXBkYXRlIGxpbmVhciBzcGVlZFxuICAgIHZhciBzcGVlZCA9IHRoaXMuZ2V0U3BlZWQoKTtcblxuICAgIGlmKGFicyhzcGVlZCk+bWF4KVxuICAgIHtcbiAgICAgIC8vZmluZCByZWR1Y3Rpb24gZmFjdG9yXG4gICAgICB2YXIgayA9IG1heC9hYnMoc3BlZWQpO1xuICAgICAgdGhpcy52ZWxvY2l0eS54ICo9IGs7XG4gICAgICB0aGlzLnZlbG9jaXR5LnkgKj0gaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBTZXQgdGhlIHNwZWVkIGFuZCBkaXJlY3Rpb24gb2YgdGhlIHNwcml0ZS5cbiAgKiBUaGUgYWN0aW9uIG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgdmVsb2NpdHkuIFxuICAqXG4gICogQG1ldGhvZCBzZXRTcGVlZFxuICAqIEBwYXJhbSB7TnVtYmVyfSAgc3BlZWQgU2NhbGFyIHNwZWVkIHRvIGFkZFxuICAqIEBwYXJhbSB7TnVtYmVyfSAgYW5nbGUgRGlyZWN0aW9uIGluIGRlZ3JlZXNcbiAgKi9cbiAgdGhpcy5zZXRTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkLCBhbmdsZSkge1xuICAgIHZhciBhID0gcmFkaWFucyhhbmdsZSk7XG4gICAgdGhpcy52ZWxvY2l0eS54ID0gY29zKGEpKnNwZWVkO1xuICAgIHRoaXMudmVsb2NpdHkueSA9IHNpbihhKSpzcGVlZDtcbiAgfVxuICBcbiAgLyoqXG4gICogUHVzaGVzIHRoZSBzcHJpdGUgaW4gYSBkaXJlY3Rpb24gZGVmaW5lZCBieSBhbiBhbmdsZS5cbiAgKiBUaGUgZm9yY2UgaXMgYWRkZWQgdG8gdGhlIGN1cnJlbnQgdmVsb2NpdHkuIFxuICAqXG4gICogQG1ldGhvZCBhZGRTcGVlZFxuICAqIEBwYXJhbSB7TnVtYmVyfSAgc3BlZWQgU2NhbGFyIHNwZWVkIHRvIGFkZFxuICAqIEBwYXJhbSB7TnVtYmVyfSAgYW5nbGUgRGlyZWN0aW9uIGluIGRlZ3JlZXNcbiAgKi9cbiAgdGhpcy5hZGRTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkLCBhbmdsZSkge1xuICAgIHZhciBhID0gcmFkaWFucyhhbmdsZSk7XG4gICAgdGhpcy52ZWxvY2l0eS54ICs9IGNvcyhhKSAqIHNwZWVkO1xuICAgIHRoaXMudmVsb2NpdHkueSArPSBzaW4oYSkgKiBzcGVlZDtcbiAgfVxuXG4gIC8qKlxuICAqIFB1c2hlcyB0aGUgc3ByaXRlIHRvd2FyZCBhIHBvaW50LlxuICAqIFRoZSBmb3JjZSBpcyBhZGRlZCB0byB0aGUgY3VycmVudCB2ZWxvY2l0eS4gXG4gICpcbiAgKiBAbWV0aG9kIGF0dHJhY3Rpb25Qb2ludFxuICAqIEBwYXJhbSB7TnVtYmVyfSAgbWFnbml0dWRlIFNjYWxhciBzcGVlZCB0byBhZGRcbiAgKiBAcGFyYW0ge051bWJlcn0gIHBvaW50WCBEaXJlY3Rpb24geCBjb29yZGluYXRlXG4gICogQHBhcmFtIHtOdW1iZXJ9ICBwb2ludFkgRGlyZWN0aW9uIHkgY29vcmRpbmF0ZVxuICAqL1xuICB0aGlzLmF0dHJhY3Rpb25Qb2ludCA9IGZ1bmN0aW9uKG1hZ25pdHVkZSwgcG9pbnRYLCBwb2ludFkpIHtcbiAgICB2YXIgYW5nbGUgPSBhdGFuMihwb2ludFktdGhpcy5wb3NpdGlvbi55LCBwb2ludFgtdGhpcy5wb3NpdGlvbi54KTtcbiAgICB0aGlzLnZlbG9jaXR5LnggKz0gY29zKGFuZ2xlKSAqIG1hZ25pdHVkZTtcbiAgICB0aGlzLnZlbG9jaXR5LnkgKz0gc2luKGFuZ2xlKSAqIG1hZ25pdHVkZTtcbiAgfVxuXG5cbiAgLyoqXG4gICogQWRkcyBhbiBpbWFnZSB0byB0aGUgc3ByaXRlLlxuICAqIEFuIGltYWdlIHdpbGwgYmUgY29uc2lkZXJlZCBhIG9uZS1mcmFtZSBhbmltYXRpb24uXG4gICogVGhlIGltYWdlIHNob3VsZCBiZSBwcmVsb2FkZWQgaW4gdGhlIHByZWxvYWQoKSBmdW5jdGlvbiB1c2luZyBwNSBsb2FkSW1hZ2UuXG4gICogQW5pbWF0aW9ucyByZXF1aXJlIGEgaWRlbnRpZnlpbmcgbGFiZWwgKHN0cmluZykgdG8gY2hhbmdlIHRoZW0uXG4gICogVGhlIGltYWdlIGlzIHN0b3JlZCBpbiB0aGUgc3ByaXRlIGJ1dCBub3QgbmVjZXNzYXJpbHkgZGlzcGxheWVkXG4gICogdW50aWwgU3ByaXRlLmNoYW5nZUFuaW1hdGlvbihsYWJlbCkgaXMgY2FsbGVkXG4gICogXG4gICogVXNhZ2VzOlxuICAqIC0gc3ByaXRlLmFkZEltYWdlKGxhYmVsLCBpbWFnZSk7XG4gICogLSBzcHJpdGUuYWRkSW1hZ2UoaW1hZ2UpO1xuICAqXG4gICogSWYgb25seSBhbiBpbWFnZSBpcyBwYXNzZWQgbm8gbGFiZWwgaXMgc3BlY2lmaWVkXG4gICogXG4gICogQG1ldGhvZCBhZGRJbWFnZVxuICAqIEBwYXJhbSB7U3RyaW5nfHA1LkltYWdlfSBsYWJlbCBMYWJlbCBvciBpbWFnZVxuICAqIEBwYXJhbSB7cDUuSW1hZ2V9IFtpbWddIEltYWdlXG4gICovXG4gIHRoaXMuYWRkSW1hZ2UgPSBmdW5jdGlvbigpXG4gIHtcbiAgICBpZih0eXBlb2YgYXJndW1lbnRzWzBdID09IFwic3RyaW5nXCIgJiYgYXJndW1lbnRzWzFdIGluc3RhbmNlb2YgcDUuSW1hZ2UpXG4gICAgICB0aGlzLmFkZEFuaW1hdGlvbihhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSk7XG4gICAgZWxzZSBpZihhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBwNS5JbWFnZSlcbiAgICAgIHRoaXMuYWRkQW5pbWF0aW9uKFwibm9ybWFsXCIsIGFyZ3VtZW50c1swXSk7XG4gICAgZWxzZVxuICAgICAgdGhyb3coXCJhZGRJbWFnZSBlcnJvcjogYWxsb3dlZCB1c2FnZXMgYXJlIDxpbWFnZT4gb3IgPGxhYmVsPiwgPGltYWdlPlwiKTtcbiAgfVxuXG4gIC8qKlxuICAqIEFkZHMgYW4gYW5pbWF0aW9uIHRvIHRoZSBzcHJpdGUuXG4gICogVGhlIGFuaW1hdGlvbiBzaG91bGQgYmUgcHJlbG9hZGVkIGluIHRoZSBwcmVsb2FkKCkgZnVuY3Rpb24gXG4gICogdXNpbmcgbG9hZEFuaW1hdGlvbi5cbiAgKiBBbmltYXRpb25zIHJlcXVpcmUgYSBpZGVudGlmeWluZyBsYWJlbCAoc3RyaW5nKSB0byBjaGFuZ2UgdGhlbS5cbiAgKiBBbmltYXRpb25zIGFyZSBzdG9yZWQgaW4gdGhlIHNwcml0ZSBidXQgbm90IG5lY2Vzc2FyaWx5IGRpc3BsYXllZFxuICAqIHVudGlsIFNwcml0ZS5jaGFuZ2VBbmltYXRpb24obGFiZWwpIGlzIGNhbGxlZC5cbiAgKiBcbiAgKiBVc2FnZTpcbiAgKiAtIHNwcml0ZS5hZGRBbmltYXRpb24obGFiZWwsIGFuaW1hdGlvbik7XG4gICpcbiAgKiBBbHRlcm5hdGl2ZSB1c2FnZXMuIFNlZSBBbmltYXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZmlsZSBzZXF1ZW5jZXM6XG4gICogLSBzcHJpdGUuYWRkQW5pbWF0aW9uKGxhYmVsLCBmaXJzdEZyYW1lLCBsYXN0RnJhbWUpO1xuICAqIC0gc3ByaXRlLmFkZEFuaW1hdGlvbihsYWJlbCwgZnJhbWUxLCBmcmFtZTIsIGZyYW1lMy4uLik7XG4gICpcbiAgKiBAbWV0aG9kIGFkZEFuaW1hdGlvblxuICAqIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBBbmltYXRpb24gaWRlbnRpZmllclxuICAqIEBwYXJhbSB7QW5pbWF0aW9ufSBhbmltYXRpb24gVGhlIHByZWxvYWRlZCBhbmltYXRpb25cbiAgKi9cbiAgdGhpcy5hZGRBbmltYXRpb24gPSBmdW5jdGlvbihsYWJlbCwgYW5pbWF0aW9uKVxuICB7XG4gICAgdmFyIGFuaW07XG5cbiAgICBpZih0eXBlb2YgbGFiZWwgIT0gXCJzdHJpbmdcIilcbiAgICB7XG4gICAgICBwcmludChcIlNwcml0ZS5hZGRBbmltYXRpb24gZXJyb3I6IHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgbGFiZWwgKFN0cmluZylcIik7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA8IDIpXG4gICAge1xuICAgICAgcHJpbnQoXCJhZGRBbmltYXRpb24gZXJyb3I6IHlvdSBtdXN0IHNwZWNpZnkgYSBsYWJlbCBhbmQgbiBmcmFtZSBpbWFnZXNcIik7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGVsc2UgaWYoYXJndW1lbnRzWzFdIGluc3RhbmNlb2YgQW5pbWF0aW9uKVxuICAgIHtcblxuICAgICAgdmFyIHNvdXJjZUFuaW1hdGlvbiA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIHZhciBuZXdBbmltYXRpb24gPSBzb3VyY2VBbmltYXRpb24uY2xvbmUoKTtcblxuICAgICAgYW5pbWF0aW9uc1tsYWJlbF0gPSBuZXdBbmltYXRpb247XG5cbiAgICAgIGlmKGN1cnJlbnRBbmltYXRpb24gPT0gXCJcIilcbiAgICAgIHtcbiAgICAgICAgY3VycmVudEFuaW1hdGlvbiA9IGxhYmVsO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IG5ld0FuaW1hdGlvbjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbmV3QW5pbWF0aW9uLmlzU3ByaXRlQW5pbWF0aW9uID0gdHJ1ZTtcblxuICAgICAgcmV0dXJuIG5ld0FuaW1hdGlvbjtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgIHZhciBhbmltRnJhbWVzID0gW107XG4gICAgICBmb3IodmFyIGk9MTsgaTxhcmd1bWVudHMubGVuZ3RoOyBpKyspXG4gICAgICAgIGFuaW1GcmFtZXMucHVzaChhcmd1bWVudHNbaV0pO1xuXG4gICAgICBhbmltID0gY29uc3RydWN0KEFuaW1hdGlvbiwgYW5pbUZyYW1lcyk7XG4gICAgICBhbmltYXRpb25zW2xhYmVsXSA9IGFuaW07XG5cbiAgICAgIGlmKGN1cnJlbnRBbmltYXRpb24gPT0gXCJcIilcbiAgICAgIHtcbiAgICAgICAgY3VycmVudEFuaW1hdGlvbiA9IGxhYmVsO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IGFuaW07XG4gICAgICB9XG4gICAgICBhbmltLmlzU3ByaXRlQW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIHJldHVybiBhbmltO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICogQ2hhbmdlcyB0aGUgZGlzcGxheWVkIGltYWdlL2FuaW1hdGlvbi5cbiAgKiBFcXVpdmFsZW50IHRvIGNoYW5nZUFuaW1hdGlvblxuICAqXG4gICogQG1ldGhvZCBjaGFuZ2VJbWFnZVxuICAqIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBJbWFnZS9BbmltYXRpb24gaWRlbnRpZmllclxuICAqL1xuICB0aGlzLmNoYW5nZUltYWdlID0gZnVuY3Rpb24obGFiZWwpIHtcbiAgICB0aGlzLmNoYW5nZUFuaW1hdGlvbihsYWJlbCk7XG4gIH1cbiAgXG4gICAvKipcbiAgKiBSZXR1cm5zIHRoZSBsYWJlbCBvZiB0aGUgY3VycmVudCBhbmltYXRpb25cbiAgKlxuICAqIEBtZXRob2QgZ2V0QW5pbWF0aW9uTGFiZWxcbiAgKiBAcmV0dXJuIHtTdHJpbmd9IGxhYmVsIEltYWdlL0FuaW1hdGlvbiBpZGVudGlmaWVyXG4gICovXG4gIHRoaXMuZ2V0QW5pbWF0aW9uTGFiZWwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY3VycmVudEFuaW1hdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAqIENoYW5nZXMgdGhlIGRpc3BsYXllZCBhbmltYXRpb24uXG4gICogU2VlIEFuaW1hdGlvbiBmb3IgbW9yZSBjb250cm9sIG92ZXIgdGhlIHNlcXVlbmNlLlxuICAqXG4gICogQG1ldGhvZCBjaGFuZ2VBbmltYXRpb25cbiAgKiBAcGFyYW0ge1N0cmluZ30gbGFiZWwgQW5pbWF0aW9uIGlkZW50aWZpZXJcbiAgKi9cbiAgdGhpcy5jaGFuZ2VBbmltYXRpb24gPSBmdW5jdGlvbihsYWJlbCkge1xuICAgIGlmKGFuaW1hdGlvbnNbbGFiZWxdPT1udWxsKVxuICAgICAgcHJpbnQoXCJjaGFuZ2VBbmltYXRpb24gZXJyb3I6IG5vIGFuaW1hdGlvbiBsYWJlbGVkIFwiK2xhYmVsKTsgXG4gICAgZWxzZVxuICAgIHtcbiAgICAgIGN1cnJlbnRBbmltYXRpb24gPSBsYWJlbDtcbiAgICAgIHRoaXMuYW5pbWF0aW9uID0gYW5pbWF0aW9uc1tsYWJlbF07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBwb2ludCBjb3JyZXNwb25kcyB0byBhIHRyYW5zcGFyZW50IHBpeGVsXG4gICogaW4gdGhlIHNwcml0ZSdzIGN1cnJlbnQgaW1hZ2UuIEl0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGEgcG9pbnQgY29sbGlzaW9uIFxuICAqIGFnYWluc3Qgb25seSB0aGUgdmlzaWJsZSBwYXJ0IG9mIHRoZSBzcHJpdGUuXG4gICpcbiAgKiBAbWV0aG9kIG92ZXJsYXBQaXhlbFxuICAqIEBwYXJhbSB7TnVtYmVyfSBwb2ludFggeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byBjaGVja1xuICAqIEBwYXJhbSB7TnVtYmVyfSBwb2ludFkgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byBjaGVja1xuICAqIEByZXR1cm5zIHtCb29sZWFufSByZXN1bHQgVHJ1ZSBpZiBub24tdHJhbnNwYXJlbnRcbiAgKi9cbiAgdGhpcy5vdmVybGFwUGl4ZWwgPSBmdW5jdGlvbihwb2ludFgsIHBvaW50WSkge1xuXG4gICAgdmFyIHBvaW50ID0gY3JlYXRlVmVjdG9yKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKTtcblxuICAgIHZhciBpbWcgPSB0aGlzLmFuaW1hdGlvbi5nZXRGcmFtZUltYWdlKCk7XG5cbiAgICAvL2NvbnZlcnQgcG9pbnQgdG8gaW1nIHJlbGF0aXZlIHBvc2l0aW9uXG4gICAgcG9pbnQueCAtPSB0aGlzLnBvc2l0aW9uLngtaW1nLndpZHRoLzI7XG4gICAgcG9pbnQueSAtPSB0aGlzLnBvc2l0aW9uLnktaW1nLmhlaWdodC8yO1xuXG4gICAgLy9vdXQgb2YgdGhlIGltYWdlIGVudGlyZWx5XG4gICAgaWYocG9pbnQueDwwIHx8IHBvaW50Lng+aW1nLndpZHRoIHx8IHBvaW50Lnk8MCB8fCBwb2ludC55PmltZy5oZWlnaHQpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZih0aGlzLnJvdGF0aW9uID09IDAgJiYgdGhpcy5zY2FsZSA9PSAxKVxuICAgIHtcbiAgICAgIC8vdHJ1ZSBpZiBmdWxsIG9wYWNpdHlcbiAgICAgIHZhciB2YWx1ZXMgPSBpbWcuZ2V0KHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgcmV0dXJuIHZhbHVlc1szXSA9PSAyNTU7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICBwcmludChcIkVycm9yOiBvdmVybGFwUGl4ZWwgZG9lc24ndCB3b3JrIHdpdGggc2NhbGVkIG9yIHJvdGF0ZWQgc3ByaXRlcyB5ZXRcIik7XG4gICAgICAvL29mZnNjcmVlbiBwcmludGluZyB0byBiZSBpbXBsZW1lbnRlZCBibGV1cmNoXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBwb2ludCBpcyBpbnNpZGUgdGhlIHNwcml0ZSdzIGNvbGxpZGVyLlxuICAqXG4gICogQG1ldGhvZCBvdmVybGFwUG9pbnRcbiAgKiBAcGFyYW0ge051bWJlcn0gcG9pbnRYIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgdG8gY2hlY2tcbiAgKiBAcGFyYW0ge051bWJlcn0gcG9pbnRZIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgdG8gY2hlY2tcbiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gcmVzdWx0IFRydWUgaWYgaW5zaWRlXG4gICovXG4gIHRoaXMub3ZlcmxhcFBvaW50ID0gZnVuY3Rpb24ocG9pbnRYLCBwb2ludFkpIHtcbiAgICB2YXIgcG9pbnQgPSBjcmVhdGVWZWN0b3IoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pO1xuICAgIFxuICAgIGlmKHRoaXMuY29sbGlkZXIgPT0gbnVsbClcbiAgICAgIHRoaXMuc2V0RGVmYXVsdENvbGxpZGVyKCk7XG5cbiAgICBpZih0aGlzLmNvbGxpZGVyICE9IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICBpZih0aGlzLmNvbGxpZGVyIGluc3RhbmNlb2YgQUFCQilcbiAgICAgICAgcmV0dXJuIChwb2ludC54ID4gdGhpcy5jb2xsaWRlci5sZWZ0KCkgJiYgcG9pbnQueCA8IHRoaXMuY29sbGlkZXIucmlnaHQoKSAmJiBwb2ludC55ID4gdGhpcy5jb2xsaWRlci50b3AoKSAmJiBwb2ludC55IDwgdGhpcy5jb2xsaWRlci5ib3R0b20oKSk7XG4gICAgICBpZih0aGlzLmNvbGxpZGVyIGluc3RhbmNlb2YgQ2lyY2xlQ29sbGlkZXIpXG4gICAgICB7XG4gICAgICAgIHZhciBzcVJhZGl1cyA9IHRoaXMuY29sbGlkZXIucmFkaXVzICogdGhpcy5jb2xsaWRlci5yYWRpdXM7XG4gICAgICAgIHZhciBzcURpc3QgPSBwb3codGhpcy5jb2xsaWRlci5jZW50ZXIueCAtIHBvaW50LngsIDIpICsgcG93KHRoaXMuY29sbGlkZXIuY2VudGVyLnkgLSBwb2ludC55LCAyKTtcbiAgICAgICAgcmV0dXJuIHNxRGlzdDxzcVJhZGl1c1xuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICB9XG5cblxuICAvKipcbiAgKiBDaGVja3MgaWYgdGhlIHRoZSBzcHJpdGUgaXMgb3ZlcmxhcHBpbmcgYW5vdGhlciBzcHJpdGUgb3IgYSBncm91cC5cbiAgKiBUaGUgY2hlY2sgaXMgcGVyZm9ybWVkIHVzaW5nIHRoZSBjb2xsaWRlcnMuIElmIGNvbGxpZGVycyBhcmUgbm90IHNldFxuICAqIHRoZXkgd2lsbCBiZSBjcmVhdGVkIGF1dG9tYXRpY2FsbHkgZnJvbSB0aGUgaW1hZ2UvYW5pbWF0aW9uIGJvdW5kaW5nIGJveC5cbiAgKlxuICAqIEEgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHNwZWNpZmllZCB0byBwZXJmb3JtIGFkZGl0aW9uYWwgb3BlcmF0aW9uc1xuICAqIHdoZW4gdGhlIG92ZXJsYXAgb2Njb3Vycy5cbiAgKiBJZiB0aGUgdGFyZ2V0IGlzIGEgZ3JvdXAgdGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIHNpbmdsZSBcbiAgKiBzcHJpdGUgb3ZlcmxhcHBpbmcuIFRoZSBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIGFyZSByZXNwZWN0aXZlbHkgdGhlXG4gICogY3VycmVudCBzcHJpdGUgYW5kIHRoZSBjb2xsaWRpbmcgc3ByaXRlLlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiA8Y29kZT5cbiAgKiBzcHJpdGUub3ZlcmxhcChvdGhlclNwcml0ZSwgZXhwbG9zaW9uKTtcbiAgKlxuICAqIGZ1bmN0aW9uIGV4cGxvc2lvbihzcHJpdGVBLCBzcHJpdGVCKSB7XG4gICogc3ByaXRlQS5yZW1vdmUoKTtcbiAgKiBzcHJpdGVCLnNjb3JlKys7XG4gICogfVxuICAqIDwvY29kZT5cbiAgKlxuICAqIEBtZXRob2Qgb3ZlcmxhcFxuICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgU3ByaXRlIG9yIGdyb3VwIHRvIGNoZWNrIGFnYWluc3QgdGhlIGN1cnJlbnQgb25lXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGlmIG92ZXJsYXAgaXMgcG9zaXRpdmVcbiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiBvdmVybGFwcGluZ1xuICAqL1xuICB0aGlzLm92ZXJsYXAgPSBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgLy9pZih0aGlzLmNvbGxpZGVyIGluc3RhbmNlb2YgQUFCQiAmJiB0YXJnZXQuY29sbGlkZXIgaW5zdGFuY2VvZiBBQUJCKVxuICAgIHJldHVybiB0aGlzLkFBQkJvcHMoXCJvdmVybGFwXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSB0aGUgc3ByaXRlIGlzIG92ZXJsYXBwaW5nIGFub3RoZXIgc3ByaXRlIG9yIGEgZ3JvdXAuXG4gICogSWYgdGhlIG92ZXJsYXAgaXMgcG9zaXRpdmUgdGhlIGN1cnJlbnQgc3ByaXRlIHdpbGwgYmUgZGlzcGxhY2UgYnlcbiAgKiB0aGUgY29sbGlkaW5nIG9uZSBpbiB0aGUgY2xvc2VzdCBub24tb3ZlcmxhcHBpbmcgcG9zaXRpb24uIFxuICAqIFxuICAqIFRoZSBjaGVjayBpcyBwZXJmb3JtZWQgdXNpbmcgdGhlIGNvbGxpZGVycy4gSWYgY29sbGlkZXJzIGFyZSBub3Qgc2V0XG4gICogdGhleSB3aWxsIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSBmcm9tIHRoZSBpbWFnZS9hbmltYXRpb24gYm91bmRpbmcgYm94LlxuICAqIFxuICAqIEEgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHNwZWNpZmllZCB0byBwZXJmb3JtIGFkZGl0aW9uYWwgb3BlcmF0aW9uc1xuICAqIHdoZW4gdGhlIGNvbGxpc2lvbiBvY2NvdXJzLlxuICAqIElmIHRoZSB0YXJnZXQgaXMgYSBncm91cCB0aGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggc2luZ2xlIFxuICAqIHNwcml0ZSBjb2xsaWRpbmcuIFRoZSBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIGFyZSByZXNwZWN0aXZlbHkgdGhlXG4gICogY3VycmVudCBzcHJpdGUgYW5kIHRoZSBjb2xsaWRpbmcgc3ByaXRlLlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiA8Y29kZT5cbiAgKiBzcHJpdGUuY29sbGlkZShvdGhlclNwcml0ZSwgZXhwbG9zaW9uKTtcbiAgKlxuICAqIGZ1bmN0aW9uIGV4cGxvc2lvbihzcHJpdGVBLCBzcHJpdGVCKSB7XG4gICogc3ByaXRlQS5yZW1vdmUoKTtcbiAgKiBzcHJpdGVCLnNjb3JlKys7XG4gICogfVxuICAqIDwvY29kZT5cbiAgKlxuICAqIEBtZXRob2QgY29sbGlkZVxuICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgU3ByaXRlIG9yIGdyb3VwIHRvIGNoZWNrIGFnYWluc3QgdGhlIGN1cnJlbnQgb25lXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGlmIG92ZXJsYXAgaXMgcG9zaXRpdmVcbiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiBvdmVybGFwcGluZ1xuICAqL1xuICB0aGlzLmNvbGxpZGUgPSBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgLy9pZih0aGlzLmNvbGxpZGVyIGluc3RhbmNlb2YgQUFCQiAmJiB0YXJnZXQuY29sbGlkZXIgaW5zdGFuY2VvZiBBQUJCKVxuICAgIHJldHVybiB0aGlzLkFBQkJvcHMoXCJjb2xsaWRlXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSB0aGUgc3ByaXRlIGlzIG92ZXJsYXBwaW5nIGFub3RoZXIgc3ByaXRlIG9yIGEgZ3JvdXAuXG4gICogSWYgdGhlIG92ZXJsYXAgaXMgcG9zaXRpdmUgdGhlIGN1cnJlbnQgc3ByaXRlIHdpbGwgZGlzcGxhY2VcbiAgKiB0aGUgY29sbGlkaW5nIG9uZSB0byB0aGUgY2xvc2VzdCBub24tb3ZlcmxhcHBpbmcgcG9zaXRpb24uIFxuICAqIFxuICAqIFRoZSBjaGVjayBpcyBwZXJmb3JtZWQgdXNpbmcgdGhlIGNvbGxpZGVycy4gSWYgY29sbGlkZXJzIGFyZSBub3Qgc2V0XG4gICogdGhleSB3aWxsIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSBmcm9tIHRoZSBpbWFnZS9hbmltYXRpb24gYm91bmRpbmcgYm94LlxuICAqIFxuICAqIEEgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHNwZWNpZmllZCB0byBwZXJmb3JtIGFkZGl0aW9uYWwgb3BlcmF0aW9uc1xuICAqIHdoZW4gdGhlIGNvbGxpc2lvbiBvY2NvdXJzLlxuICAqIElmIHRoZSB0YXJnZXQgaXMgYSBncm91cCB0aGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggc2luZ2xlIFxuICAqIHNwcml0ZSBjb2xsaWRpbmcuIFRoZSBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIGFyZSByZXNwZWN0aXZlbHkgdGhlXG4gICogY3VycmVudCBzcHJpdGUgYW5kIHRoZSBjb2xsaWRpbmcgc3ByaXRlLlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiA8Y29kZT5cbiAgKiBzcHJpdGUuZGlzcGxhY2Uob3RoZXJTcHJpdGUsIGV4cGxvc2lvbik7XG4gICpcbiAgKiBmdW5jdGlvbiBleHBsb3Npb24oc3ByaXRlQSwgc3ByaXRlQikge1xuICAqIHNwcml0ZUEucmVtb3ZlKCk7XG4gICogc3ByaXRlQi5zY29yZSsrO1xuICAqIH1cbiAgKiA8L2NvZGU+XG4gICpcbiAgKiBAbWV0aG9kIGRpc3BsYWNlXG4gICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBTcHJpdGUgb3IgZ3JvdXAgdG8gY2hlY2sgYWdhaW5zdCB0aGUgY3VycmVudCBvbmVcbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgaWYgb3ZlcmxhcCBpcyBwb3NpdGl2ZVxuICAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIG92ZXJsYXBwaW5nXG4gICovXG4gIHRoaXMuZGlzcGxhY2UgPSBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuQUFCQm9wcyhcImRpc3BsYWNlXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSB0aGUgc3ByaXRlIGlzIG92ZXJsYXBwaW5nIGFub3RoZXIgc3ByaXRlIG9yIGEgZ3JvdXAuXG4gICogSWYgdGhlIG92ZXJsYXAgaXMgcG9zaXRpdmUgdGhlIHNwcml0ZXMgd2lsbCBib3VuY2UgYWZmZWN0aW5nIGVhY2hcbiAgKiBvdGhlcidzIHRyYWplY3RvcmllcyBkZXBlbmRpbmcgb24gdGhlaXIgLnZlbG9jaXR5LCAubWFzcyBhbmQgLnJlc3RpdHV0aW9uXG4gICogXG4gICogVGhlIGNoZWNrIGlzIHBlcmZvcm1lZCB1c2luZyB0aGUgY29sbGlkZXJzLiBJZiBjb2xsaWRlcnMgYXJlIG5vdCBzZXRcbiAgKiB0aGV5IHdpbGwgYmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IGZyb20gdGhlIGltYWdlL2FuaW1hdGlvbiBib3VuZGluZyBib3guXG4gICogXG4gICogQSBjYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgc3BlY2lmaWVkIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBvcGVyYXRpb25zXG4gICogd2hlbiB0aGUgY29sbGlzaW9uIG9jY291cnMuXG4gICogSWYgdGhlIHRhcmdldCBpcyBhIGdyb3VwIHRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBzaW5nbGUgXG4gICogc3ByaXRlIGNvbGxpZGluZy4gVGhlIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gYXJlIHJlc3BlY3RpdmVseSB0aGVcbiAgKiBjdXJyZW50IHNwcml0ZSBhbmQgdGhlIGNvbGxpZGluZyBzcHJpdGUuXG4gICpcbiAgKiBAZXhhbXBsZVxuICAqIDxjb2RlPlxuICAqIHNwcml0ZS5ib3VuY2Uob3RoZXJTcHJpdGUsIGV4cGxvc2lvbik7XG4gICpcbiAgKiBmdW5jdGlvbiBleHBsb3Npb24oc3ByaXRlQSwgc3ByaXRlQikge1xuICAqIHNwcml0ZUEucmVtb3ZlKCk7XG4gICogc3ByaXRlQi5zY29yZSsrO1xuICAqIH1cbiAgKiA8L2NvZGU+XG4gICpcbiAgKiBAbWV0aG9kIGJvdW5jZVxuICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgU3ByaXRlIG9yIGdyb3VwIHRvIGNoZWNrIGFnYWluc3QgdGhlIGN1cnJlbnQgb25lXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGlmIG92ZXJsYXAgaXMgcG9zaXRpdmVcbiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiBvdmVybGFwcGluZ1xuICAqL1xuICB0aGlzLmJvdW5jZSA9IGZ1bmN0aW9uKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5BQUJCb3BzKFwiYm91bmNlXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICogSW50ZXJuYWwgY29sbGlzaW9uIGRldGVjdGlvbiBmdW5jdGlvbi4gRG8gbm90IHVzZSBkaXJlY3RseS5cbiAgKi9cbiAgdGhpcy5BQUJCb3BzID0gZnVuY3Rpb24odHlwZSwgdGFyZ2V0LCBjYWxsYmFjaykge1xuXG4gICAgdGhpcy50b3VjaGluZy5sZWZ0ID0gZmFsc2U7XG4gICAgdGhpcy50b3VjaGluZy5yaWdodCA9IGZhbHNlO1xuICAgIHRoaXMudG91Y2hpbmcudG9wID0gZmFsc2U7XG4gICAgdGhpcy50b3VjaGluZy5ib3R0b20gPSBmYWxzZTtcblxuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblxuICAgIC8vaWYgc2luZ2xlIHNwcml0ZSB0dXJuIGludG8gYXJyYXkgYW55d2F5XG4gICAgdmFyIG90aGVycyA9IFtdO1xuICAgIFxuICAgIGlmKHRhcmdldCBpbnN0YW5jZW9mIFNwcml0ZSlcbiAgICAgIG90aGVycy5wdXNoKHRhcmdldCk7XG4gICAgZWxzZSBpZih0YXJnZXQgaW5zdGFuY2VvZiBBcnJheSlcbiAgICB7XG4gICAgICBpZihxdWFkVHJlZSAhPSB1bmRlZmluZWQgJiYgcXVhZFRyZWUuYWN0aXZlKVxuICAgICAgICBvdGhlcnMgPSBxdWFkVHJlZS5yZXRyaWV2ZUZyb21Hcm91cCggdGhpcywgdGFyZ2V0KTtcbiAgICAgIFxuICAgICAgaWYob3RoZXJzLmxlbmd0aCA9PSAwKVxuICAgICAgICBvdGhlcnMgPSB0YXJnZXQ7XG4gICAgICBcbiAgICB9XG4gICAgZWxzZVxuICAgICAgdGhyb3coXCJFcnJvcjogb3ZlcmxhcCBjYW4gb25seSBiZSBjaGVja2VkIGJldHdlZW4gc3ByaXRlcyBvciBncm91cHNcIik7XG4gICAgXG4gICAgZm9yKHZhciBpPTA7IGk8b3RoZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgaWYodGhpcyAhPSBvdGhlcnNbaV0gJiYgIXRoaXMucmVtb3ZlZCkgLy95b3UgY2FuIGNoZWNrIGNvbGxpc2lvbnMgd2l0aGluIHRoZSBzYW1lIGdyb3VwIGJ1dCBub3Qgb24gaXRzZWxmXG4gICAgICB7XG4gICAgICAgIHZhciBvdGhlciA9IG90aGVyc1tpXTtcbiAgICAgICAgXG4gICAgICAgIGlmKHRoaXMuY29sbGlkZXIgPT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdENvbGxpZGVyKCk7XG4gICAgICAgIFxuICAgICAgICBpZihvdGhlci5jb2xsaWRlciA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgb3RoZXIuc2V0RGVmYXVsdENvbGxpZGVyKCk7XG4gICAgICAgIFxuICAgICAgICAvKlxuICAgICAgICBpZih0aGlzLmNvbGxpZGVyVHlwZT09XCJkZWZhdWx0XCIgJiYgYW5pbWF0aW9uc1tjdXJyZW50QW5pbWF0aW9uXSE9bnVsbClcbiAgICAgICAge1xuICAgICAgICAgIHByaW50KFwiYnVzdGVkXCIpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSovXG4gICAgICAgIGlmKHRoaXMuY29sbGlkZXIgIT0gdW5kZWZpbmVkICYmIG90aGVyLmNvbGxpZGVyICE9IHVuZGVmaW5lZClcbiAgICAgICAge1xuICAgICAgICBpZih0eXBlPT1cIm92ZXJsYXBcIikgIHtcbiAgICAgICAgICAgIHZhciBvdmVyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2lmIHRoZSBvdGhlciBpcyBhIGNpcmNsZSBJIGNhbGN1bGF0ZSB0aGUgZGlzcGxhY2VtZW50IGZyb20gaGVyZVxuICAgICAgICAgICAgaWYodGhpcy5jb2xsaWRlciBpbnN0YW5jZW9mIENpcmNsZUNvbGxpZGVyKVxuICAgICAgICAgICAgICAgIG92ZXIgPSBvdGhlci5jb2xsaWRlci5vdmVybGFwKHRoaXMuY29sbGlkZXIpO1xuICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgICBvdmVyID0gdGhpcy5jb2xsaWRlci5vdmVybGFwKG90aGVyLmNvbGxpZGVyKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihvdmVyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT0gdW5kZWZpbmVkICYmIHR5cGVvZiBjYWxsYmFjayA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCB0aGlzLCBvdGhlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHR5cGU9PVwiY29sbGlkZVwiIHx8IHR5cGUgPT0gXCJib3VuY2VcIikgIFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9pZiB0aGUgc3VtIG9mIHRoZSBzcGVlZCBpcyBtb3JlIHRoYW4gdGhlIGNvbGxpZGVyIGkgbWF5XG4gICAgICAgICAgICAvL2hhdmUgYSB0dW5uZWxsaW5nIHByb2JsZW1cbiAgICAgICAgICAgIHZhciB0dW5uZWxYID0gYWJzKHRoaXMudmVsb2NpdHkueC1vdGhlci52ZWxvY2l0eS54KSA+PSBvdGhlci5jb2xsaWRlci5leHRlbnRzLngvMiAmJiByb3VuZCh0aGlzLmRlbHRhWCAtIHRoaXMudmVsb2NpdHkueCkgPT0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHR1bm5lbFkgPSBhYnModGhpcy52ZWxvY2l0eS55LW90aGVyLnZlbG9jaXR5LnkpID49ICBvdGhlci5jb2xsaWRlci5zaXplKCkueS8yICAmJiByb3VuZCh0aGlzLmRlbHRhWSAtIHRoaXMudmVsb2NpdHkueSkgPT0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih0dW5uZWxYIHx8IHR1bm5lbFkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vaW5zdGVhZCBvZiB1c2luZyB0aGUgY29sbGlkZXJzIEkgdXNlIHRoZSBib3VuZGluZyBib3hcbiAgICAgICAgICAgICAgLy9hcm91bmQgdGhlIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgICAgICAgIC8vdGhpcyBpcyByZWdhcmRsZXNzIG9mIHRoZSBjb2xsaWRlciB0eXBlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvL3RoZSBjZW50ZXIgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIGNvbGwgY2VudGVyc1xuICAgICAgICAgICAgICB2YXIgYyA9IGNyZWF0ZVZlY3RvciggXG4gICAgICAgICAgICAgICAgKHRoaXMucG9zaXRpb24ueCt0aGlzLnByZXZpb3VzUG9zaXRpb24ueCkvMixcbiAgICAgICAgICAgICAgICAodGhpcy5wb3NpdGlvbi55K3RoaXMucHJldmlvdXNQb3NpdGlvbi55KS8yKTtcblxuICAgICAgICAgICAgICAvL3RoZSBleHRlbnRzIGFyZSB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgY29sbCBjZW50ZXJzXG4gICAgICAgICAgICAgIC8vcGx1cyB0aGUgZXh0ZW50cyBvZiBib3RoXG4gICAgICAgICAgICAgIHZhciBlID0gY3JlYXRlVmVjdG9yKFxuICAgICAgICAgICAgICAgIGFicyh0aGlzLnBvc2l0aW9uLnggLXRoaXMucHJldmlvdXNQb3NpdGlvbi54KSArIHRoaXMuY29sbGlkZXIuZXh0ZW50cy54LFxuICAgICAgICAgICAgICAgIGFicyh0aGlzLnBvc2l0aW9uLnkgLXRoaXMucHJldmlvdXNQb3NpdGlvbi55KSArIHRoaXMuY29sbGlkZXIuZXh0ZW50cy55KTtcblxuICAgICAgICAgICAgICB2YXIgYmJveCA9IG5ldyBBQUJCKGMsIGUsIHRoaXMuY29sbGlkZXIub2Zmc2V0KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vYmJveC5kcmF3KCk7XG5cbiAgICAgICAgICAgICAgaWYoYmJveC5vdmVybGFwKG90aGVyLmNvbGxpZGVyKSlcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmKHR1bm5lbFgpIHtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy9lbnRlcmluZyBmcm9tIHRoZSByaWdodFxuICAgICAgICAgICAgICAgICAgaWYodGhpcy52ZWxvY2l0eS54IDwgMClcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxhY2VtZW50LnggPSBvdGhlci5jb2xsaWRlci5yaWdodCgpIC0gdGhpcy5jb2xsaWRlci5sZWZ0KCkgKyAxO1xuICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnZlbG9jaXR5LnggPiAwIClcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxhY2VtZW50LnggPSBvdGhlci5jb2xsaWRlci5sZWZ0KCkgLSB0aGlzLmNvbGxpZGVyLnJpZ2h0KCkgLTE7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZih0dW5uZWxZKSB7XG4gICAgICAgICAgICAgICAgICAvL2Zyb20gdG9wXG4gICAgICAgICAgICAgICAgICBpZih0aGlzLnZlbG9jaXR5LnkgPiAwKVxuICAgICAgICAgICAgICAgICAgICBkaXNwbGFjZW1lbnQueSA9IG90aGVyLmNvbGxpZGVyLnRvcCgpIC0gdGhpcy5jb2xsaWRlci5ib3R0b20oKSAtIDE7XG4gICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMudmVsb2NpdHkueSA8IDAgKVxuICAgICAgICAgICAgICAgICAgICBkaXNwbGFjZW1lbnQueSA9IG90aGVyLmNvbGxpZGVyLmJvdHRvbSgpIC0gdGhpcy5jb2xsaWRlci50b3AoKSArIDE7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIH0vL2VuZCBvdmVybGFwXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSAvL25vbiB0dW5uZWwgb3ZlcmxhcCBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy9pZiB0aGUgb3RoZXIgaXMgYSBjaXJjbGUgSSBjYWxjdWxhdGUgdGhlIGRpc3BsYWNlbWVudCBmcm9tIGhlcmVcbiAgICAgICAgICAgICAgLy9hbmQgcmV2ZXJzZSBpdFxuICAgICAgICAgICAgICBpZih0aGlzLmNvbGxpZGVyIGluc3RhbmNlb2YgQ2lyY2xlQ29sbGlkZXIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRpc3BsYWNlbWVudCA9IG90aGVyLmNvbGxpZGVyLmNvbGxpZGUodGhpcy5jb2xsaWRlcikubXVsdCgtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIFxuICAgICAgICAgICAgICAgIGRpc3BsYWNlbWVudCA9IHRoaXMuY29sbGlkZXIuY29sbGlkZShvdGhlci5jb2xsaWRlcik7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihkaXNwbGFjZW1lbnQueCA9PSAwICYmICBkaXNwbGFjZW1lbnQueSA9PSAwIClcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7ICBcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmKCF0aGlzLmltbW92YWJsZSlcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24uYWRkKGRpc3BsYWNlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gY3JlYXRlVmVjdG9yKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcbiAgICAgICAgICAgICAgICB0aGlzLm5ld1Bvc2l0aW9uID0gY3JlYXRlVmVjdG9yKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmKGRpc3BsYWNlbWVudC54ID4gMClcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoaW5nLmxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICBpZihkaXNwbGFjZW1lbnQueCA8IDApXG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaGluZy5yaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgIGlmKGRpc3BsYWNlbWVudC55IDwgMClcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoaW5nLmJvdHRvbSA9IHRydWU7XG4gICAgICAgICAgICAgIGlmKGRpc3BsYWNlbWVudC55ID4gMClcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoaW5nLnRvcCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgaWYodHlwZSA9PSBcImJvdW5jZVwiKVxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYob3RoZXIuaW1tb3ZhYmxlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHZhciBuZXdWZWxYMSA9IC10aGlzLnZlbG9jaXR5Lngrb3RoZXIudmVsb2NpdHkueDtcbiAgICAgICAgICAgICAgICAgIHZhciBuZXdWZWxZMSA9IC10aGlzLnZlbG9jaXR5Lnkrb3RoZXIudmVsb2NpdHkueTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICB2YXIgbmV3VmVsWDEgPSAodGhpcy52ZWxvY2l0eS54ICogKHRoaXMubWFzcyAtIG90aGVyLm1hc3MpICsgKDIgKiBvdGhlci5tYXNzICogb3RoZXIudmVsb2NpdHkueCkpIC8gKHRoaXMubWFzcyArIG90aGVyLm1hc3MpO1xuXG4gICAgICAgICAgICAgICAgICB2YXIgbmV3VmVsWTEgPSAodGhpcy52ZWxvY2l0eS55ICogKHRoaXMubWFzcyAtIG90aGVyLm1hc3MpICsgKDIgKiBvdGhlci5tYXNzICogb3RoZXIudmVsb2NpdHkueSkpIC8gKHRoaXMubWFzcyArIG90aGVyLm1hc3MpO1xuXG4gICAgICAgICAgICAgICAgICB2YXIgbmV3VmVsWDIgPSAob3RoZXIudmVsb2NpdHkueCAqIChvdGhlci5tYXNzIC0gdGhpcy5tYXNzKSArICgyICogdGhpcy5tYXNzICogdGhpcy52ZWxvY2l0eS54KSkgLyAodGhpcy5tYXNzICsgb3RoZXIubWFzcyk7XG5cbiAgICAgICAgICAgICAgICAgIHZhciBuZXdWZWxZMiA9IChvdGhlci52ZWxvY2l0eS55ICogKG90aGVyLm1hc3MgLSB0aGlzLm1hc3MpICsgKDIgKiB0aGlzLm1hc3MgKiB0aGlzLnZlbG9jaXR5LnkpKSAvICh0aGlzLm1hc3MgKyBvdGhlci5tYXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy92YXIgYm90aENpcmNsZXMgPSAodGhpcy5jb2xsaWRlciBpbnN0YW5jZW9mIENpcmNsZUNvbGxpZGVyICYmXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgb3RoZXIuY29sbGlkZXIgIGluc3RhbmNlb2YgQ2lyY2xlQ29sbGlkZXIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vaWYodGhpcy50b3VjaGluZy5sZWZ0IHx8IHRoaXMudG91Y2hpbmcucmlnaHQgfHwgdGhpcy5jb2xsaWRlciBpbnN0YW5jZW9mIENpcmNsZUNvbGxpZGVyKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vcHJpbnQoZGlzcGxhY2VtZW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZihhYnMoZGlzcGxhY2VtZW50LngpPmFicyhkaXNwbGFjZW1lbnQueSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuaW1tb3ZhYmxlKVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnggPSBuZXdWZWxYMSp0aGlzLnJlc3RpdHV0aW9uO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmKCFvdGhlci5pbW1vdmFibGUpXG4gICAgICAgICAgICAgICAgICAgIG90aGVyLnZlbG9jaXR5LnggPSBuZXdWZWxYMipvdGhlci5yZXN0aXR1dGlvbjtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2lmKHRoaXMudG91Y2hpbmcudG9wIHx8IHRoaXMudG91Y2hpbmcuYm90dG9tIHx8IHRoaXMuY29sbGlkZXIgaW5zdGFuY2VvZiBDaXJjbGVDb2xsaWRlcilcbiAgICAgICAgICAgICAgICBpZihhYnMoZGlzcGxhY2VtZW50LngpPGFicyhkaXNwbGFjZW1lbnQueSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZighdGhpcy5pbW1vdmFibGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVsb2NpdHkueSA9IG5ld1ZlbFkxKnRoaXMucmVzdGl0dXRpb247XG5cbiAgICAgICAgICAgICAgICAgIGlmKCFvdGhlci5pbW1vdmFibGUpXG4gICAgICAgICAgICAgICAgICAgIG90aGVyLnZlbG9jaXR5LnkgPSBuZXdWZWxZMipvdGhlci5yZXN0aXR1dGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy9lbHNlIGlmKHR5cGUgPT0gXCJjb2xsaWRlXCIpXG4gICAgICAgICAgICAgICAgLy90aGlzLnZlbG9jaXR5ID0gY3JlYXRlVmVjdG9yKDAsMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9IHVuZGVmaW5lZCAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywgdGhpcywgb3RoZXIpO1xuXG4gICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYodHlwZT09XCJkaXNwbGFjZVwiKSAge1xuXG4gICAgICAgICAgICAvL2lmIHRoZSBvdGhlciBpcyBhIGNpcmNsZSBJIGNhbGN1bGF0ZSB0aGUgZGlzcGxhY2VtZW50IGZyb20gaGVyZVxuICAgICAgICAgICAgLy9hbmQgcmV2ZXJzZSBpdFxuICAgICAgICAgICAgaWYodGhpcy5jb2xsaWRlciBpbnN0YW5jZW9mIENpcmNsZUNvbGxpZGVyKVxuICAgICAgICAgICAgICBkaXNwbGFjZW1lbnQgPSBvdGhlci5jb2xsaWRlci5jb2xsaWRlKHRoaXMuY29sbGlkZXIpLm11bHQoLTEpO1xuICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgZGlzcGxhY2VtZW50ID0gdGhpcy5jb2xsaWRlci5jb2xsaWRlKG90aGVyLmNvbGxpZGVyKTtcblxuXG4gICAgICAgICAgICBpZihkaXNwbGFjZW1lbnQueCA9PSAwICYmICBkaXNwbGFjZW1lbnQueSA9PSAwIClcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7ICBcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgb3RoZXIucG9zaXRpb24uc3ViKGRpc3BsYWNlbWVudCk7XG5cbiAgICAgICAgICAgICAgaWYoZGlzcGxhY2VtZW50LnggPiAwKVxuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hpbmcubGVmdCA9IHRydWU7XG4gICAgICAgICAgICAgIGlmKGRpc3BsYWNlbWVudC54IDwgMClcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoaW5nLnJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYoZGlzcGxhY2VtZW50LnkgPCAwKVxuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hpbmcuYm90dG9tID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYoZGlzcGxhY2VtZW50LnkgPiAwKVxuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hpbmcudG9wID0gdHJ1ZTtcblxuICAgICAgICAgICAgICBpZihjYWxsYmFjayAhPSB1bmRlZmluZWQgJiYgdHlwZW9mIGNhbGxiYWNrID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMsIHRoaXMsIG90aGVyKTtcblxuICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfS8vZW5kIGNvbGxpZGVyIGV4aXN0c1xuICAgICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTsvL2VuZCBTcHJpdGUgY2xhc3NcblxuXG5cblxuXG4vKipcbiAgICogVGhlIHNrZXRjaCBjYW1lcmEgYXV0b21hdGljYWxseSBjcmVhdGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBza2V0Y2guXG4gICAqIEEgY2FtZXJhIGZhY2lsaXRhdGVzIHNjcm9sbGluZyBhbmQgem9vbWluZyBmb3Igc2NlbmVzIGV4dGVuZGluZyBiZXlvbmRcbiAgICogdGhlIGNhbnZhcy4gQSBjYW1lcmEgaGFzIGEgcG9zaXRpb24sIGEgem9vbSBmYWN0b3IsIGFuZCB0aGUgbW91c2UgXG4gICAqIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZSB2aWV3LlxuICAgKlxuICAgKiBJbiBwNS5qcyB0ZXJtcyB0aGUgY2FtZXJhIHdyYXBzIHRoZSB3aG9sZSBkcmF3aW5nIGN5Y2xlIGluIGEgXG4gICAqIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBidXQgaXQgY2FuIGJlIGRpc2FibGUgYW55dGltZSBkdXJpbmcgdGhlIGRyYXdcbiAgICogY3ljbGUgZm9yIGV4YW1wbGUgdG8gZHJhdyBpbnRlcmZhY2UgZWxlbWVudHMgaW4gYW4gYWJzb2x1dGUgcG9zaXRpb24uXG4gICAqIFxuICAgKiBAcHJvcGVydHkgY2FtZXJhXG4gICAqIEB0eXBlIHtjYW1lcmF9XG4gICAqLyBcbnA1LnByb3RvdHlwZS5jYW1lcmEgPSBuZXcgQ2FtZXJhKDAsIDAsIDEpO1xucDUucHJvdG90eXBlLmNhbWVyYS5pbml0ID0gZmFsc2U7XG5cbi8qKlxuICAgKiBBIGNhbWVyYSBmYWNpbGl0YXRlcyBzY3JvbGxpbmcgYW5kIHpvb21pbmcgZm9yIHNjZW5lcyBleHRlbmRpbmcgYmV5b25kXG4gICAqIHRoZSBjYW52YXMuIEEgY2FtZXJhIGhhcyBhIHBvc2l0aW9uLCBhIHpvb20gZmFjdG9yLCBhbmQgdGhlIG1vdXNlIFxuICAgKiBjb29yZGluYXRlcyByZWxhdGl2ZSB0byB0aGUgdmlldy5cbiAgICogVGhlIGNhbWVyYSBpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgb24gdGhlIGZpcnN0IGRyYXcgY3ljbGUuXG4gICAqXG4gICAqIEluIHA1LmpzIHRlcm1zIHRoZSBjYW1lcmEgd3JhcHMgdGhlIHdob2xlIGRyYXdpbmcgY3ljbGUgaW4gYSBcbiAgICogdHJhbnNmb3JtYXRpb24gbWF0cml4IGJ1dCBpdCBjYW4gYmUgZGlzYWJsZSBhbnl0aW1lIGR1cmluZyB0aGUgZHJhd1xuICAgKiBjeWNsZSBmb3IgZXhhbXBsZSB0byBkcmF3IGludGVyZmFjZSBlbGVtZW50cyBpbiBhbiBhYnNvbHV0ZSBwb3NpdGlvbi5cbiAgICpcbiAgICogQGNsYXNzIENhbWVyYVxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggSW5pdGlhbCB4IGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgSW5pdGlhbCB5IGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHpvb20gbWFnbmlmaWNhdGlvblxuICAgKiovXG5mdW5jdGlvbiBDYW1lcmEoeCwgeSwgem9vbSkge1xuXG4gIC8qKlxuICAqIENhbWVyYSBwb3NpdGlvbi4gRGVmaW5lcyB0aGUgZ2xvYmFsIG9mZnNldCBvZiB0aGUgc2tldGNoLlxuICAqXG4gICogQHByb3BlcnR5IHBvc2l0aW9uXG4gICogQHR5cGUge3A1LlZlY3Rvcn1cbiAgKi9cbiAgdGhpcy5wb3NpdGlvbiA9IHA1LnByb3RvdHlwZS5jcmVhdGVWZWN0b3IoeCx5KTtcblxuICAvKipcbiAgKiBDYW1lcmEgem9vbS4gRGVmaW5lcyB0aGUgZ2xvYmFsIHNjYWxlIG9mIHRoZSBza2V0Y2guXG4gICogQSBzY2FsZSBvZiAxIHdpbGwgYmUgdGhlIG5vcm1hbCBzaXplLiBTZXR0aW5nIGl0IHRvIDIgd2lsbCBtYWtlIGV2ZXJ5dGhpbmdcbiAgKiB0d2ljZSB0aGUgc2l6ZS4gLjUgd2lsbCBtYWtlIGV2ZXJ5dGhpbmcgaGFsZiBzaXplLlxuICAqXG4gICogQHByb3BlcnR5IHpvb21cbiAgKiBAdHlwZSB7TnVtYmVyfVxuICAqL1xuICB0aGlzLnpvb20gPSB6b29tO1xuXG4gIC8qKlxuICAqIE1vdXNlWCB0cmFuc2xhdGVkIHRvIHRoZSBjYW1lcmEgdmlldy4gXG4gICogT2Zmc2V0dGluZyBhbmQgc2NhbGluZyB0aGUgY2FudmFzIHdpbGwgbm90IGNoYW5nZSB0aGUgc3ByaXRlcycgcG9zaXRpb24gXG4gICogbm9yIHRoZSBtb3VzZVggYW5kIG1vdXNlWSB2YXJpYWJsZXMuIFVzZSB0aGlzIHByb3BlcnR5IHRvIHJlYWQgdGhlIG1vdXNlXG4gICogcG9zaXRpb24gaWYgdGhlIGNhbWVyYSBtb3ZlZCBvciB6b29tZWQuXG4gICpcbiAgKiBAcHJvcGVydHkgbW91c2VYXG4gICogQHR5cGUge051bWJlcn1cbiAgKi9cbiAgdGhpcy5tb3VzZVggPSBwNS5wcm90b3R5cGUubW91c2VYO1xuXG4gIC8qKlxuICAqIE1vdXNlWSB0cmFuc2xhdGVkIHRvIHRoZSBjYW1lcmEgdmlldy4gXG4gICogT2Zmc2V0dGluZyBhbmQgc2NhbGluZyB0aGUgY2FudmFzIHdpbGwgbm90IGNoYW5nZSB0aGUgc3ByaXRlcycgcG9zaXRpb24gXG4gICogbm9yIHRoZSBtb3VzZVggYW5kIG1vdXNlWSB2YXJpYWJsZXMuIFVzZSB0aGlzIHByb3BlcnR5IHRvIHJlYWQgdGhlIG1vdXNlXG4gICogcG9zaXRpb24gaWYgdGhlIGNhbWVyYSBtb3ZlZCBvciB6b29tZWQuXG4gICpcbiAgKiBAcHJvcGVydHkgbW91c2VZXG4gICogQHR5cGUge051bWJlcn1cbiAgKi9cbiAgdGhpcy5tb3VzZVkgPSBwNS5wcm90b3R5cGUubW91c2VZO1xuXG4gIC8qKlxuICAqIFRydWUgaWYgdGhlIGNhbWVyYSBpcyBhY3RpdmUuXG4gICogUmVhZCBvbmx5IHByb3BlcnR5LiBVc2UgdGhlIG1ldGhvZHMgQ2FtZXJhLm9uKCkgYW5kIENhbWVyYS5vZmYoKVxuICAqIHRvIGVuYWJsZSBvciBkaXNhYmxlIHRoZSBjYW1lcmEuXG4gICpcbiAgKiBAcHJvcGVydHkgYWN0aXZlXG4gICogQHR5cGUge0Jvb2xlYW59XG4gICovXG4gIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cbiAgLyoqXG4gICogQWN0aXZhdGVzIHRoZSBjYW1lcmEuXG4gICogVGhlIGNhbnZhcyB3aWxsIGJlIGRyYXduIGFjY29yZGluZyB0byB0aGUgY2FtZXJhIHBvc2l0aW9uIGFuZCBzY2FsZSB1bnRpbFxuICAqIENhbWVyYS5vZmYoKSBpcyBjYWxsZWRcbiAgKlxuICAqIEBtZXRob2Qgb25cbiAgKi9cbiAgdGhpcy5vbiA9IGZ1bmN0aW9uKCkge1xuICAgIGlmKCF0aGlzLmFjdGl2ZSlcbiAgICB7XG4gICAgICBjYW1lcmFQdXNoKCk7XG4gICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogRGVhY3RpdmF0ZXMgdGhlIGNhbWVyYS5cbiAgKiBUaGUgY2FudmFzIHdpbGwgYmUgZHJhd24gbm9ybWFsbHksIGlnbm9yaW5nIHRoZSBjYW1lcmEncyBwb3NpdGlvblxuICAqIGFuZCBzY2FsZSB1bnRpbCBDYW1lcmEub24oKSBpcyBjYWxsZWRcbiAgKlxuICAqIEBtZXRob2Qgb2ZmXG4gICovXG4gIHRoaXMub2ZmID0gZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5hY3RpdmUpXG4gICAge1xuICAgICAgY2FtZXJhUG9wKCk7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufTsvL2VuZCBjYW1lcmEgY2xhc3NcblxuLy9jYWxsZWQgcHJlIGRyYXcgYnkgZGVmYXVsdFxuZnVuY3Rpb24gY2FtZXJhUHVzaCgpIHtcbiAgXG4gIC8vYXdrd2FyZCBidXQgbmVjZXNzYXJ5IGluIG9yZGVyIHRvIGhhdmUgdGhlIGNhbWVyYSBhdCB0aGUgY2VudGVyXG4gIC8vb2YgdGhlIGNhbnZhcyBieSBkZWZhdWx0XG4gIGlmKCFjYW1lcmEuaW5pdCAmJiBjYW1lcmEucG9zaXRpb24ueD09MCAmJiBjYW1lcmEucG9zaXRpb24ueSA9PTApXG4gICAge1xuICAgIGNhbWVyYS5wb3NpdGlvbi54PXdpZHRoLzI7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnk9aGVpZ2h0LzI7XG4gICAgY2FtZXJhLmluaXQgPSB0cnVlO1xuICAgIH1cbiAgXG4gIGNhbWVyYS5tb3VzZVggPSBtb3VzZVgrY2FtZXJhLnBvc2l0aW9uLngtd2lkdGgvMjtcbiAgY2FtZXJhLm1vdXNlWSA9IG1vdXNlWStjYW1lcmEucG9zaXRpb24ueS1oZWlnaHQvMjtcblxuICBpZighY2FtZXJhLmFjdGl2ZSlcbiAge1xuICAgIGNhbWVyYS5hY3RpdmUgPSB0cnVlO1xuICAgIHB1c2goKTtcbiAgICBzY2FsZShjYW1lcmEuem9vbSk7XG4gICAgdHJhbnNsYXRlKC1jYW1lcmEucG9zaXRpb24ueCt3aWR0aC8yL2NhbWVyYS56b29tLCAtY2FtZXJhLnBvc2l0aW9uLnkraGVpZ2h0LzIvY2FtZXJhLnpvb20pO1xuICB9XG59XG5cbi8vY2FsbGVkIHBvc3RkcmF3IGJ5IGRlZmF1bHRcbmZ1bmN0aW9uIGNhbWVyYVBvcCgpIHtcbiAgaWYoY2FtZXJhLmFjdGl2ZSlcbiAge1xuICAgIHBvcCgpO1xuICAgIGNhbWVyYS5hY3RpdmUgPSBmYWxzZTtcbiAgfVxufVxuXG5cblxuXG4vKipcbiAgICogSW4gcDUucGxheSBncm91cHMgYXJlIGNvbGxlY3Rpb25zIG9mIHNwcml0ZXMgd2l0aCBzaW1pbGFyIGJlaGF2aW9yLlxuICAgKiBGb3IgZXhhbXBsZSBhIGdyb3VwIG1heSBjb250YWluIGFsbCB0aGUgc3ByaXRlcyBpbiB0aGUgYmFja2dyb3VuZCBcbiAgICogb3IgYWxsIHRoZSBzcHJpdGVzIHRoYXQgXCJraWxsXCIgdGhlIHBsYXllci5cbiAgICpcbiAgICogR3JvdXBzIGFyZSBcImV4dGVuZGVkXCIgYXJyYXlzIGFuZCBpbmhlcml0IGFsbCB0aGVpciBwcm9wZXJ0aWVzIFxuICAgKiBlLmcuIGdyb3VwLmxlbmd0aFxuICAgKiBcbiAgICogU2luY2UgZ3JvdXBzIGNvbnRhaW4gb25seSByZWZlcmVuY2VzLCBhIHNwcml0ZSBjYW4gYmUgaW4gbXVsdGlwbGUgXG4gICAqIGdyb3VwcyBhbmQgZGVsZXRpbmcgYSBncm91cCBkb2Vzbid0IGFmZmVjdCB0aGUgc3ByaXRlcyB0aGVtc2VsdmVzLiBcbiAgICpcbiAgICogU3ByaXRlLnJlbW92ZSgpIHdpbGwgYWxzbyByZW1vdmUgdGhlIHNwcml0ZSBmcm9tIGFsbCB0aGUgZ3JvdXBzIFxuICAgKiBpdCBiZWxvbmdzIHRvLlxuICAgKiBcbiAgICogQGNsYXNzIEdyb3VwXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi8gXG5mdW5jdGlvbiBHcm91cCgpIHtcblxuICAvL2Jhc2ljYWxseSBleHRlbmRpbmcgdGhlIGFycmF5XG4gIHZhciBhcnJheSA9IFtdO1xuXG4gIC8qKlxuICAqIEdldHMgdGhlIG1lbWJlciBhdCBpbmRleCBpLlxuICAqXG4gICogQG1ldGhvZCBnZXRcbiAgKiBAcGFyYW0ge051bWJlcn0gaSBUaGUgaW5kZXggb2YgdGhlIG9iamVjdCB0byByZXRyaWV2ZSBcbiAgKi9cbiAgYXJyYXkuZ2V0ID0gZnVuY3Rpb24oaSkge1xuICAgIHJldHVybiBhcnJheVtpXTtcbiAgfTtcblxuICAvKipcbiAgKiBDaGVja3MgaWYgdGhlIGdyb3VwIGNvbnRhaW5zIGEgc3ByaXRlLlxuICAqXG4gICogQG1ldGhvZCBjb250YWluc1xuICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJpdGUgVGhlIHNwcml0ZSB0byBzZWFyY2hcbiAgKiBAcmV0dXJuIHtOdW1iZXJ9IEluZGV4IG9yIC0xIGlmIG5vdCBmb3VuZFxuICAqL1xuICBhcnJheS5jb250YWlucyA9IGZ1bmN0aW9uKHNwcml0ZSkge1xuICAgIHJldHVybiB0aGlzLmluZGV4T2Yoc3ByaXRlKT4tMTtcbiAgfTtcblxuICAvKipcbiAgKiBTYW1lIGFzIEdyb3VwLmNvbnRhaW5zXG4gICovXG4gIGFycmF5LmluZGV4T2YgPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBpZiAodmlydEVxdWFscyhpdGVtLCBhcnJheVtpXSkpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfTtcblxuICAvKipcbiAgKiBBZGRzIGEgc3ByaXRlIHRvIHRoZSBncm91cC5cbiAgKlxuICAqIEBtZXRob2QgYWRkXG4gICogQHBhcmFtIHtTcHJpdGV9IHNwcml0ZSBUaGUgc3ByaXRlIHRvIGJlIGFkZGVkXG4gICovXG4gIGFycmF5LmFkZCA9IGZ1bmN0aW9uKHMpIHtcblxuICAgIGlmKHMgaW5zdGFuY2VvZiBTcHJpdGUgPT0gZmFsc2UpXG4gICAgICB0aHJvdyhcIkVycm9yOiB5b3UgY2FuIG9ubHkgYWRkIHNwcml0ZXMgdG8gYSBncm91cFwiKTtcbiAgICBlbHNlXG4gICAge1xuICAgICAgYXJyYXkucHVzaChzKTsgLy8gZm9yIGFkZChPYmplY3QpXG4gICAgICBzLmdyb3Vwcy5wdXNoKHRoaXMpO1xuICAgICAgLy9uZXh0IHRvIGRvIGFkZCBhIHJlZmVyZW5jZSB0byB0aGUgZ3JvdXAgaW4gdGhlIHNwcml0ZVxuICAgICAgLy9zbyB3aGVuIEkgcmVtb3ZlIGl0IEkgY2FuIHJlbW92ZSBpdCBmcm9tIGFsbCBncm91cHNcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgKiBTYW1lIGFzIGdyb3VwLmxlbmd0aFxuICAqL1xuICBhcnJheS5zaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGFycmF5Lmxlbmd0aDtcbiAgfTtcbiAgXG4gIC8qKlxuICAqIFJlbW92ZXMgYWxsIHRoZSBzcHJpdGVzIGluIHRoZSBncm91cFxuICAqIGZyb20gdGhlIHNjZW5lLlxuICAqXG4gICogQG1ldGhvZCBjbGVhclxuICAqL1xuICBhcnJheS5yZW1vdmVTcHJpdGVzID0gZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgZm9yKHZhciBpID0gMDsgaTxhcnJheS5sZW5ndGg7IGkrKylcbiAgICAgIGFycmF5W2ldLnJlbW92ZSgpO1xuICAgIFxuICAgIGFycmF5Lmxlbmd0aCA9IDA7XG4gIH1cbiAgXG4gIC8qKlxuICAqIFJlbW92ZXMgYWxsIHJlZmVyZW5jZXMgdG8gdGhlIGdyb3VwLlxuICAqIERvZXMgbm90IHJlbW92ZSB0aGUgYWN0dWFsIHNwcml0ZXMuXG4gICpcbiAgKiBAbWV0aG9kIGNsZWFyXG4gICovXG4gIGFycmF5LmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgYXJyYXkubGVuZ3RoID0gMDtcbiAgfTtcblxuICAvKipcbiAgKiBSZW1vdmVzIGEgc3ByaXRlIGZyb20gdGhlIGdyb3VwLlxuICAqIERvZXMgbm90IHJlbW92ZSB0aGUgYWN0dWFsIHNwcml0ZSwgb25seSB0aGUgYWZmaWxpYXRpb24gKHJlZmVyZW5jZSkuXG4gICpcbiAgKiBAbWV0aG9kIHJlbW92ZVxuICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJpdGUgVGhlIHNwcml0ZSB0byBiZSByZW1vdmVkXG4gICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBzcHJpdGUgd2FzIGZvdW5kIGFuZCByZW1vdmVkXG4gICovXG4gIGFycmF5LnJlbW92ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcblxuICAgIGlmKGl0ZW0gaW5zdGFuY2VvZiBTcHJpdGUgPT0gZmFsc2UpXG4gICAgICB0aHJvdyhcIkVycm9yOiB5b3UgY2FuIG9ubHkgcmVtb3ZlIHNwcml0ZXMgZnJvbSBhIGdyb3VwXCIpOyAgICBcblxuICAgIGl0ZW0gPSB0aGlzLmluZGV4T2YoaXRlbSk7XG4gICAgaWYgKGl0ZW0gPiAtMSkge1xuICAgICAgYXJyYXkuc3BsaWNlKGl0ZW0sIDEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgZ3JvdXAgYXMgc3RhbmRhcmQgYXJyYXkuXG4gICovXG4gIGFycmF5LnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2UoMCk7XG4gIH07XG4gIFxuICAvKipcbiAgKiBSZXR1cm5zIHRoZSBoaWdoZXN0IGRlcHRoIGluIGEgZ3JvdXBcbiAgKlxuICAqIEBtZXRob2QgbWF4RGVwdGhcbiAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBkZXB0aCBvZiB0aGUgc3ByaXRlIGRyYXduIG9uIHRoZSB0b3BcbiAgKi9cbiAgYXJyYXkubWF4RGVwdGggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWF4O1xuICAgIFxuICAgIGlmKGFycmF5Lmxlbmd0aD09MClcbiAgICAgIG1heCA9IDA7XG4gICAgZWxzZVxuICAgICAgbWF4ID0gYXJyYXlbMF0uZGVwdGg7XG4gICAgXG4gICAgZm9yKHZhciBpID0gMDsgaTxhcnJheS5sZW5ndGg7IGkrKylcbiAgICAgIGlmKGFycmF5W2ldLmRlcHRoPm1heClcbiAgICAgICAgbWF4ID0gYXJyYXlbaV0uZGVwdGg7XG4gICAgXG4gICAgcmV0dXJuIG1heDtcbiAgfTtcbiAgXG4gIC8qKlxuICAqIFJldHVybnMgdGhlIGxvd2VzdCBkZXB0aCBpbiBhIGdyb3VwXG4gICpcbiAgKiBAbWV0aG9kIG1pbkRlcHRoXG4gICogQHJldHVybiB7TnVtYmVyfSBUaGUgZGVwdGggb2YgdGhlIHNwcml0ZSBkcmF3biBvbiB0aGUgYm90dG9tXG4gICovXG4gIGFycmF5Lm1pbkRlcHRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1pbjtcbiAgICBcbiAgICBpZihhcnJheS5sZW5ndGg9PTApXG4gICAgICBtaW4gPSA5OTk5OTtcbiAgICBlbHNlXG4gICAgICBtaW4gPSBhcnJheVswXS5kZXB0aDtcbiAgICBcbiAgICBmb3IodmFyIGkgPSAwOyBpPGFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgaWYoYXJyYXlbaV0uZGVwdGg8bWluKVxuICAgICAgICBtaW4gPSBhcnJheVtpXS5kZXB0aDtcbiAgICBcbiAgICByZXR1cm4gbWluO1xuICB9O1xuICBcbiAgLyoqXG4gICogRHJhd3MgYWxsIHRoZSBzcHJpdGVzIGluIHRoZSBncm91cC5cbiAgKlxuICAqIEBtZXRob2QgZHJhd1xuICAqL1xuICBhcnJheS5kcmF3ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvL3NvcnQgYnkgZGVwdGhcbiAgICB0aGlzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IFxuICAgICAgcmV0dXJuIGEuZGVwdGggLSBiLmRlcHRoO1xuICAgIH0pO1xuXG4gICAgZm9yKHZhciBpID0gMDsgaTx0aGlzLnNpemUoKTsgaSsrKVxuICAgIHtcbiAgICAgIHRoaXMuZ2V0KGkpLmRpc3BsYXkoKTtcbiAgICB9XG4gIH1cblxuICAvL2ludGVybmFsIHVzZVxuICBmdW5jdGlvbiB2aXJ0RXF1YWxzKG9iaiwgb3RoZXIpIHtcbiAgICBpZiAob2JqID09PSBudWxsIHx8IG90aGVyID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gKG9iaiA9PT0gbnVsbCkgJiYgKG90aGVyID09PSBudWxsKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiAob2JqKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG9iaiA9PT0gb3RoZXI7XG4gICAgfVxuICAgIGlmICh0eXBlb2Yob2JqKSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIG9iaiA9PT0gb3RoZXI7XG4gICAgfVxuICAgIGlmIChvYmouZXF1YWxzIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiBvYmouZXF1YWxzKG90aGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iaiA9PT0gb3RoZXI7XG4gIH1cblxuXG4gIC8qKlxuICAqIENoZWNrcyBpZiB0aGUgdGhlIGdyb3VwIGlzIG92ZXJsYXBwaW5nIGFub3RoZXIgZ3JvdXAuXG4gICogVGhlIGNoZWNrIGlzIHBlcmZvcm1lZCB1c2luZyB0aGUgY29sbGlkZXJzLiBJZiBjb2xsaWRlcnMgYXJlIG5vdCBzZXRcbiAgKiB0aGV5IHdpbGwgYmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IGZyb20gdGhlIGltYWdlL2FuaW1hdGlvbiBib3VuZGluZyBib3guXG4gICpcbiAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgdG8gcGVyZm9ybSBhZGRpdGlvbmFsIG9wZXJhdGlvbnNcbiAgKiB3aGVuIHRoZSBvdmVybGFwIG9jY291cnMuXG4gICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIHNpbmdsZSBzcHJpdGUgb3ZlcmxhcHBpbmcuIFxuICAqIFRoZSBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIGFyZSByZXNwZWN0aXZlbHkgdGhlXG4gICogbWVtYmVyIG9mIHRoZSBjdXJyZW50IGdyb3VwIGFuZCB0aGUgbWVtYmVyIG9mIHRoZSBncm91cCBwYXNzZWQgYXMgcGFyYW1ldGVyLlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiA8Y29kZT5cbiAgKiBzcHJpdGUub3ZlcmxhcChvdGhlclNwcml0ZSwgZXhwbG9zaW9uKTtcbiAgKlxuICAqIGZ1bmN0aW9uIGV4cGxvc2lvbihzcHJpdGVBLCBzcHJpdGVCKSB7XG4gICogc3ByaXRlQS5yZW1vdmUoKTtcbiAgKiBzcHJpdGVCLnNjb3JlKys7XG4gICogfVxuICAqIDwvY29kZT5cbiAgKlxuICAqIEBtZXRob2Qgb3ZlcmxhcFxuICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgR3JvdXAgdG8gY2hlY2sgYWdhaW5zdCB0aGUgY3VycmVudCBvbmVcbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgaWYgb3ZlcmxhcCBpcyBwb3NpdGl2ZVxuICAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIG92ZXJsYXBwaW5nXG4gICovXG4gIGFycmF5Lm92ZXJsYXAgPSBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaTx0aGlzLnNpemUoKTsgaSsrKVxuICAgICAgdGhpcy5nZXQoaSkuQUFCQm9wcyhcIm92ZXJsYXBcIiwgdGFyZ2V0LCBjYWxsYmFjayk7XG4gIH1cblxuXG4gIC8qKlxuICAqIENoZWNrcyBpZiB0aGUgdGhlIGdyb3VwIGlzIG92ZXJsYXBwaW5nIGFub3RoZXIgZ3JvdXAuXG4gICogSWYgdGhlIG92ZXJsYXAgaXMgcG9zaXRpdmUgdGhlIHNwcml0ZXMgaW4gdGhlIGdyb3VwIHdpbGwgYmUgZGlzcGxhY2VkIFxuICAqIGJ5IHRoZSBjb2xsaWRpbmcgb25lIHRvIHRoZSBjbG9zZXN0IG5vbi1vdmVybGFwcGluZyBwb3NpdGlvbnMuIFxuICAqIFxuICAqIFRoZSBjaGVjayBpcyBwZXJmb3JtZWQgdXNpbmcgdGhlIGNvbGxpZGVycy4gSWYgY29sbGlkZXJzIGFyZSBub3Qgc2V0XG4gICogdGhleSB3aWxsIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSBmcm9tIHRoZSBpbWFnZS9hbmltYXRpb24gYm91bmRpbmcgYm94LlxuICAqXG4gICogQSBjYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgc3BlY2lmaWVkIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBvcGVyYXRpb25zXG4gICogd2hlbiB0aGUgb3ZlcmxhcCBvY2NvdXJzLlxuICAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBzaW5nbGUgc3ByaXRlIG92ZXJsYXBwaW5nLiBcbiAgKiBUaGUgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiBhcmUgcmVzcGVjdGl2ZWx5IHRoZVxuICAqIG1lbWJlciBvZiB0aGUgY3VycmVudCBncm91cCBhbmQgdGhlIG1lbWJlciBvZiB0aGUgZ3JvdXAgcGFzc2VkIGFzIHBhcmFtZXRlci5cbiAgKlxuICAqIEBleGFtcGxlXG4gICogPGNvZGU+XG4gICogc3ByaXRlLm92ZXJsYXAob3RoZXJTcHJpdGUsIGV4cGxvc2lvbik7XG4gICpcbiAgKiBmdW5jdGlvbiBleHBsb3Npb24oc3ByaXRlQSwgc3ByaXRlQikge1xuICAqIHNwcml0ZUEucmVtb3ZlKCk7XG4gICogc3ByaXRlQi5zY29yZSsrO1xuICAqIH1cbiAgKiA8L2NvZGU+XG4gICpcbiAgKiBAbWV0aG9kIG92ZXJsYXBcbiAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IEdyb3VwIHRvIGNoZWNrIGFnYWluc3QgdGhlIGN1cnJlbnQgb25lXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGlmIG92ZXJsYXAgaXMgcG9zaXRpdmVcbiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiBvdmVybGFwcGluZ1xuICAqL1xuICBhcnJheS5jb2xsaWRlID0gZnVuY3Rpb24odGFyZ2V0LCBjYWxsYmFjaykge1xuICAgIGZvcih2YXIgaSA9IDA7IGk8dGhpcy5zaXplKCk7IGkrKylcbiAgICAgIHRoaXMuZ2V0KGkpLkFBQkJvcHMoXCJjb2xsaWRlXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSB0aGUgZ3JvdXAgaXMgb3ZlcmxhcHBpbmcgYW5vdGhlciBncm91cC5cbiAgKiBJZiB0aGUgb3ZlcmxhcCBpcyBwb3NpdGl2ZSB0aGUgc3ByaXRlcyBpbiB0aGUgZ3JvdXAgd2lsbCBkaXNwbGFjZSBcbiAgKiB0aGUgY29sbGlkaW5nIG9uZXMgdG8gdGhlIGNsb3Nlc3Qgbm9uLW92ZXJsYXBwaW5nIHBvc2l0aW9ucy4gXG4gICogXG4gICogVGhlIGNoZWNrIGlzIHBlcmZvcm1lZCB1c2luZyB0aGUgY29sbGlkZXJzLiBJZiBjb2xsaWRlcnMgYXJlIG5vdCBzZXRcbiAgKiB0aGV5IHdpbGwgYmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IGZyb20gdGhlIGltYWdlL2FuaW1hdGlvbiBib3VuZGluZyBib3guXG4gICpcbiAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgdG8gcGVyZm9ybSBhZGRpdGlvbmFsIG9wZXJhdGlvbnNcbiAgKiB3aGVuIHRoZSBvdmVybGFwIG9jY291cnMuXG4gICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIHNpbmdsZSBzcHJpdGUgb3ZlcmxhcHBpbmcuIFxuICAqIFRoZSBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIGFyZSByZXNwZWN0aXZlbHkgdGhlXG4gICogbWVtYmVyIG9mIHRoZSBjdXJyZW50IGdyb3VwIGFuZCB0aGUgbWVtYmVyIG9mIHRoZSBncm91cCBwYXNzZWQgYXMgcGFyYW1ldGVyLlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiA8Y29kZT5cbiAgKiBzcHJpdGUuZGlzcGxhY2Uob3RoZXJTcHJpdGUsIGV4cGxvc2lvbik7XG4gICpcbiAgKiBmdW5jdGlvbiBleHBsb3Npb24oc3ByaXRlQSwgc3ByaXRlQikge1xuICAqIHNwcml0ZUEucmVtb3ZlKCk7XG4gICogc3ByaXRlQi5zY29yZSsrO1xuICAqIH1cbiAgKiA8L2NvZGU+XG4gICpcbiAgKiBAbWV0aG9kIGRpc3BsYWNlXG4gICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBHcm91cCB0byBjaGVjayBhZ2FpbnN0IHRoZSBjdXJyZW50IG9uZVxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBpZiBvdmVybGFwIGlzIHBvc2l0aXZlXG4gICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgb3ZlcmxhcHBpbmdcbiAgKi9cbiAgYXJyYXkuZGlzcGxhY2UgPSBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaTx0aGlzLnNpemUoKTsgaSsrKVxuICAgICAgdGhpcy5nZXQoaSkuQUFCQm9wcyhcImRpc3BsYWNlXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICogQ2hlY2tzIGlmIHRoZSB0aGUgZ3JvdXAgaXMgb3ZlcmxhcHBpbmcgYW5vdGhlciBncm91cC5cbiAgKiBJZiB0aGUgb3ZlcmxhcCBpcyBwb3NpdGl2ZSB0aGUgc3ByaXRlcyB3aWxsIGJvdW5jZSBhZmZlY3RpbmcgZWFjaFxuICAqIG90aGVyJ3MgdHJhamVjdG9yaWVzIGRlcGVuZGluZyBvbiB0aGVpciAudmVsb2NpdHksIC5tYXNzIGFuZCAucmVzdGl0dXRpb25cbiAgKiBcbiAgKiBUaGUgY2hlY2sgaXMgcGVyZm9ybWVkIHVzaW5nIHRoZSBjb2xsaWRlcnMuIElmIGNvbGxpZGVycyBhcmUgbm90IHNldFxuICAqIHRoZXkgd2lsbCBiZSBjcmVhdGVkIGF1dG9tYXRpY2FsbHkgZnJvbSB0aGUgaW1hZ2UvYW5pbWF0aW9uIGJvdW5kaW5nIGJveC5cbiAgKlxuICAqIEEgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHNwZWNpZmllZCB0byBwZXJmb3JtIGFkZGl0aW9uYWwgb3BlcmF0aW9uc1xuICAqIHdoZW4gdGhlIG92ZXJsYXAgb2Njb3Vycy5cbiAgKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggc2luZ2xlIHNwcml0ZSBvdmVybGFwcGluZy4gXG4gICogVGhlIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gYXJlIHJlc3BlY3RpdmVseSB0aGVcbiAgKiBtZW1iZXIgb2YgdGhlIGN1cnJlbnQgZ3JvdXAgYW5kIHRoZSBtZW1iZXIgb2YgdGhlIGdyb3VwIHBhc3NlZCBhcyBwYXJhbWV0ZXIuXG4gICpcbiAgKiBAZXhhbXBsZVxuICAqIDxjb2RlPlxuICAqIHNwcml0ZS5ib3VuY2Uob3RoZXJTcHJpdGUsIGV4cGxvc2lvbik7XG4gICpcbiAgKiBmdW5jdGlvbiBleHBsb3Npb24oc3ByaXRlQSwgc3ByaXRlQikge1xuICAqIHNwcml0ZUEucmVtb3ZlKCk7XG4gICogc3ByaXRlQi5zY29yZSsrO1xuICAqIH1cbiAgKiA8L2NvZGU+XG4gICpcbiAgKiBAbWV0aG9kIGJvdW5jZVxuICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgR3JvdXAgdG8gY2hlY2sgYWdhaW5zdCB0aGUgY3VycmVudCBvbmVcbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgaWYgb3ZlcmxhcCBpcyBwb3NpdGl2ZVxuICAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIG92ZXJsYXBwaW5nXG4gICovXG4gIGFycmF5LmJvdW5jZSA9IGZ1bmN0aW9uKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpPHRoaXMuc2l6ZSgpOyBpKyspXG4gICAgICB0aGlzLmdldChpKS5BQUJCb3BzKFwiYm91bmNlXCIsIHRhcmdldCwgY2FsbGJhY2spO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuXG4vL2NpcmNsZSBjb2xsaWRlciAtIHVzZWQgaW50ZXJuYWxseVxuZnVuY3Rpb24gQ2lyY2xlQ29sbGlkZXIoX2NlbnRlciwgX3JhZGl1cywgX29mZnNldCkge1xuICB0aGlzLmNlbnRlciA9IF9jZW50ZXI7XG4gIHRoaXMucmFkaXVzID0gX3JhZGl1cztcbiAgdGhpcy5vcmlnaW5hbFJhZGl1cyA9IF9yYWRpdXM7XG4gIFxuICBpZihfb2Zmc2V0ID09IHVuZGVmaW5lZClcbiAgICB0aGlzLm9mZnNldCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICBlbHNlXG4gICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0O1xuICB0aGlzLmV4dGVudHMgPSBjcmVhdGVWZWN0b3IoX3JhZGl1cyoyLCBfcmFkaXVzKjIpO1xuICBcbiAgdGhpcy5kcmF3ID0gZnVuY3Rpb24oY29sKVxuICB7XG4gICAgbm9GaWxsKCk7XG4gICAgc3Ryb2tlKDAsMjU1LDApO1xuICAgIHJlY3RNb2RlKENFTlRFUik7XG4gICAgZWxsaXBzZSh0aGlzLmNlbnRlci54K3RoaXMub2Zmc2V0LngsIHRoaXMuY2VudGVyLnkrdGhpcy5vZmZzZXQueSwgdGhpcy5yYWRpdXMqMiwgdGhpcy5yYWRpdXMqMik7XG4gIH1cblxuICAvL3Nob3VsZCBiZSBjYWxsZWQgb25seSBmb3IgY2lyY2xlIHZzIGNpcmNsZVxuICB0aGlzLm92ZXJsYXAgPSBmdW5jdGlvbihvdGhlcikgXG4gIHtcbiAgICAvL3NxdWFyZSBkaXN0XG4gICAgdmFyIHIgPSB0aGlzLnJhZGl1cyArIG90aGVyLnJhZGl1cztcbiAgICByICo9IHI7XG4gICAgdmFyIHNxRGlzdCA9IHBvdyh0aGlzLmNlbnRlci54IC0gb3RoZXIuY2VudGVyLngsIDIpICsgcG93KHRoaXMuY2VudGVyLnkgLSBvdGhlci5jZW50ZXIueSwgMik7XG4gICAgcmV0dXJuIHIgPiBzcURpc3Q7XG4gIH1cblxuICAvL3Nob3VsZCBiZSBjYWxsZWQgb25seSBmb3IgY2lyY2xlIHZzIGNpcmNsZVxuICB0aGlzLmNvbGxpZGUgPSBmdW5jdGlvbihvdGhlcikgXG4gIHtcbiAgICAgIFxuICAgIGlmKHRoaXMub3ZlcmxhcChvdGhlcikpXG4gICAge1xuICAgICAgdmFyIGEgPSBhdGFuMih0aGlzLmNlbnRlci55LW90aGVyLmNlbnRlci55LHRoaXMuY2VudGVyLngtb3RoZXIuY2VudGVyLngpO1xuICAgICAgdmFyIHJhZGlpID0gdGhpcy5yYWRpdXMrb3RoZXIucmFkaXVzO1xuICAgICAgdmFyIGludGVyc2VjdGlvbiA9IGFicyhyYWRpaSAtIGRpc3QodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgb3RoZXIuY2VudGVyLngsIG90aGVyLmNlbnRlci55KSk7XG5cbiAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSBjcmVhdGVWZWN0b3IoY29zKGEpKmludGVyc2VjdGlvbiwgc2luKGEpKmludGVyc2VjdGlvbik7XG4gICAgICBcbiAgICAgIHJldHVybiBkaXNwbGFjZW1lbnQ7XG4gICAgfVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgfVxuXG4gIHRoaXMuc2l6ZSA9IGZ1bmN0aW9uKClcbiAge1xuICAgIHJldHVybiBjcmVhdGVWZWN0b3IodGhpcy5yYWRpdXMqMiwgdGhpcy5yYWRpdXMqMik7XG4gIH1cblxuICB0aGlzLmxlZnQgPSBmdW5jdGlvbigpXG4gIHtcbiAgICByZXR1cm4gdGhpcy5jZW50ZXIueCt0aGlzLm9mZnNldC54IC0gdGhpcy5yYWRpdXM7XG4gIH1cblxuICB0aGlzLnJpZ2h0ID0gZnVuY3Rpb24oKVxuICB7XG4gICAgcmV0dXJuIHRoaXMuY2VudGVyLngrdGhpcy5vZmZzZXQueCArIHRoaXMucmFkaXVzO1xuICB9XG5cbiAgdGhpcy50b3AgPSBmdW5jdGlvbigpXG4gIHtcbiAgICByZXR1cm4gdGhpcy5jZW50ZXIueSt0aGlzLm9mZnNldC55IC0gdGhpcy5yYWRpdXM7XG4gIH1cbiAgXG4gIHRoaXMuYm90dG9tID0gZnVuY3Rpb24oKVxuICB7XG4gICAgcmV0dXJuIHRoaXMuY2VudGVyLnkrdGhpcy5vZmZzZXQueSArIHRoaXMucmFkaXVzO1xuICB9XG4gIFxuXG5cbn1cblxuLy9heGlzIGFsaWduZWQgYm91bmRpbmcgYm94IC0gZXh0ZW50cyBhcmUgdGhlIGhhbGYgc2l6ZXMgLSB1c2VkIGludGVybmFsbHlcbmZ1bmN0aW9uIEFBQkIoX2NlbnRlciwgX2V4dGVudHMsIF9vZmZzZXQpIHtcbiAgdGhpcy5jZW50ZXIgPSBfY2VudGVyO1xuICB0aGlzLmV4dGVudHMgPSBfZXh0ZW50cztcbiAgdGhpcy5vcmlnaW5hbEV4dGVudHMgPSBfZXh0ZW50cy5jb3B5KCk7XG4gIFxuICBpZihfb2Zmc2V0ID09IHVuZGVmaW5lZClcbiAgICB0aGlzLm9mZnNldCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICBlbHNlXG4gICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0O1xuXG4gIHRoaXMubWluID0gZnVuY3Rpb24oKVxuICB7XG4gICAgcmV0dXJuIGNyZWF0ZVZlY3Rvcih0aGlzLmNlbnRlci54K3RoaXMub2Zmc2V0LnggLSB0aGlzLmV4dGVudHMueCwgdGhpcy5jZW50ZXIueSt0aGlzLm9mZnNldC55IC0gdGhpcy5leHRlbnRzLnkpO1xuICB9XG5cbiAgdGhpcy5tYXggPSBmdW5jdGlvbigpXG4gIHtcbiAgICByZXR1cm4gY3JlYXRlVmVjdG9yKHRoaXMuY2VudGVyLngrdGhpcy5vZmZzZXQueCArIHRoaXMuZXh0ZW50cy54LCB0aGlzLmNlbnRlci55K3RoaXMub2Zmc2V0LnkgKyB0aGlzLmV4dGVudHMueSk7XG4gIH1cblxuICB0aGlzLnJpZ2h0ID0gZnVuY3Rpb24oKVxuICB7XG4gICAgcmV0dXJuIHRoaXMuY2VudGVyLngrdGhpcy5vZmZzZXQueCArIHRoaXMuZXh0ZW50cy54LzI7XG4gIH1cblxuICB0aGlzLmxlZnQgPSBmdW5jdGlvbigpXG4gIHtcbiAgICByZXR1cm4gdGhpcy5jZW50ZXIueCt0aGlzLm9mZnNldC54IC0gdGhpcy5leHRlbnRzLngvMjtcbiAgfVxuXG4gIHRoaXMudG9wID0gZnVuY3Rpb24oKVxuICB7XG4gICAgcmV0dXJuIHRoaXMuY2VudGVyLnkrdGhpcy5vZmZzZXQueSAtIHRoaXMuZXh0ZW50cy55LzI7XG4gIH1cblxuICB0aGlzLmJvdHRvbSA9IGZ1bmN0aW9uKClcbiAge1xuICAgIHJldHVybiB0aGlzLmNlbnRlci55K3RoaXMub2Zmc2V0LnkgKyB0aGlzLmV4dGVudHMueS8yO1xuICB9XG5cbiAgdGhpcy5zaXplID0gZnVuY3Rpb24oKVxuICB7XG4gICAgcmV0dXJuIGNyZWF0ZVZlY3Rvcih0aGlzLmV4dGVudHMueCAqIDIsIHRoaXMuZXh0ZW50cy55ICogMik7XG4gIH1cblxuICB0aGlzLnJvdGF0ZSA9IGZ1bmN0aW9uKHIpXG4gIHtcbiAgICAvL3JvdGF0ZSB0aGUgYmJveFxuICAgIHZhciB0ID0gcmFkaWFucyhyKTtcblxuICAgIHZhciB3MiA9IHRoaXMuZXh0ZW50cy54ICogYWJzKGNvcyh0KSkgKyB0aGlzLmV4dGVudHMueSAqIGFicyhzaW4odCkpXG4gICAgdmFyIGgyID0gdGhpcy5leHRlbnRzLnggKiBhYnMoc2luKHQpKSArIHRoaXMuZXh0ZW50cy55ICogYWJzKGNvcyh0KSk7XG5cbiAgICB0aGlzLmV4dGVudHMueCA9IHcyO1xuICAgIHRoaXMuZXh0ZW50cy55ID0gaDI7XG5cbiAgfVxuXG4gIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKGNvbClcbiAge1xuICAgIC8vZmlsbChjb2wpO1xuICAgIG5vRmlsbCgpO1xuICAgIHN0cm9rZSgwLDI1NSwwKTtcbiAgICByZWN0TW9kZShDRU5URVIpO1xuICAgIHJlY3QodGhpcy5jZW50ZXIueCt0aGlzLm9mZnNldC54LCB0aGlzLmNlbnRlci55K3RoaXMub2Zmc2V0LnksIHRoaXMuc2l6ZSgpLngvMiwgdGhpcy5zaXplKCkueS8yKTtcbiAgfVxuXG4gIHRoaXMub3ZlcmxhcCA9IGZ1bmN0aW9uKG90aGVyKVxuICB7XG4gICAgLy9ib3ggdnMgYm94XG4gICAgaWYob3RoZXIgaW5zdGFuY2VvZiBBQUJCKVxuICAgIHtcbiAgICAgIHZhciBtZCA9IG90aGVyLm1pbmtvd3NraURpZmZlcmVuY2UodGhpcyk7XG5cbiAgICAgIGlmIChtZC5taW4oKS54IDw9IDAgJiZcbiAgICAgICAgICBtZC5tYXgoKS54ID49IDAgJiZcbiAgICAgICAgICBtZC5taW4oKS55IDw9IDAgJiZcbiAgICAgICAgICBtZC5tYXgoKS55ID49IDApXG4gICAgICB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vYm94IHZzIGNpcmNsZVxuICAgIGVsc2UgaWYob3RoZXIgaW5zdGFuY2VvZiBDaXJjbGVDb2xsaWRlcikgXG4gICAge1xuICAgICAgXG4gICAgICAvL2ZpbmQgY2xvc2VzdCBwb2ludCB0byB0aGUgY2lyY2xlIG9uIHRoZSBib3hcbiAgICAgIHZhciBwdCA9IGNyZWF0ZVZlY3RvcihvdGhlci5jZW50ZXIueCwgb3RoZXIuY2VudGVyLnkpO1xuXG4gICAgICAvL0kgZG9uJ3Qga25vdyB3aGF0J3MgZ29pbmcgbyB0cnkgdG8gdHJhY2UgYSBsaW5lIGZyb20gY2VudGVycyB0byBzZWVcbiAgICAgIGlmKCBvdGhlci5jZW50ZXIueCA8IHRoaXMubGVmdCgpICkgXG4gICAgICAgIHB0LnggPSB0aGlzLmxlZnQoKTtcbiAgICAgIGVsc2UgaWYoIG90aGVyLmNlbnRlci54ID4gdGhpcy5yaWdodCgpKSBcbiAgICAgICAgcHQueCA9IHRoaXMucmlnaHQoKTtcblxuICAgICAgaWYoIG90aGVyLmNlbnRlci55IDwgdGhpcy50b3AoKSApIFxuICAgICAgICBwdC55ID0gdGhpcy50b3AoKTtcbiAgICAgIGVsc2UgaWYoIG90aGVyLmNlbnRlci55ID4gdGhpcy5ib3R0b20oKSkgXG4gICAgICAgIHB0LnkgPSB0aGlzLmJvdHRvbSgpO1xuXG4gICAgICB2YXIgZGlzdGFuY2UgPSBwdC5kaXN0KG90aGVyLmNlbnRlcik7XG5cbiAgICAgIHJldHVybiBkaXN0YW5jZTxvdGhlci5yYWRpdXM7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5jb2xsaWRlID0gZnVuY3Rpb24ob3RoZXIpXG4gIHtcblxuICAgIGlmKG90aGVyIGluc3RhbmNlb2YgQUFCQilcbiAgICB7XG4gICAgICB2YXIgbWQgPSBvdGhlci5taW5rb3dza2lEaWZmZXJlbmNlKHRoaXMpO1xuXG4gICAgICBpZiAobWQubWluKCkueCA8PSAwICYmXG4gICAgICAgICAgbWQubWF4KCkueCA+PSAwICYmXG4gICAgICAgICAgbWQubWluKCkueSA8PSAwICYmXG4gICAgICAgICAgbWQubWF4KCkueSA+PSAwKVxuICAgICAge1xuICAgICAgICB2YXIgYm91bmRzUG9pbnQgPSBtZC5jbG9zZXN0UG9pbnRPbkJvdW5kc1RvUG9pbnQoY3JlYXRlVmVjdG9yKDAsMCkpO1xuXG4gICAgICAgIHJldHVybiBib3VuZHNQb2ludDtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZlY3RvcigwLDApO1xuICAgIH1cbiAgICAvL2JveCB2cyBjaXJjbGVcbiAgICBlbHNlIGlmKG90aGVyIGluc3RhbmNlb2YgQ2lyY2xlQ29sbGlkZXIpIFxuICAgIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgIC8vZmluZCBjbG9zZXN0IHBvaW50IHRvIHRoZSBjaXJjbGUgb24gdGhlIGJveFxuICAgICAgdmFyIHB0ID0gY3JlYXRlVmVjdG9yKG90aGVyLmNlbnRlci54LCBvdGhlci5jZW50ZXIueSk7XG5cbiAgICAgIC8vSSBkb24ndCBrbm93IHdoYXQncyBnb2luZyBvIHRyeSB0byB0cmFjZSBhIGxpbmUgZnJvbSBjZW50ZXJzIHRvIHNlZVxuICAgICAgaWYoIG90aGVyLmNlbnRlci54IDwgdGhpcy5sZWZ0KCkgKSBcbiAgICAgICAgcHQueCA9IHRoaXMubGVmdCgpO1xuICAgICAgZWxzZSBpZiggb3RoZXIuY2VudGVyLnggPiB0aGlzLnJpZ2h0KCkpIFxuICAgICAgICBwdC54ID0gdGhpcy5yaWdodCgpO1xuXG4gICAgICBpZiggb3RoZXIuY2VudGVyLnkgPCB0aGlzLnRvcCgpICkgXG4gICAgICAgIHB0LnkgPSB0aGlzLnRvcCgpO1xuICAgICAgZWxzZSBpZiggb3RoZXIuY2VudGVyLnkgPiB0aGlzLmJvdHRvbSgpKSBcbiAgICAgICAgcHQueSA9IHRoaXMuYm90dG9tKCk7XG4gICAgICBcbiAgICAgIFxuICAgICAgdmFyIGRpc3RhbmNlID0gcHQuZGlzdChvdGhlci5jZW50ZXIpO1xuICAgICAgdmFyIGE7XG4gICAgICBcbiAgICAgIGlmKGRpc3RhbmNlPG90aGVyLnJhZGl1cylcbiAgICAgIHtcbiAgICAgICAgLy9yZWNsYW1wIHBvaW50XG4gICAgICAgIGlmKHB0LnggPT09IG90aGVyLmNlbnRlci54ICYmIHB0LnkgPT09IG90aGVyLmNlbnRlci55KVxuICAgICAgICB7XG4gICAgICAgICAgdmFyIHhPdmVybGFwID0gcHQueCAtIHRoaXMuY2VudGVyLng7XG4gICAgICAgICAgdmFyIHlPdmVybGFwID0gcHQueSAtIHRoaXMuY2VudGVyLnk7XG4gICAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAgIGlmKGFicyh4T3ZlcmxhcCkgPCBhYnMoeU92ZXJsYXApKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmKHhPdmVybGFwID4gMCApIFxuICAgICAgICAgICAgICBwdC54ID0gdGhpcy5yaWdodCgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBwdC54ID0gdGhpcy5sZWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZih5T3ZlcmxhcCA8IDAgKSBcbiAgICAgICAgICAgICAgcHQueSA9IHRoaXMudG9wKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIHB0LnkgPSB0aGlzLmJvdHRvbSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGEgPSBhdGFuMihvdGhlci5jZW50ZXIueS1wdC55LCBvdGhlci5jZW50ZXIueC1wdC54KTtcblxuICAgICAgICAgIC8vZml4IGV4Y2VwdGlvbnNcbiAgICAgICAgICBpZihhPT0wKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmKHB0LnggPT0gdGhpcy5yaWdodCgpKSBhID0gUEk7XG4gICAgICAgICAgICBpZihwdC55ID09IHRoaXMudG9wKCkpIGEgPSBQSS8yO1xuICAgICAgICAgICAgaWYocHQueSA9PSB0aGlzLmJvdHRvbSgpKSBhID0gLVBJLzI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgIC8vYW5nbGUgYncgcG9pbnQgYW5kIGNlbnRlclxuICAgICAgICAgIGEgPSBhdGFuMihwdC55LW90aGVyLmNlbnRlci55LCBwdC54LW90aGVyLmNlbnRlci54KTtcbiAgICAgICAgICAvL3Byb2plY3QgdGhlIG5vcm1hbCAobGluZSBiZXR3ZWVuIHB0IGFuZCBjZW50ZXIpIG9udG8gdGhlIGNpcmNsZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGQgPSBjcmVhdGVWZWN0b3IocHQueC1vdGhlci5jZW50ZXIueCwgcHQueS1vdGhlci5jZW50ZXIueSk7XG4gICAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSBjcmVhdGVWZWN0b3IoY29zKGEpKm90aGVyLnJhZGl1cy1kLngsIHNpbihhKSpvdGhlci5yYWRpdXMtZC55KTtcblxuICAgICAgICAvL2lmKHB0LnggPT09IG90aGVyLmNlbnRlci54ICYmIHB0LnkgPT09IG90aGVyLmNlbnRlci55KVxuICAgICAgICAvL2Rpc3BsYWNlbWVudCA9IGRpc3BsYWNlbWVudC5tdWx0KC0xKTtcblxuICAgICAgICByZXR1cm4gZGlzcGxhY2VtZW50O1xuICAgICAgICAvL3JldHVybiBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZlY3RvcigwLDApO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMubWlua293c2tpRGlmZmVyZW5jZSA9IGZ1bmN0aW9uKG90aGVyKVxuICB7XG4gICAgdmFyIHRvcExlZnQgPSB0aGlzLm1pbigpLnN1YihvdGhlci5tYXgoKSk7XG4gICAgdmFyIGZ1bGxTaXplID0gdGhpcy5zaXplKCkuYWRkKG90aGVyLnNpemUoKSk7XG4gICAgcmV0dXJuIG5ldyBBQUJCKHRvcExlZnQuYWRkKGZ1bGxTaXplLmRpdigyKSksIGZ1bGxTaXplLmRpdigyKSk7XG4gIH1cblxuXG4gIHRoaXMuY2xvc2VzdFBvaW50T25Cb3VuZHNUb1BvaW50ID0gZnVuY3Rpb24ocG9pbnQpXG4gIHtcbiAgICAvLyB0ZXN0IHggZmlyc3RcbiAgICB2YXIgbWluRGlzdCA9IGFicyhwb2ludC54IC0gdGhpcy5taW4oKS54KTtcbiAgICB2YXIgYm91bmRzUG9pbnQgPSBjcmVhdGVWZWN0b3IodGhpcy5taW4oKS54LCBwb2ludC55KTtcblxuICAgIGlmIChhYnModGhpcy5tYXgoKS54IC0gcG9pbnQueCkgPCBtaW5EaXN0KVxuICAgIHtcbiAgICAgIG1pbkRpc3QgPSBhYnModGhpcy5tYXgoKS54IC0gcG9pbnQueCk7XG4gICAgICBib3VuZHNQb2ludCA9IGNyZWF0ZVZlY3Rvcih0aGlzLm1heCgpLngsIHBvaW50LnkpO1xuICAgIH1cblxuICAgIGlmIChhYnModGhpcy5tYXgoKS55IC0gcG9pbnQueSkgPCBtaW5EaXN0KVxuICAgIHtcbiAgICAgIG1pbkRpc3QgPSBhYnModGhpcy5tYXgoKS55IC0gcG9pbnQueSk7XG4gICAgICBib3VuZHNQb2ludCA9IGNyZWF0ZVZlY3Rvcihwb2ludC54LCB0aGlzLm1heCgpLnkpO1xuICAgIH1cblxuICAgIGlmIChhYnModGhpcy5taW4oKS55IC0gcG9pbnQueSkgPCBtaW5EaXN0KVxuICAgIHtcbiAgICAgIG1pbkRpc3QgPSBhYnModGhpcy5taW4ueSAtIHBvaW50LnkpO1xuICAgICAgYm91bmRzUG9pbnQgPSBjcmVhdGVWZWN0b3IocG9pbnQueCwgdGhpcy5taW4oKS55KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm91bmRzUG9pbnQ7XG4gIH1cblxuXG59Ly9lbmQgQUFCQlxuXG5cblxuLyoqXG4gICAqIEFuIEFuaW1hdGlvbiBvYmplY3QgY29udGFpbnMgYSBzZXJpZXMgb2YgaW1hZ2VzIChwNS5JbWFnZSkgdGhhdFxuICAgKiBjYW4gYmUgZGlzcGxheWVkIHNlcXVlbnRpYWxseS5cbiAgICogXG4gICAqIEFsbCBmaWxlcyBtdXN0IGJlIHBuZyBpbWFnZXMuIFlvdSBtdXN0IGluY2x1ZGUgdGhlIGRpcmVjdG9yeSBmcm9tIHRoZSBza2V0Y2ggcm9vdCwgXG4gICAqIGFuZCB0aGUgZXh0ZW5zaW9uIC5wbmdcbiAgICpcbiAgICogQSBzcHJpdGUgY2FuIGhhdmUgbXVsdGlwbGUgbGFiZWxlZCBhbmltYXRpb25zLCBzZWUgU3ByaXRlLmFkZEFuaW1hdGlvblxuICAgKiBhbmQgU3ByaXRlLmNoYW5nZUFuaW1hdGlvbiwgaG93ZXZlciBhbiBhbmltYXRpb24gY2FuIGJlIHVzZWQgaW5kZXBlbmRlbnRseS5cbiAgICogXG4gICAqIEFuIGFuaW1hdGlvbiBjYW4gYmUgY3JlYXRlZCBlaXRoZXIgYnkgcGFzc2luZyBhIHNlcmllcyBvZiBmaWxlIG5hbWVzLFxuICAgKiBubyBtYXR0ZXIgaG93IG1hbnkgb3IgYnkgcGFzc2luZyB0aGUgZmlyc3QgYW5kIHRoZSBsYXN0IGZpbGUgbmFtZSBcbiAgICogb2YgYSBudW1iZXJlZCBzZXF1ZW5jZS4gXG4gICAqIHA1LnBsYXkgd2lsbCB0cnkgdG8gZGV0ZWN0IHRoZSBzZXF1ZW5jZSBwYXR0ZXJuLiBcbiAgICpcbiAgICogRm9yIGV4YW1wbGUgaWYgdGhlIGdpdmVuIGZpbGVuYW1lcyBhcmVcbiAgICogXCJkYXRhL2ZpbGUwMDAxLnBuZ1wiIGFuZCBcImRhdGEvZmlsZTAwMDUucG5nXCIgdGhlIGltYWdlcyBcbiAgICogXCJkYXRhL2ZpbGUwMDAzLnBuZ1wiIGFuZCBcImRhdGEvZmlsZTAwMDQucG5nXCIgd2lsbCBiZSBsb2FkZWQgYXMgd2VsbC5cbiAgICpcbiAgICogQGV4YW1wbGVcblx0KiA8Y29kZT5cblx0KiB2YXIgc2VxdWVuY2VBbmltYXRpb247PGJyPlxuICAgKiB2YXIgZ2xpdGNoOzxicj48YnI+XG5cdCogZnVuY3Rpb24gcHJlbG9hZCgpIHs8YnI+XG4gICAqICAgc2VxdWVuY2VBbmltYXRpb24gPSBsb2FkQW5pbWF0aW9uKFwiZGF0YS93YWxraW5nMDAwMS5wbmdcIiwgXCJkYXRhL3dhbGtpbmcwMDA1LnBuZ1wiKTs8YnI+XG4gICAqICAgZ2xpdGNoID0gbG9hZEFuaW1hdGlvbihcImRhdGEvZG9nLnBuZ1wiLCBcImRhdGEvaG9yc2UucG5nXCIsIFwiZGF0YS9jYXQucG5nXCIsIFwiZGF0YS9zbmFrZS5wbmdcIik7PGJyPlxuICAgKiB9PGJyPjxicj5cblx0KiBmdW5jdGlvbiBzZXR1cCgpIHs8YnI+XG5cdCogICBjcmVhdGVDYW52YXMoODAwLCA2MDApOzxicj5cblx0KiB9PGJyPjxicj5cblx0KiBmdW5jdGlvbiBkcmF3KCkgezxicj5cblx0KiAgIGJhY2tncm91bmQoMCk7PGJyPlxuXHQqICAgYW5pbWF0aW9uKHNlcXVlbmNlQW5pbWF0aW9uLCAxMDAsIDEwMCk7PGJyPlxuICAgKiAgIGFuaW1hdGlvbihnbGl0Y2gsIDIwMCwgMTAwKTs8YnI+XG5cdCogfVxuXHQqIDwvY29kZT5cbiAgICpcbiAgICogQGNsYXNzIEFuaW1hdGlvblxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVOYW1lMSBGaXJzdCBmaWxlIGluIGEgc2VxdWVuY2UgT1IgZmlyc3QgaW1hZ2UgZmlsZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZU5hbWUyIExhc3QgZmlsZSBpbiBhIHNlcXVlbmNlIE9SIHNlY29uZCBpbWFnZSBmaWxlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbLi4uZmlsZU5hbWVOXSBBbnkgbnVtYmVyIG9mIGltYWdlIGZpbGVzIGFmdGVyIHRoZSBmaXJzdCB0d29cbiAgICovIFxuXG5mdW5jdGlvbiBBbmltYXRpb24oKSB7XG5cbiAgLyoqXG4gICogQXJyYXkgb2YgZnJhbWVzIChwNS5JbWFnZSlcbiAgKlxuICAqIEBwcm9wZXJ0eSBpbWFnZXNcbiAgKiBAdHlwZSB7QXJyYXl9XG4gICovXG4gIHRoaXMuaW1hZ2VzID0gW107XG5cbiAgdmFyIGZyYW1lID0gMDtcbiAgdmFyIGN5Y2xlcyA9IDA7XG4gIHZhciB0YXJnZXRGcmFtZSA9IC0xO1xuXG4gIHRoaXMub2ZmWCA9IDA7XG4gIHRoaXMub2ZmWSA9IDA7XG5cbiAgLyoqXG4gICogRGVsYXkgYmV0d2VlbiBmcmFtZXMgaW4gbnVtYmVyIG9mIGRyYXcgY3ljbGVzLlxuICAqIElmIHNldCB0byA0IHRoZSBmcmFtZXJhdGUgb2YgdGhlIGFueW1hdGlvbiB3b3VsZCBiZSB0aGVcbiAgKiBza2V0Y2ggZnJhbWVyYXRlIGRpdmlkZWQgYnkgNCAoNjBmcHMgPSAxNWZwcylcbiAgKlxuICAqIEBwcm9wZXJ0eSBmcmFtZURlbGF5XG4gICogQHR5cGUge051bWJlcn1cbiAgKiBAZGVmYXVsdCAyXG4gICovXG4gIHRoaXMuZnJhbWVEZWxheSA9IDQ7XG5cbiAgLyoqXG4gICogVHJ1ZSBpZiB0aGUgYW5pbWF0aW9uIGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAqXG4gICogQHByb3BlcnR5IHBsYXlpbmdcbiAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgKiBAZGVmYXVsdCB0cnVlXG4gICovXG4gIHRoaXMucGxheWluZyA9IHRydWU7XG5cbiAgLyoqXG4gICogQW5pbWF0aW9uIHZpc2liaWxpdHkuXG4gICpcbiAgKiBAcHJvcGVydHkgdmlzaWJsZVxuICAqIEB0eXBlIHtCb29sZWFufVxuICAqIEBkZWZhdWx0IHRydWVcbiAgKi9cbiAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcblxuICAvKipcbiAgKiBJZiBzZXQgdG8gZmFsc2UgdGhlIGFuaW1hdGlvbiB3aWxsIHN0b3AgYWZ0ZXIgcmVhY2hpbmcgdGhlIGxhc3QgZnJhbWVcbiAgKlxuICAqIEBwcm9wZXJ0eSBsb29waW5nXG4gICogQHR5cGUge0Jvb2xlYW59XG4gICogQGRlZmF1bHQgdHJ1ZVxuICAqL1xuICB0aGlzLmxvb3BpbmcgPSB0cnVlO1xuXG4gIC8qKlxuICAqIFRydWUgaWYgZnJhbWUgY2hhbmdlZCBkdXJpbmcgdGhlIGxhc3QgZHJhdyBjeWNsZVxuICAqXG4gICogQHByb3BlcnR5IGZyYW1lQ2hhbmdlZFxuICAqIEB0eXBlIHtCb29sZWFufVxuICAqL1xuICB0aGlzLmZyYW1lQ2hhbmdlZCA9IGZhbHNlO1xuXG4gIC8vaXMgdGhlIGNvbGxpZGVyIGRlZmluZWQgbWFudWFsbHkgb3IgZGVmaW5lZCBcbiAgLy9ieSB0aGUgY3VycmVudCBmcmFtZSBzaXplXG4gIHRoaXMuaW1hZ2VDb2xsaWRlciA9IGZhbHNlO1xuXG4gIC8vc2VxdWVuY2UgbW9kZVxuICBpZihhcmd1bWVudHMubGVuZ3RoID09IDIgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJzdHJpbmdcIilcbiAge1xuICAgIHZhciBmcm9tID0gYXJndW1lbnRzWzBdO1xuICAgIHZhciB0byA9IGFyZ3VtZW50c1sxXTtcblxuICAgIC8vcHJpbnQoXCJzZXF1ZW5jZSBtb2RlIFwiK2Zyb20rXCIgLT4gXCIrdG8pO1xuXG4gICAgLy9tYWtlIHN1cmUgdGhlIGV4dGVuc2lvbnMgYXJlIGZpbmVcbiAgICB2YXIgZXh0MSA9IGZyb20uc3Vic3RyaW5nKGZyb20ubGVuZ3RoLTQsIGZyb20ubGVuZ3RoKTsgXG4gICAgaWYoZXh0MSAhPSBcIi5wbmdcIilcbiAgICB7XG4gICAgICBwcmludGxuKFwiQW5pbWF0aW9uIGVycm9yOiB5b3UgbmVlZCB0byB1c2UgLnBuZyBmaWxlcyAoZmlsZW5hbWUgXCIrZnJvbStcIilcIik7XG4gICAgICBmcm9tID0gLTE7XG4gICAgfVxuXG4gICAgdmFyIGV4dDIgPSB0by5zdWJzdHJpbmcodG8ubGVuZ3RoLTQsIHRvLmxlbmd0aCk7IFxuICAgIGlmKGV4dDIgIT0gXCIucG5nXCIpXG4gICAge1xuICAgICAgcHJpbnRsbihcIkFuaW1hdGlvbiBlcnJvcjogeW91IG5lZWQgdG8gdXNlIC5wbmcgZmlsZXMgKGZpbGVuYW1lIFwiK3RvK1wiKVwiKTtcbiAgICAgIHRvID0gLTE7XG4gICAgfVxuXG4gICAgLy9leHRlbnNpb25zIGFyZSBmaW5lXG4gICAgaWYoZnJvbSE9IC0xICYmIHRvIT0gLTEpXG4gICAge1xuICAgICAgdmFyIGRpZ2l0czEgPSAwO1xuICAgICAgdmFyIGRpZ2l0czIgPSAwO1xuXG4gICAgICAvL3NraXAgZXh0ZW5zaW9uIHdvcmsgYmFja3dhcmRzIHRvIGZpbmQgdGhlIG51bWJlcnNcbiAgICAgIGZvciAodmFyIGkgPSBmcm9tLmxlbmd0aC01OyBpID49IDA7IGktLSkge1xuICAgICAgICBpZihmcm9tLmNoYXJBdChpKSA+PSAnMCcgJiYgZnJvbS5jaGFyQXQoaSkgPD0gJzknKVxuICAgICAgICAgIGRpZ2l0czErKztcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRvLmxlbmd0aC01OyBpID49IDA7IGktLSkge1xuICAgICAgICBpZih0by5jaGFyQXQoaSkgPj0gJzAnICYmIHRvLmNoYXJBdChpKSA8PSAnOScpXG4gICAgICAgICAgZGlnaXRzMisrO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJlZml4MSA9IGZyb20uc3Vic3RyaW5nKDAsIGZyb20ubGVuZ3RoLSg0K2RpZ2l0czEpKTtcbiAgICAgIHZhciBwcmVmaXgyID0gdG8uc3Vic3RyaW5nKDAsIHRvLmxlbmd0aC0oNCtkaWdpdHMyKSApO1xuXG4gICAgICB2YXIgbnVtYmVyMSA9IHBhcnNlSW50KGZyb20uc3Vic3RyaW5nKGZyb20ubGVuZ3RoLSg0K2RpZ2l0czEpLCBmcm9tLmxlbmd0aC00KSk7XG4gICAgICB2YXIgbnVtYmVyMiA9IHBhcnNlSW50KHRvLnN1YnN0cmluZyh0by5sZW5ndGgtKDQrZGlnaXRzMiksIHRvLmxlbmd0aC00KSk7XG5cbiAgICAgIC8vc3dhcCBpZiBpbnZlcnRlZFxuICAgICAgaWYobnVtYmVyMjxudW1iZXIxKVxuICAgICAge1xuICAgICAgICB2YXIgdCA9IG51bWJlcjI7XG4gICAgICAgIG51bWJlcjIgPSBudW1iZXIxO1xuICAgICAgICBudW1iZXIxID0gdDtcbiAgICAgIH1cblxuICAgICAgLy90d28gZGlmZmVyZW50IGZyYW1lc1xuICAgICAgaWYocHJlZml4MSAhPSBwcmVmaXgyIClcbiAgICAgIHtcbiAgICAgICAgLy9wcmludChcIjIgc2VwYXJhdGUgaW1hZ2VzXCIpOyBcbiAgICAgICAgdGhpcy5pbWFnZXMucHVzaChsb2FkSW1hZ2UoZnJvbSkpO1xuICAgICAgICB0aGlzLmltYWdlcy5wdXNoKGxvYWRJbWFnZSh0bykpO1xuICAgICAgfVxuICAgICAgLy9zYW1lIGRpZ2l0czogY2FzZSBpbWcwMDAxLCBpbWcwMDAyXG4gICAgICBlbHNlIFxuICAgICAge1xuICAgICAgICBpZihkaWdpdHMxID09IGRpZ2l0czIpXG4gICAgICAgIHtcblxuICAgICAgICAgIC8vbG9hZCBhbGwgaW1hZ2VzXG4gICAgICAgICAgZm9yICh2YXIgaSA9IG51bWJlcjE7IGkgPD0gbnVtYmVyMjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBVc2UgbmYoKSB0byBudW1iZXIgZm9ybWF0ICdpJyBpbnRvIGZvdXIgZGlnaXRzXG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBwcmVmaXgxICsgbmYoaSwgZGlnaXRzMSkgKyBcIi5wbmdcIjtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzLnB1c2gobG9hZEltYWdlKGZpbGVOYW1lKSk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIC8vY2FzZTogY2FzZSBpbWcxLCBpbWcyXG4gICAgICAgIHtcbiAgICAgICAgICAvL3ByaW50KFwiZnJvbSBcIitwcmVmaXgxK1wiIFwiK251bWJlcjEgK1wiIHRvIFwiK251bWJlcjIpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSBudW1iZXIxOyBpIDw9IG51bWJlcjI7IGkrKykge1xuICAgICAgICAgICAgLy8gVXNlIG5mKCkgdG8gbnVtYmVyIGZvcm1hdCAnaScgaW50byBmb3VyIGRpZ2l0c1xuICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gcHJlZml4MSArIGkgKyBcIi5wbmdcIjtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzLnB1c2gobG9hZEltYWdlKGZpbGVOYW1lKSk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfS8vZW5kIG5vIGV4dCBlcnJvclxuXG4gIH0vL2VuZCBzZXF1ZW5jZSBtb2RlXG4gIGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCAhPSAwKS8vYXJiaXRyYXJ5IGxpc3Qgb2YgaW1hZ2VzXG4gIHtcbiAgICAvL3ByaW50KFwiQW5pbWF0aW9uIGFyYml0cmFyeSBtb2RlXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvL3ByaW50KFwibG9hZGluZyBcIithcmd1bWVudHNbaV0pO1xuICAgICAgaWYoYXJndW1lbnRzW2ldIGluc3RhbmNlb2YgcDUuSW1hZ2UpXG4gICAgICAgIHRoaXMuaW1hZ2VzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgIGVsc2UgXG4gICAgICAgIHRoaXMuaW1hZ2VzLnB1c2gobG9hZEltYWdlKGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICogT2JqZWN0cyBhcmUgcGFzc2VkIGJ5IHJlZmVyZW5jZSBzbyB0byBoYXZlIGRpZmZlcmVudCBzcHJpdGVzXG4gICogdXNpbmcgdGhlIHNhbWUgYW5pbWF0aW9uIHlvdSBuZWVkIHRvIGNsb25lIGl0LlxuICAqXG4gICogQG1ldGhvZCBjbG9uZVxuICAqIEByZXR1cm4ge0FuaW1hdGlvbn0gQSBjbG9uZSBvZiB0aGUgY3VycmVudCBhbmltYXRpb25cbiAgKi9cbiAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBteUNsb25lID0gbmV3IEFuaW1hdGlvbigpOyAvL2VtcHR5XG4gICAgbXlDbG9uZS5pbWFnZXMgPSBbXTtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmltYWdlcy5sZW5ndGg7IGkrKylcbiAgICAgIG15Q2xvbmUuaW1hZ2VzLnB1c2godGhpcy5pbWFnZXNbaV0pO1xuXG4gICAgbXlDbG9uZS5vZmZYID0gdGhpcy5vZmZYO1xuICAgIG15Q2xvbmUub2ZmWSA9IHRoaXMub2ZmWTtcbiAgICBteUNsb25lLmZyYW1lRGVsYXkgPSB0aGlzLmZyYW1lRGVsYXk7XG4gICAgbXlDbG9uZS5wbGF5aW5nID0gdGhpcy5wbGF5aW5nO1xuICAgIG15Q2xvbmUubG9vcGluZyA9IHRoaXMubG9vcGluZztcblxuICAgIHJldHVybiBteUNsb25lO1xuICB9XG5cbiAgLyoqXG4gICogRHJhd3MgdGhlIGFuaW1hdGlvbiBhdCBjb29yZGluYXRlIHggYW5kIHkuXG4gICogVXBkYXRlcyB0aGUgZnJhbWVzIGF1dG9tYXRpY2FsbHkuXG4gICpcbiAgKiBAbWV0aG9kIGRyYXdcbiAgKiBAcGFyYW0ge051bWJlcn0geCB4IGNvb3JkaW5hdGVcbiAgKiBAcGFyYW0ge051bWJlcn0geSB5IGNvb3JkaW5hdGVcbiAgKi9cbiAgdGhpcy5kcmF3ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICB0aGlzLnhwb3MgPSBhcmd1bWVudHNbMF07XG4gICAgdGhpcy55cG9zID0gYXJndW1lbnRzWzFdO1xuXG4gICAgaWYoYXJndW1lbnRzWzJdICE9IHVuZGVmaW5lZClcbiAgICAgIHRoaXMucm90YXRpb24gPSBhcmd1bWVudHNbMl07XG4gICAgZWxzZVxuICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XG5cbiAgICBpZiAodGhpcy52aXNpYmxlKVxuICAgIHtcblxuICAgICAgLy9vbmx5IGNvbm5lY3Rpb24gd2l0aCB0aGUgc3ByaXRlIGNsYXNzXG4gICAgICAvL2lmIGFuaW1hdGlvbiBpcyB1c2VkIGluZGVwZW5kZW50bHkgZHJhdyBhbmQgdXBkYXRlIGFyZSB0aGUgc2FtXG4gICAgICBpZih0aGlzLmlzU3ByaXRlQW5pbWF0aW9uID09IG51bGwpXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICBcbiAgICAgIC8vdGhpcy5jdXJyZW50SW1hZ2VNb2RlID0gZy5pbWFnZU1vZGU7XG4gICAgICBwdXNoKCk7XG4gICAgICBpbWFnZU1vZGUoQ0VOVEVSKTtcblxuICAgICAgdHJhbnNsYXRlKHRoaXMueHBvcywgdGhpcy55cG9zKTtcbiAgICAgIHJvdGF0ZShyYWRpYW5zKHRoaXMucm90YXRpb24pKTtcblxuICAgICAgaWYodGhpcy5pbWFnZXNbZnJhbWVdIT09dW5kZWZpbmVkKVxuICAgICAge1xuICAgICAgICBpbWFnZSh0aGlzLmltYWdlc1tmcmFtZV0sIHRoaXMub2ZmWCwgdGhpcy5vZmZZKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgXG4gICAgICB7XG4gICAgICAgIHByaW50KFwiV2FybmluZyB1bmRlZmluZWQgZnJhbWUgXCIrZnJhbWUpO1xuICAgICAgICAvL3RoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcG9wKCk7XG4gICAgfVxuICB9XG5cbiAgLy9jYWxsZWQgYnkgZHJhd1xuICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGN5Y2xlcysrO1xuICAgIHZhciBwcmV2aW91c0ZyYW1lID0gZnJhbWU7XG4gICAgdGhpcy5mcmFtZUNoYW5nZWQgPSBmYWxzZTtcblxuXG4gICAgLy9nbyB0byBmcmFtZVxuICAgIGlmKHRoaXMuaW1hZ2VzLmxlbmd0aD09MSlcbiAgICB7XG4gICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgIGZyYW1lID0gMDtcbiAgICB9XG5cbiAgICBpZiAoIHRoaXMucGxheWluZyAmJiBjeWNsZXMldGhpcy5mcmFtZURlbGF5ID09PSAwKVxuICAgIHtcbiAgICAgIC8vZ29pbmcgdG8gdGFyZ2V0IGZyYW1lIHVwXG4gICAgICBpZih0YXJnZXRGcmFtZT5mcmFtZSAmJiB0YXJnZXRGcmFtZSE9PS0xKVxuICAgICAge1xuICAgICAgICBmcmFtZSsrO1xuICAgICAgfVxuICAgICAgLy9nb2luZyB0byB0YWdldCBmcmFtZSBkb3duXG4gICAgICBlbHNlIGlmKHRhcmdldEZyYW1lPGZyYW1lICYmIHRhcmdldEZyYW1lICE9PSAtMSlcbiAgICAgIHtcbiAgICAgICAgZnJhbWUtLTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYodGFyZ2V0RnJhbWU9PWZyYW1lICYmIHRhcmdldEZyYW1lICE9PSAtMSlcbiAgICAgIHtcbiAgICAgICAgdGhpcy5wbGF5aW5nPWZhbHNlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodGhpcy5sb29waW5nKSAvL2FkdmFuY2UgZnJhbWVcbiAgICAgIHtcbiAgICAgICAgLy9pZiBuZXh0IGZyYW1lIGlzIHRvbyBoaWdoXG4gICAgICAgIGlmIChmcmFtZT49dGhpcy5pbWFnZXMubGVuZ3RoLTEpXG4gICAgICAgICAgZnJhbWUgPSAwO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgZnJhbWUrKztcbiAgICAgIH0gZWxzZVxuICAgICAge1xuICAgICAgICAvL2lmIG5leHQgZnJhbWUgaXMgdG9vIGhpZ2hcbiAgICAgICAgaWYgKGZyYW1lPHRoaXMuaW1hZ2VzLmxlbmd0aC0xKVxuICAgICAgICAgIGZyYW1lKys7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmKHByZXZpb3VzRnJhbWUgIT0gZnJhbWUpXG4gICAgICB0aGlzLmZyYW1lQ2hhbmdlZCA9IHRydWU7XG5cbiAgfS8vZW5kIHVwZGF0ZVxuXG4gIC8qKlxuICAqIFBsYXlzIHRoZSBhbmltYXRpb24uXG4gICpcbiAgKiBAbWV0aG9kIHBsYXlcbiAgKi9cbiAgdGhpcy5wbGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICB0YXJnZXRGcmFtZSA9IC0xO1xuICB9XG5cbiAgLyoqXG4gICogU3RvcHMgdGhlIGFuaW1hdGlvbi5cbiAgKlxuICAqIEBtZXRob2Qgc3RvcFxuICAqL1xuICB0aGlzLnN0b3AgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICogUmV3aW5kcyB0aGUgYW5pbWF0aW9uIHRvIHRoZSBmaXJzdCBmcmFtZS5cbiAgKlxuICAqIEBtZXRob2QgcmV3aW5kXG4gICovXG4gIHRoaXMucmV3aW5kID0gZnVuY3Rpb24oKSB7XG4gICAgZnJhbWUgPSAwO1xuICB9XG5cbiAgLyoqXG4gICogQ2hhbmdlcyB0aGUgY3VycmVudCBmcmFtZS5cbiAgKlxuICAqIEBtZXRob2QgY2hhbmdlRnJhbWVcbiAgKiBAcGFyYW0ge051bWJlcn0gZnJhbWUgRnJhbWUgbnVtYmVyIChzdGFydHMgZnJvbSAwKS5cbiAgKi9cbiAgdGhpcy5jaGFuZ2VGcmFtZSA9IGZ1bmN0aW9uKGYpIHtcbiAgICBpZiAoZjx0aGlzLmltYWdlcy5sZW5ndGgpXG4gICAgICBmcmFtZSA9IGY7XG4gICAgZWxzZVxuICAgICAgZnJhbWUgPSB0aGlzLmltYWdlcy5sZW5ndGggLSAxO1xuXG4gICAgdGFyZ2V0RnJhbWUgPSAtMTtcbiAgICAvL3RoaXMucGxheWluZyA9IGZhbHNlO1xuICB9XG4gIFxuICAgLyoqXG4gICogR29lcyB0byB0aGUgbmV4dCBmcmFtZSBhbmQgc3RvcHMuXG4gICpcbiAgKiBAbWV0aG9kIGNoYW5nZUZyYW1lXG4gICovXG4gIHRoaXMubmV4dEZyYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgaWYgKGZyYW1lPHRoaXMuaW1hZ2VzLmxlbmd0aC0xKVxuICAgICAgZnJhbWUgPSBmcmFtZSsxO1xuICAgIGVsc2UgaWYodGhpcy5sb29waW5nKVxuICAgICAgZnJhbWUgPSAwO1xuICAgIFxuICAgIHRhcmdldEZyYW1lID0gLTE7XG4gICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gIH1cbiAgXG4gICAvKipcbiAgKiBHb2VzIHRvIHRoZSBuZXh0IGZyYW1lIGFuZCBzdG9wcy5cbiAgKlxuICAqIEBtZXRob2QgY2hhbmdlRnJhbWVcbiAgKi9cbiAgdGhpcy5wcmV2aW91c0ZyYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgaWYgKGZyYW1lPjApXG4gICAgICBmcmFtZSA9IGZyYW1lLTE7XG4gICAgZWxzZSBpZih0aGlzLmxvb3BpbmcpXG4gICAgICBmcmFtZSA9IHRoaXMuaW1hZ2VzLmxlbmd0aC0xO1xuICAgIFxuICAgIHRhcmdldEZyYW1lID0gLTE7XG4gICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gIH1cbiAgXG4gIC8qKlxuICAqIFBsYXlzIHRoZSBhbmltYXRpb24gZm9yd2FyZCBvciBiYWNrd2FyZCB0b3dhcmQgYSB0YXJnZXQgZnJhbWUuXG4gICpcbiAgKiBAbWV0aG9kIGdvVG9GcmFtZVxuICAqIEBwYXJhbSB7TnVtYmVyfSB0YXJnZXRGcmFtZSBGcmFtZSBudW1iZXIgZGVzdGluYXRpb24gKHN0YXJ0cyBmcm9tIDApXG4gICovXG4gIHRoaXMuZ29Ub0ZyYW1lID0gZnVuY3Rpb24oZikge1xuICAgIHRoaXMuZiA9IGY7XG5cbiAgICBpZih0aGlzLmY+PTAgJiYgdGhpcy5mPHRoaXMuaW1hZ2VzLmxlbmd0aClcbiAgICAgIHRhcmdldEZyYW1lID0gdGhpcy5mO1xuXG4gICAgaWYodGFyZ2V0RnJhbWUgIT0gZnJhbWUpXG4gICAgICB0aGlzLnBsYXlpbmcgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICogUmV0dXJucyB0aGUgY3VycmVudCBmcmFtZSBudW1iZXIuXG4gICpcbiAgKiBAbWV0aG9kIGdldEZyYW1lXG4gICogQHJldHVybiB7TnVtYmVyfSBDdXJyZW50IGZyYW1lIChzdGFydHMgZnJvbSAwKVxuICAqL1xuICB0aGlzLmdldEZyYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZyYW1lO1xuICB9XG5cbiAgLyoqXG4gICogUmV0dXJucyB0aGUgbGFzdCBmcmFtZSBudW1iZXIuXG4gICpcbiAgKiBAbWV0aG9kIGdldExhc3RGcmFtZVxuICAqIEByZXR1cm4ge051bWJlcn0gTGFzdCBmcmFtZSBudW1iZXIgKHN0YXJ0cyBmcm9tIDApXG4gICovXG4gIHRoaXMuZ2V0TGFzdEZyYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VzLmxlbmd0aC0xO1xuICB9XG5cbiAgLyoqXG4gICogUmV0dXJucyB0aGUgY3VycmVudCBmcmFtZSBpbWFnZSBhcyBwNS5JbWFnZS5cbiAgKlxuICAqIEBtZXRob2QgZ2V0RnJhbWVJbWFnZVxuICAqIEByZXR1cm4ge3A1LkltYWdlfSBDdXJyZW50IGZyYW1lIGltYWdlXG4gICovXG4gIHRoaXMuZ2V0RnJhbWVJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlc1tmcmFtZV07XG4gIH1cblxuICAvKipcbiAgKiBSZXR1cm5zIHRoZSBmcmFtZSBpbWFnZSBhdCB0aGUgc3BlY2lmaWVkIGZyYW1lIG51bWJlci5cbiAgKlxuICAqIEBtZXRob2QgZ2V0SW1hZ2VBdFxuICAqIEBwYXJhbSB7TnVtYmVyfSBmcmFtZSBGcmFtZSBudW1iZXJcbiAgKiBAcmV0dXJuIHtwNS5JbWFnZX0gRnJhbWUgaW1hZ2VcbiAgKi9cbiAgdGhpcy5nZXRJbWFnZUF0ID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiB0aGlzLmltYWdlc1tmXTtcbiAgfVxuXG4gIC8qKlxuICAqIFJldHVybnMgdGhlIGN1cnJlbnQgZnJhbWUgd2lkdGggaW4gcGl4ZWxzLlxuICAqXG4gICogQG1ldGhvZCBnZXRXaWR0aFxuICAqIEByZXR1cm4ge051bWJlcn0gRnJhbWUgd2lkdGhcbiAgKi9cbiAgdGhpcy5nZXRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlc1tmcmFtZV0ud2lkdGg7XG4gIH1cblxuICAvKipcbiAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGZyYW1lIGhlaWdodCBpbiBwaXhlbHMuXG4gICpcbiAgKiBAbWV0aG9kIGdldEhlaWdodFxuICAqIEByZXR1cm4ge051bWJlcn0gRnJhbWUgaGVpZ2h0XG4gICovXG4gIHRoaXMuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VzW2ZyYW1lXS5oZWlnaHQ7XG4gIH1cblxufVxuXG5cbi8vZ2VuZXJhbCBjb25zdHJ1Y3RvciB0byBiZSBhYmxlIHRvIGZlZWQgYXJndW1lbnRzIGFzIGFycmF5XG5mdW5jdGlvbiBjb25zdHJ1Y3QoY29uc3RydWN0b3IsIGFyZ3MpIHtcbiAgZnVuY3Rpb24gRigpIHtcbiAgICByZXR1cm4gY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJncyk7XG4gIH1cbiAgRi5wcm90b3R5cGUgPSBjb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gIHJldHVybiBuZXcgRigpO1xufVxuXG5cblxuXG5cblxuLypcbiAqIEphdmFzY3JpcHQgUXVhZHRyZWUgXG4gKiBiYXNlZCBvblxuICogaHR0cHM6Ly9naXRodWIuY29tL3RpbW9oYXVzbWFubi9xdWFkdHJlZS1qcy9cbiAqIENvcHlyaWdodCDCqSAyMDEyIFRpbW8gSGF1c21hbm5cbiovXG5cbmZ1bmN0aW9uIFF1YWR0cmVlKCBib3VuZHMsIG1heF9vYmplY3RzLCBtYXhfbGV2ZWxzLCBsZXZlbCApIHtcblxuICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIHRoaXMubWF4X29iamVjdHNcdD0gbWF4X29iamVjdHMgfHwgMTA7XG4gIHRoaXMubWF4X2xldmVsc1x0XHQ9IG1heF9sZXZlbHMgfHwgNDtcblxuICB0aGlzLmxldmVsIFx0XHRcdD0gbGV2ZWwgfHwgMDtcbiAgdGhpcy5ib3VuZHMgXHRcdD0gYm91bmRzO1xuXG4gIHRoaXMub2JqZWN0cyBcdFx0PSBbXTtcbiAgdGhpcy5vYmplY3RfcmVmc1x0PSBbXTtcbiAgdGhpcy5ub2RlcyBcdFx0XHQ9IFtdO1xufTtcblxuUXVhZHRyZWUucHJvdG90eXBlLnVwZGF0ZUJvdW5kcyA9IGZ1bmN0aW9uKCkge1xuXG4gIC8vZmluZCBtYXhpbXVtIGFyZWFcbiAgdmFyIG9iamVjdHMgPSB0aGlzLmdldEFsbCgpO1xuICB2YXIgeCA9IDEwMDAwO1xuICB2YXIgeSA9IDEwMDAwO1xuICB2YXIgdyA9IC0xMDAwMDtcbiAgdmFyIGggPSAtMTAwMDA7XG4gIFxuICBmb3IoIHZhciBpPTA7IGkgPCBvYmplY3RzLmxlbmd0aDsgaSsrICkgXG4gICAge1xuICAgICAgaWYob2JqZWN0c1tpXS5wb3NpdGlvbi54IDwgeClcbiAgICAgICAgeCA9IG9iamVjdHNbaV0ucG9zaXRpb24ueDtcbiAgICAgIGlmKG9iamVjdHNbaV0ucG9zaXRpb24ueSA8IHkpXG4gICAgICAgIHkgPSBvYmplY3RzW2ldLnBvc2l0aW9uLnk7XG4gICAgICBpZihvYmplY3RzW2ldLnBvc2l0aW9uLnggPiB3KVxuICAgICAgICB3ID0gb2JqZWN0c1tpXS5wb3NpdGlvbi54O1xuICAgICAgaWYob2JqZWN0c1tpXS5wb3NpdGlvbi55ID4gaClcbiAgICAgICAgaCA9IG9iamVjdHNbaV0ucG9zaXRpb24ueTtcbiAgICB9XG4gIFxuXG4gIHRoaXMuYm91bmRzID0ge1xuICAgIHg6eCxcbiAgICB5OnksXG4gICAgd2lkdGg6dyxcbiAgICBoZWlnaHQ6aFxuICB9XG4gIC8vcHJpbnQodGhpcy5ib3VuZHMpO1xufVxuXG4vKlxuXHQgKiBTcGxpdCB0aGUgbm9kZSBpbnRvIDQgc3Vibm9kZXNcblx0ICovXG5RdWFkdHJlZS5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgbmV4dExldmVsXHQ9IHRoaXMubGV2ZWwgKyAxLFxuICAgICAgc3ViV2lkdGhcdD0gTWF0aC5yb3VuZCggdGhpcy5ib3VuZHMud2lkdGggLyAyICksXG4gICAgICBzdWJIZWlnaHQgXHQ9IE1hdGgucm91bmQoIHRoaXMuYm91bmRzLmhlaWdodCAvIDIgKSxcbiAgICAgIHggXHRcdFx0PSBNYXRoLnJvdW5kKCB0aGlzLmJvdW5kcy54ICksXG4gICAgICB5IFx0XHRcdD0gTWF0aC5yb3VuZCggdGhpcy5ib3VuZHMueSApO1x0XHRcblxuICAvL3RvcCByaWdodCBub2RlXG4gIHRoaXMubm9kZXNbMF0gPSBuZXcgUXVhZHRyZWUoe1xuICAgIHhcdDogeCArIHN1YldpZHRoLCBcbiAgICB5XHQ6IHksIFxuICAgIHdpZHRoXHQ6IHN1YldpZHRoLCBcbiAgICBoZWlnaHRcdDogc3ViSGVpZ2h0XG4gIH0sIHRoaXMubWF4X29iamVjdHMsIHRoaXMubWF4X2xldmVscywgbmV4dExldmVsKTtcblxuICAvL3RvcCBsZWZ0IG5vZGVcbiAgdGhpcy5ub2Rlc1sxXSA9IG5ldyBRdWFkdHJlZSh7XG4gICAgeFx0OiB4LCBcbiAgICB5XHQ6IHksIFxuICAgIHdpZHRoXHQ6IHN1YldpZHRoLCBcbiAgICBoZWlnaHRcdDogc3ViSGVpZ2h0XG4gIH0sIHRoaXMubWF4X29iamVjdHMsIHRoaXMubWF4X2xldmVscywgbmV4dExldmVsKTtcblxuICAvL2JvdHRvbSBsZWZ0IG5vZGVcbiAgdGhpcy5ub2Rlc1syXSA9IG5ldyBRdWFkdHJlZSh7XG4gICAgeFx0OiB4LCBcbiAgICB5XHQ6IHkgKyBzdWJIZWlnaHQsIFxuICAgIHdpZHRoXHQ6IHN1YldpZHRoLCBcbiAgICBoZWlnaHRcdDogc3ViSGVpZ2h0XG4gIH0sIHRoaXMubWF4X29iamVjdHMsIHRoaXMubWF4X2xldmVscywgbmV4dExldmVsKTtcblxuICAvL2JvdHRvbSByaWdodCBub2RlXG4gIHRoaXMubm9kZXNbM10gPSBuZXcgUXVhZHRyZWUoe1xuICAgIHhcdDogeCArIHN1YldpZHRoLCBcbiAgICB5XHQ6IHkgKyBzdWJIZWlnaHQsIFxuICAgIHdpZHRoXHQ6IHN1YldpZHRoLCBcbiAgICBoZWlnaHRcdDogc3ViSGVpZ2h0XG4gIH0sIHRoaXMubWF4X29iamVjdHMsIHRoaXMubWF4X2xldmVscywgbmV4dExldmVsKTtcbn07XG5cblxuLypcblx0ICogRGV0ZXJtaW5lIHRoZSBxdWFkdHJhbnQgZm9yIGFuIGFyZWEgaW4gdGhpcyBub2RlXG5cdCAqL1xuUXVhZHRyZWUucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24oIHBSZWN0ICkge1xuICBpZihwUmVjdC5jb2xsaWRlciA9PSBudWxsKVxuICAgIHJldHVybiAtMTtcbiAgZWxzZVxuICB7XG4gICAgdmFyIGluZGV4IFx0XHRcdFx0PSAtMSxcbiAgICAgICAgdmVydGljYWxNaWRwb2ludCBcdD0gdGhpcy5ib3VuZHMueCArICh0aGlzLmJvdW5kcy53aWR0aCAvIDIpLFxuICAgICAgICBob3Jpem9udGFsTWlkcG9pbnQgXHQ9IHRoaXMuYm91bmRzLnkgKyAodGhpcy5ib3VuZHMuaGVpZ2h0IC8gMiksXG5cbiAgICAgICAgLy9wUmVjdCBjYW4gY29tcGxldGVseSBmaXQgd2l0aGluIHRoZSB0b3AgcXVhZHJhbnRzXG4gICAgICAgIHRvcFF1YWRyYW50ID0gKHBSZWN0LmNvbGxpZGVyLnRvcCgpIDwgaG9yaXpvbnRhbE1pZHBvaW50ICYmIHBSZWN0LmNvbGxpZGVyLnRvcCgpICsgcFJlY3QuY29sbGlkZXIuc2l6ZSgpLnkgPCBob3Jpem9udGFsTWlkcG9pbnQpLFxuXG4gICAgICAgIC8vcFJlY3QgY2FuIGNvbXBsZXRlbHkgZml0IHdpdGhpbiB0aGUgYm90dG9tIHF1YWRyYW50c1xuICAgICAgICBib3R0b21RdWFkcmFudCA9IChwUmVjdC5jb2xsaWRlci50b3AoKSA+IGhvcml6b250YWxNaWRwb2ludCk7XG5cbiAgICAvL3BSZWN0IGNhbiBjb21wbGV0ZWx5IGZpdCB3aXRoaW4gdGhlIGxlZnQgcXVhZHJhbnRzXG4gICAgaWYoIHBSZWN0LmNvbGxpZGVyLmxlZnQoKSA8IHZlcnRpY2FsTWlkcG9pbnQgJiYgcFJlY3QuY29sbGlkZXIubGVmdCgpICsgcFJlY3QuY29sbGlkZXIuc2l6ZSgpLnggPCB2ZXJ0aWNhbE1pZHBvaW50ICkge1xuICAgICAgaWYoIHRvcFF1YWRyYW50ICkge1xuICAgICAgICBpbmRleCA9IDE7XG4gICAgICB9IGVsc2UgaWYoIGJvdHRvbVF1YWRyYW50ICkge1xuICAgICAgICBpbmRleCA9IDI7XG4gICAgICB9XG5cbiAgICAgIC8vcFJlY3QgY2FuIGNvbXBsZXRlbHkgZml0IHdpdGhpbiB0aGUgcmlnaHQgcXVhZHJhbnRzXHRcbiAgICB9IGVsc2UgaWYoIHBSZWN0LmNvbGxpZGVyLmxlZnQoKSA+IHZlcnRpY2FsTWlkcG9pbnQgKSB7XG4gICAgICBpZiggdG9wUXVhZHJhbnQgKSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgIH0gZWxzZSBpZiggYm90dG9tUXVhZHJhbnQgKSB7XG4gICAgICAgIGluZGV4ID0gMztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbn07XG5cblxuLypcblx0ICogSW5zZXJ0IGFuIG9iamVjdCBpbnRvIHRoZSBub2RlLiBJZiB0aGUgbm9kZVxuXHQgKiBleGNlZWRzIHRoZSBjYXBhY2l0eSwgaXQgd2lsbCBzcGxpdCBhbmQgYWRkIGFsbFxuXHQgKiBvYmplY3RzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgc3Vibm9kZXMuXG5cdCAqL1xuUXVhZHRyZWUucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKCBvYmogKSB7XG4gIC8vYXZvaWQgZG91YmxlIGluc2VydGlvblxuICBpZih0aGlzLm9iamVjdHMuaW5kZXhPZihvYmopID09IC0xKVxuICB7XG5cbiAgICB2YXIgaSA9IDAsXG4gICAgICAgIGluZGV4O1xuXG4gICAgLy9pZiB3ZSBoYXZlIHN1Ym5vZGVzIC4uLlxuICAgIGlmKCB0eXBlb2YgdGhpcy5ub2Rlc1swXSAhPT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICBpbmRleCA9IHRoaXMuZ2V0SW5kZXgoIG9iaiApO1xuXG4gICAgICBpZiggaW5kZXggIT09IC0xICkge1xuICAgICAgICB0aGlzLm5vZGVzW2luZGV4XS5pbnNlcnQoIG9iaiApO1x0IFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vYmplY3RzLnB1c2goIG9iaiApO1xuXG4gICAgaWYoIHRoaXMub2JqZWN0cy5sZW5ndGggPiB0aGlzLm1heF9vYmplY3RzICYmIHRoaXMubGV2ZWwgPCB0aGlzLm1heF9sZXZlbHMgKSB7XG5cbiAgICAgIC8vc3BsaXQgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIHN1Ym5vZGVzXG4gICAgICBpZiggdHlwZW9mIHRoaXMubm9kZXNbMF0gPT09ICd1bmRlZmluZWQnICkge1xuICAgICAgICB0aGlzLnNwbGl0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vYWRkIGFsbCBvYmplY3RzIHRvIHRoZXJlIGNvcnJlc3BvbmRpbmcgc3Vibm9kZXNcbiAgICAgIHdoaWxlKCBpIDwgdGhpcy5vYmplY3RzLmxlbmd0aCApIHtcblxuICAgICAgICBpbmRleCA9IHRoaXMuZ2V0SW5kZXgoIHRoaXMub2JqZWN0c1sgaSBdICk7XG5cbiAgICAgICAgaWYoIGluZGV4ICE9PSAtMSApIHtcdFx0XHRcdFx0XG4gICAgICAgICAgdGhpcy5ub2Rlc1tpbmRleF0uaW5zZXJ0KCB0aGlzLm9iamVjdHMuc3BsaWNlKGksIDEpWzBdICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IGkgKyAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5cbi8qXG5cdCAqIFJldHVybiBhbGwgb2JqZWN0cyB0aGF0IGNvdWxkIGNvbGxpZGUgd2l0aCBhIGdpdmVuIGFyZWFcblx0ICovXG5RdWFkdHJlZS5wcm90b3R5cGUucmV0cmlldmUgPSBmdW5jdGlvbiggcFJlY3QgKSB7XG4gIFxuICBcbiAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleCggcFJlY3QgKSxcbiAgICAgIHJldHVybk9iamVjdHMgPSB0aGlzLm9iamVjdHM7XG5cbiAgLy9pZiB3ZSBoYXZlIHN1Ym5vZGVzIC4uLlxuICBpZiggdHlwZW9mIHRoaXMubm9kZXNbMF0gIT09ICd1bmRlZmluZWQnICkge1xuXG4gICAgLy9pZiBwUmVjdCBmaXRzIGludG8gYSBzdWJub2RlIC4uXG4gICAgaWYoIGluZGV4ICE9PSAtMSApIHtcbiAgICAgIHJldHVybk9iamVjdHMgPSByZXR1cm5PYmplY3RzLmNvbmNhdCggdGhpcy5ub2Rlc1tpbmRleF0ucmV0cmlldmUoIHBSZWN0ICkgKTtcblxuICAgICAgLy9pZiBwUmVjdCBkb2VzIG5vdCBmaXQgaW50byBhIHN1Ym5vZGUsIGNoZWNrIGl0IGFnYWluc3QgYWxsIHN1Ym5vZGVzXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciggdmFyIGk9MDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpPWkrMSApIHtcbiAgICAgICAgcmV0dXJuT2JqZWN0cyA9IHJldHVybk9iamVjdHMuY29uY2F0KCB0aGlzLm5vZGVzW2ldLnJldHJpZXZlKCBwUmVjdCApICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldHVybk9iamVjdHM7XG59O1xuXG5RdWFkdHJlZS5wcm90b3R5cGUucmV0cmlldmVGcm9tR3JvdXAgPSBmdW5jdGlvbiggcFJlY3QsIGdyb3VwICkge1xuICBcbiAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgdmFyIGNhbmRpZGF0ZXMgPSB0aGlzLnJldHJpZXZlKHBSZWN0KTtcbiAgICAgIFxuICBmb3IodmFyIGk9MDsgaTxjYW5kaWRhdGVzLmxlbmd0aDtpKyspXG4gICAgaWYoZ3JvdXAuY29udGFpbnMoY2FuZGlkYXRlc1tpXSkpXG4gICAgcmVzdWx0cy5wdXNoKGNhbmRpZGF0ZXNbaV0pO1xuICBcbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKlxuXHQgKiBHZXQgYWxsIG9iamVjdHMgc3RvcmVkIGluIHRoZSBxdWFkdHJlZVxuXHQgKi9cblF1YWR0cmVlLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgb2JqZWN0cyA9IHRoaXMub2JqZWN0cztcblxuICBmb3IoIHZhciBpPTA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaT1pKzEgKSB7XG4gICAgb2JqZWN0cyA9IG9iamVjdHMuY29uY2F0KCB0aGlzLm5vZGVzW2ldLmdldEFsbCgpICk7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0cztcbn07XG5cblxuLypcblx0ICogR2V0IHRoZSBub2RlIGluIHdoaWNoIGEgY2VydGFpbiBvYmplY3QgaXMgc3RvcmVkXG5cdCAqL1xuUXVhZHRyZWUucHJvdG90eXBlLmdldE9iamVjdE5vZGUgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gIHZhciBpbmRleDtcblxuICAvL2lmIHRoZXJlIGFyZSBubyBzdWJub2Rlcywgb2JqZWN0IG11c3QgYmUgaGVyZVxuICBpZiggIXRoaXMubm9kZXMubGVuZ3RoICkge1xuXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgfSBlbHNlIHtcblxuICAgIGluZGV4ID0gdGhpcy5nZXRJbmRleCggb2JqICk7XG5cbiAgICAvL2lmIHRoZSBvYmplY3QgZG9lcyBub3QgZml0IGludG8gYSBzdWJub2RlLCBpdCBtdXN0IGJlIGhlcmVcbiAgICBpZiggaW5kZXggPT09IC0xICkge1xuXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgICAgLy9pZiBpdCBmaXRzIGludG8gYSBzdWJub2RlLCBjb250aW51ZSBkZWVwZXIgc2VhcmNoIHRoZXJlXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2Rlc1tpbmRleF0uZ2V0T2JqZWN0Tm9kZSggb2JqICk7XHQgXG4gICAgICBpZiggbm9kZSApIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cblxuLypcblx0ICogUmVtb3ZlcyBhIHNwZWNpZmljIG9iamVjdCBmcm9tIHRoZSBxdWFkdHJlZSBcblx0ICogRG9lcyBub3QgZGVsZXRlIGVtcHR5IHN1Ym5vZGVzLiBTZWUgY2xlYW51cC1mdW5jdGlvblxuXHQgKi9cblF1YWR0cmVlLnByb3RvdHlwZS5yZW1vdmVPYmplY3QgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gIHZhciBub2RlID0gdGhpcy5nZXRPYmplY3ROb2RlKCBvYmogKSxcbiAgICAgIGluZGV4ID0gbm9kZS5vYmplY3RzLmluZGV4T2YoIG9iaiApO1xuXG4gIGlmKCBpbmRleCA9PT0gLTEgKSByZXR1cm4gZmFsc2U7XG5cbiAgbm9kZS5vYmplY3RzLnNwbGljZSggaW5kZXgsIDEpO1xufTtcblxuXG4vKlxuXHQgKiBDbGVhciB0aGUgcXVhZHRyZWUgYW5kIGRlbGV0ZSBhbGwgb2JqZWN0c1xuXHQgKi9cblF1YWR0cmVlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuXG4gIHRoaXMub2JqZWN0cyA9IFtdO1xuXG4gIGlmKCAhdGhpcy5ub2Rlcy5sZW5ndGggKSByZXR1cm47XG5cbiAgZm9yKCB2YXIgaT0wOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGk9aSsxICkge1xuXG4gICAgdGhpcy5ub2Rlc1tpXS5jbGVhcigpO1xuICB9XG5cbiAgdGhpcy5ub2RlcyA9IFtdO1xufTtcblxuXG4vKlxuXHQgKiBDbGVhbiB1cCB0aGUgcXVhZHRyZWUgXG5cdCAqIExpa2UgY2xlYXIsIGJ1dCBvYmplY3RzIHdvbid0IGJlIGRlbGV0ZWQgYnV0IHJlLWluc2VydGVkXG5cdCAqL1xuUXVhZHRyZWUucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgb2JqZWN0cyA9IHRoaXMuZ2V0QWxsKCk7XG5cbiAgdGhpcy5jbGVhcigpO1xuXG4gIGZvciggdmFyIGk9MDsgaSA8IG9iamVjdHMubGVuZ3RoOyBpKysgKSB7XG4gICAgdGhpcy5pbnNlcnQoIG9iamVjdHNbaV0gKTtcbiAgfVxufTtcblxuXG5cbmZ1bmN0aW9uIHVwZGF0ZVRyZWUoKSB7XG4gIGlmKHF1YWRUcmVlLmFjdGl2ZSlcbiAge1xuICAgIHF1YWRUcmVlLnVwZGF0ZUJvdW5kcygpO1xuICAgIHF1YWRUcmVlLmNsZWFudXAoKTtcbiAgfVxufVxuXG4vL2tleWJvYXJkIGlucHV0XG5wNS5wcm90b3R5cGUucmVnaXN0ZXJNZXRob2QoJ3ByZScsIHA1LnByb3RvdHlwZS5yZWFkUHJlc3Nlcyk7XG5cbi8vYXV0b21hdGljIHNwcml0ZSB1cGRhdGVcbnA1LnByb3RvdHlwZS5yZWdpc3Rlck1ldGhvZCgncHJlJywgcDUucHJvdG90eXBlLnVwZGF0ZVNwcml0ZXMpO1xuXG4vL3F1YWR0cmVlIHVwZGF0ZVxucDUucHJvdG90eXBlLnJlZ2lzdGVyTWV0aG9kKCdwb3N0JywgdXBkYXRlVHJlZSk7XG5cbi8vY2FtZXJhIHB1c2ggYW5kIHBvcFxucDUucHJvdG90eXBlLnJlZ2lzdGVyTWV0aG9kKCdwcmUnLCBjYW1lcmFQdXNoKTtcbnA1LnByb3RvdHlwZS5yZWdpc3Rlck1ldGhvZCgncG9zdCcsIGNhbWVyYVBvcCk7XG5cbi8vZGVsdGFUaW1lXG4vL3A1LnByb3RvdHlwZS5yZWdpc3Rlck1ldGhvZCgncHJlJywgdXBkYXRlRGVsdGEpO1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
