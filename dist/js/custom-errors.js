var CustomErrors={test:function(r){try{tokens=esprima.tokenize(r,{range:!0,loc:!0})}catch(e){console.log("ERROR TOKENIZING"),console.log(e);var o="Unexpected token ILLEGAL"==e.description?"It looks like you have a typo. Make sure your STRINGS have an opening ' and a closing ' ":e.description;return this.displayError(e.lineNumber,o),!0}for(var s=0;s<tokens.length;s++)if("Identifier"==tokens[s].type&&Object.keys(CustomErrors).indexOf(tokens[s].value)>-1){console.log(tokens[s].value);var t=CustomErrors[tokens[s].value](tokens,s);if(t)return t}return!1},displayError:function(r,e){console.log("Error found"),markJsErrorAtLine(r),$("#errorModal p.error-text").text(e),$("#errorModal").foundation("reveal","open")},errorMsgs:{color:"You need a valid color name. Make sure you're spelling the name of your color correctly, and that it's surrounded with quotation marks.",comma:"Every value or ARGUMENT inside parentheses must be separated by a comma",semicolon:"Every line of code or STATEMENT must end with a semicolon ';'",parentheses:"You need an opening '(' and a closing ')' parentheses.",number:"It looks like you're missing a number between the opening '(' and closing ')' parentheses."},createPlatform:function(r,e){for(var o={fourArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}],fiveArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["String","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.color},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}]},s=currentLevel>1&&currentLevel<4?o.fourArgs:o.fiveArgs,t=0;t<s.length;t++){var n=e+1+t,u=r[n].type,l=r[n].value;if(-1==s[t].type.indexOf(u)){console.log("Err A"),console.log(u),console.log(s[t]),console.log(s),console.log(r[n]);var a={token:r[e],errMsg:s[t].errorMsg};return console.log("Output error"),console.log(a),this.displayError(a.token.loc.start.line,a.errMsg),!0}if(s[t].value&&-1==s[t].value.indexOf(l)){console.log("Err B");var a={token:r[e],errMsg:s[t].errorMsg};return this.displayError(a.token.loc.start.line,a.errMsg),!0}}return!1},makePlayerJump:function(r,e){for(var o={oneArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}]},s=o.oneArgs,t=0;t<s.length;t++){var n=e+1+t,u=r[n].type;r[n].value;if(-1==s[t].type.indexOf(u)){console.log("Err A"),console.log(u),console.log(s[t]),console.log(s),console.log(r[n]);var l={token:r[e],errMsg:s[t].errorMsg};return this.displayError(l.token.loc.start.line,l.errMsg),!0}}return!1},setSpeed:function(r,e){for(var o={twoArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:["-"],optional:!0,errorMsg:"Optional value"},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Punctuator"],value:["-"],optional:!0,errorMsg:"Optional value"},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}]},s=o.twoArgs,t=0;t<s.length;t++){var n=e+1+t,u=r[n].type;r[n].value;if(s[t].optional){if(-1!==s[t].type.indexOf(u))continue;s.splice(t,1)}if(-1==s[t].type.indexOf(u)){deb=r[n],console.log("setSpeed error found"),console.log(u),console.log(s[t]),console.log(s),console.log(r[n]);var l={token:r[e],errMsg:s[t].errorMsg};return this.displayError(l.token.loc.start.line,l.errMsg),!0}}return!1}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2N1c3RvbS1lcnJvcnMuanMiXSwibmFtZXMiOlsiQ3VzdG9tRXJyb3JzIiwidGVzdCIsImNvZGUiLCJ0b2tlbnMiLCJlc3ByaW1hIiwidG9rZW5pemUiLCJyYW5nZSIsImxvYyIsImUiLCJjb25zb2xlIiwibG9nIiwibXNnIiwiZGVzY3JpcHRpb24iLCJ0aGlzIiwiZGlzcGxheUVycm9yIiwibGluZU51bWJlciIsImkiLCJsZW5ndGgiLCJ0eXBlIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJ2YWx1ZSIsImVyciIsImxvY2F0aW9uIiwibWVzc2FnZSIsIm1hcmtKc0Vycm9yQXRMaW5lIiwiJCIsInRleHQiLCJmb3VuZGF0aW9uIiwiZXJyb3JNc2dzIiwiY29sb3IiLCJjb21tYSIsInNlbWljb2xvbiIsInBhcmVudGhlc2VzIiwibnVtYmVyIiwiY3JlYXRlUGxhdGZvcm0iLCJpbmRleCIsInRlc3RzIiwiZm91ckFyZ3MiLCJlcnJvck1zZyIsImZpdmVBcmdzIiwiY3VycmVudExldmVsIiwiaiIsInRva2VuSW5kZXgiLCJ0b2tlblR5cGUiLCJ0b2tlblZhbHVlIiwidG9rZW4iLCJlcnJNc2ciLCJzdGFydCIsImxpbmUiLCJtYWtlUGxheWVySnVtcCIsIm9uZUFyZ3MiLCJzZXRTcGVlZCIsInR3b0FyZ3MiLCJvcHRpb25hbCIsInNwbGljZSIsImRlYiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsZUFFRkMsS0FBTSxTQUFVQyxHQUNkLElBQ0VDLE9BQVNDLFFBQVFDLFNBQVVILEdBQU9JLE9BQU8sRUFBTUMsS0FBSyxJQUNyRCxNQUFNQyxHQUVMQyxRQUFRQyxJQUFJLG9CQUNaRCxRQUFRQyxJQUFJRixFQUVaLElBQUlHLEdBQXVCLDRCQUFqQkgsRUFBRUksWUFBNEMsMkZBQTZGSixFQUFFSSxXQUd2SixPQUZBQyxNQUFLQyxhQUFjTixFQUFFTyxXQUFZSixJQUUxQixFQUlULElBQUssR0FBSUssR0FBSSxFQUFHQSxFQUFJYixPQUFPYyxPQUFRRCxJ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QyxHQUFJQyxHQUFhUCxFQUFRLEVBQUlNLEVBRXpCRSxFQUFZMUMsRUFBT3lDLEdBQVkxQixJQUNsQmYsR0FBT3lDLEdBQVl0QixLQUdwQyxJQUFHckIsRUFBSzBDLEdBQUdZLFNBQVMsQ0FFbEIsR0FBeUMsS0FBdEN0RCxFQUFLMEMsR0FBR3pCLEtBQUtHLFFBQVN3QixHQUN2QixRQUlGNUMsR0FBS3VELE9BQU9iLEVBQUcsR0FLakIsR0FBeUMsSUFBckMxQyxFQUFLMEMsR0FBR3pCLEtBQUtHLFFBQVN3QixHQUFrQixDQUMxQ1ksSUFBTXRELEVBQU95QyxHQUNibkMsUUFBUUMsSUFBSSx3QkFDWkQsUUFBUUMsSUFBSW1DLEdBQ1pwQyxRQUFRQyxJQUFJVCxFQUFLMEMsSUFDakJsQyxRQUFRQyxJQUFJVCxHQUNaUSxRQUFRQyxJQUFJUCxFQUFPeUMsR0FFbkIsSUFBSXJCLElBRUZ3QixNQUFPNUMsRUFBT2tDLEdBQ2RXLE9BQVEvQyxFQUFLMEMsR0FBR0gsU0FLbEIsT0FGQTNCLE1BQUtDLGFBQWNTLEVBQUl3QixNQUFNeEMsSUFBSTBDLE1BQU1DLEtBQU0zQixFQUFJeUIsU0FFMUMsR0FJWCxPQUFPIiwiZmlsZSI6ImpzL2N1c3RvbS1lcnJvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ3VzdG9tRXJyb3JzID0ge1xuICAvL01haW4gZnVuY2l0b24gdG8gYmUgY2FsbGVkIHdoZW4gcGVyZm9ybWluZyB0ZXN0c1xuICB0ZXN0OiBmdW5jdGlvbiggY29kZSApe1xuICAgIHRyeXtcbiAgICAgIHRva2VucyA9IGVzcHJpbWEudG9rZW5pemUoIGNvZGUsIHtyYW5nZTogdHJ1ZSwgbG9jOiB0cnVlfSApO1xuICAgIH1jYXRjaChlKXtcbiAgICAgIC8vIElmIHRva2VuaXplIGZpbGVzIHdlIHdvbid0IGhhdmUgdG9rZW5zIHRvIGxvb3AgdGhyb3VnaC4gVGhyb3cgYmFjayB3aGF0ZXZlciBlcnJvciB3ZSBnb3RcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgVE9LRU5JWklOR1wiKTtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuXG4gICAgICB2YXIgbXNnID0gZS5kZXNjcmlwdGlvbiA9PSBcIlVuZXhwZWN0ZWQgdG9rZW4gSUxMRUdBTFwiID8gXCJJdCBsb29rcyBsaWtlIHlvdSBoYXZlIGEgdHlwby4gTWFrZSBzdXJlIHlvdXIgU1RSSU5HUyBoYXZlIGFuIG9wZW5pbmcgJyBhbmQgYSBjbG9zaW5nICcgXCIgOiBlLmRlc2NyaXB0aW9uO1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoIGUubGluZU51bWJlciwgbXNnICk7XG4gICAgICAvL0JyZWFrIGFzIHNvb24gYXMgd2UgZmluZCBhbiBlcnJvciB0byBwcm92aWRlIGVycm9ycyBvbmUgYXQgYSB0aW1lXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIGFsbCB0b2tlbnMgZm9yIHdoaWNoIHdlIGhhdmUgYSBjdXN0b20gZXJyb3IgY2hlY2tpbmcgZnVuY3Rpb25cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gRWFjaCBjdXN0b20gZnVuY3Rpb24gc2hvdWxkIGhhbmRsZSBlcnJvcnMgb24gaXRzIG93bi5cbiAgICAgIGlmKCB0b2tlbnNbaV0udHlwZSA9PSBcIklkZW50aWZpZXJcIiAmJiBPYmplY3Qua2V5cyhDdXN0b21FcnJvcnMpLmluZGV4T2YoIHRva2Vuc1tpXS52YWx1ZSApID4gLTEgKXtcbiAgICAgICAgY29uc29sZS5sb2codG9rZW5zW2ldLnZhbHVlKTtcbiAgICAgICAgdmFyIGVyciA9IEN1c3RvbUVycm9yc1t0b2tlbnNbaV0udmFsdWVdKHRva2VucywgaSk7XG4gICAgICAgIGlmKCBlcnIgKXtcbiAgICAgICAgICAgLy9CcmVhayBhcyBzb29uIGFzIHdlIGZpbmQgYW4gZXJyb3IgdG8gcHJvdmlkZSBlcnJvcnMgb25lIGF0IGEgdGltZVxuICAgICAgICAgIHJldHVybiBlcnI7ICAgIFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICBkaXNwbGF5RXJyb3I6IGZ1bmN0aW9uKGxvY2F0aW9uLCBtZXNzYWdlKXtcbiAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZvdW5kXCIpO1xuICAgIG1hcmtKc0Vycm9yQXRMaW5lKCBsb2NhdGlvbiApO1xuXG4gICAgJCgnI2Vycm9yTW9kYWwgcC5lcnJvci10ZXh0JykudGV4dCggbWVzc2FnZSApO1xuICAgICQoJyNlcnJvck1vZGFsJykuZm91bmRhdGlvbigncmV2ZWFsJywgJ29wZW4nKTtcbiAgfSxcblxuICBlcnJvck1zZ3M6IHtcbiAgICBjb2xvcjogXCJZb3UgbmVlZCBhIHZhbGlkIGNvbG9yIG5hbWUuIE1ha2Ugc3VyZSB5b3UncmUgc3BlbGxpbmcgdGhlIG5hbWUgb2YgeW91ciBjb2xvciBjb3JyZWN0bHksIGFuZCB0aGF0IGl0J3Mgc3Vycm91bmRlZCB3aXRoIHF1b3RhdGlvbiBtYXJrcy5cIixcbiAgICBjb21tYTogXCJFdmVyeSB2YWx1ZSBvciBBUkdVTUVOVCBpbnNpZGUgcGFyZW50aGVzZXMgbXVzdCBiZSBzZXBhcmF0ZWQgYnkgYSBjb21tYVwiLFxuICAgIHNlbWljb2xvbjogXCJFdmVyeSBsaW5lIG9mIGNvZGUgb3IgU1RBVEVNRU5UIG11c3QgZW5kIHdpdGggYSBzZW1pY29sb24gJzsnXCIsXG4gICAgcGFyZW50aGVzZXM6IFwiWW91IG5lZWQgYW4gb3BlbmluZyAnKCcgYW5kIGEgY2xvc2luZyAnKScgcGFyZW50aGVzZXMuXCIsXG4gICAgbnVtYmVyOiBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIG1pc3NpbmcgYSBudW1iZXIgYmV0d2VlbiB0aGUgb3BlbmluZyAnKCcgYW5kIGNsb3NpbmcgJyknIHBhcmVudGhlc2VzLlwiXG4gIH0sXG5cbiAgLy8gQ3VzdG9tIGZ1bmN0aW9ucyB0byBoYW5kbGUgdGFpbG9yZWQgZmVlZGJhY2suXG4gIGNyZWF0ZVBsYXRmb3JtOiBmdW5jdGlvbih0b2tlbnMsIGluZGV4KXtcbiAgICAvLyBIYW5kbGUgbXVsdGlscGUgc2lnbmF0dXJlcyBvZiBjcmVhdGVQbGF0Zm9ybSAoNCBhbmQgNSBhcmd1bWVudHMpXG4gICAgdmFyIHRlc3RzID0ge1xuICAgICAgICBmb3VyQXJnczogW1xuICAgICAgICAgICAvLyBXZSBtaWdodCBhbGxvdyBtdWx0aXBsZSBvcHRpb25zLCBzdWNoIGFzIElkZW50aWZpZXIgb3IgTnVtZXJpYy4gVXNlIGFycmF5cyB0byBhY2NvdW50IGZvciB0aGF0XG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycoJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnTnVtZXJpYycsICdJZGVudGlmaWVyJ10sICAgICAgICAgICAgICAgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCAgICAgICAgICAgICAgIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLm51bWJlciAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJywnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLmNvbW1hICB9LFxuICAgICAgICAgICB7dHlwZTogWydOdW1lcmljJywgJ0lkZW50aWZpZXInXSwgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCAsICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycpJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJzsnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnNlbWljb2xvbiAgfSxcbiAgICAgICAgIF0sXG4gICAgICAgICBmaXZlQXJnczogW1xuICAgICAgICAgICAvLyBXZSBtaWdodCBhbGxvdyBtdWx0aXBsZSBvcHRpb25zLCBzdWNoIGFzIElkZW50aWZpZXIgb3IgTnVtZXJpYy4gVXNlIGFycmF5cyB0byBhY2NvdW50IGZvciB0aGF0XG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycoJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnTnVtZXJpYycsICdJZGVudGlmaWVyJ10sICAgICAgICAgICAgICAgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCAgICAgICAgICAgICAgIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLm51bWJlciAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJywnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLmNvbW1hICB9LFxuICAgICAgICAgICB7dHlwZTogWydOdW1lcmljJywgJ0lkZW50aWZpZXInXSwgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCAsICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycsJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5jb21tYSAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnU3RyaW5nJywgJ0lkZW50aWZpZXInXSwgIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLmNvbG9yIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycpJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJzsnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnNlbWljb2xvbiAgfSxcbiAgICAgICAgIF1cbiAgICB9XG5cbiAgICAvLyBPbmx5IHR3byBsZXZlbHMgcmVxdWlyZSB0aGUgdGVzdCB3aXRoIDQgYXJndW1lbnRzXG4gICAgdmFyIHRlc3QgPSAoIGN1cnJlbnRMZXZlbCA+IDEgJiYgY3VycmVudExldmVsIDwgNCApID8gdGVzdHMuZm91ckFyZ3MgOiB0ZXN0cy5maXZlQXJncztcbiAgXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZXN0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAvLyBOZWVkIHRvIGFkZCAxIHRvIHRoZSBwYXNzZWQgaW5kZXggdG8gYmVnaW4gY2hlY2tzIGFmdGVyIHRoZSB0cmlnZ2VyaW5nIGlkZW50aWZpZXJcbiAgICAgIHZhciB0b2tlbkluZGV4ID0gaW5kZXggKyAxICsgajtcblxuICAgICAgdmFyIHRva2VuVHlwZSA9IHRva2Vuc1t0b2tlbkluZGV4XS50eXBlO1xuICAgICAgdmFyIHRva2VuVmFsdWUgPSB0b2tlbnNbdG9rZW5JbmRleF0udmFsdWU7XG5cbiAgICAgIGlmKCB0ZXN0W2pdLnR5cGUuaW5kZXhPZiggdG9rZW5UeXBlICkgPT0gLTEgKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnIgQVwiKTtcbiAgICAgICAgY29uc29sZS5sb2codG9rZW5UeXBlKTtcbiAgICAgICAgY29uc29sZS5sb2codGVzdFtqXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRlc3QpO1xuICAgICAgICBjb25zb2xlLmxvZyh0b2tlbnNbdG9rZW5JbmRleF0pO1xuXG4gICAgICAgIC8vIEVycm9yIGZvdW5kLiBEaXNwbGF5IHRvIHRoZSB1c2VyIGFuZCBleGl0XG4gICAgICAgIHZhciBlcnIgPSB7XG4gICAgICAgICAgLy8gVXNlIG9yaWdpbmFsIGluZGV4IHRvIGhpZ2hsaWdodCB0aGUgY29ycmVjdCBsaW5lXG4gICAgICAgICAgdG9rZW46IHRva2Vuc1tpbmRleF0sIFxuICAgICAgICAgIGVyck1zZzogdGVzdFtqXS5lcnJvck1zZ1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiT3V0cHV0IGVycm9yXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuXG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKCBlcnIudG9rZW4ubG9jLnN0YXJ0LmxpbmUsIGVyci5lcnJNc2cgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBuZWVkIGEgc3BlY2lmaWMgdmFsdWUsIGNoZWNrIGl0XG4gICAgICBpZiggdGVzdFtqXS52YWx1ZSAmJiB0ZXN0W2pdLnZhbHVlLmluZGV4T2YoIHRva2VuVmFsdWUgKSA9PSAtMSApe1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVyciBCXCIpO1xuICAgICAgICAvLyBFcnJvciBmb3VuZC4gRGlzcGxheSB0byB0aGUgdXNlciBhbmQgZXhpdFxuICAgICAgICB2YXIgZXJyID0ge1xuICAgICAgICAgIC8vIFVzZSBvcmlnaW5hbCBpbmRleCB0byBoaWdobGlnaHQgdGhlIGNvcnJlY3QgbGluZVxuICAgICAgICAgIHRva2VuOiB0b2tlbnNbaW5kZXhdLCBcbiAgICAgICAgICBlcnJNc2c6IHRlc3Rbal0uZXJyb3JNc2dcbiAgICAgICAgfTtcblxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoIGVyci50b2tlbi5sb2Muc3RhcnQubGluZSwgZXJyLmVyck1zZyApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfTsgICAgICAgICAgIFxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgbWFrZVBsYXllckp1bXA6IGZ1bmN0aW9uKHRva2VucywgaW5kZXgpe1xuICAgIC8vIEhhbmRsZSBtdWx0aWxwZSBzaWduYXR1cmVzIG9mIGNyZWF0ZVBsYXRmb3JtICg0IGFuZCA1IGFyZ3VtZW50cylcbiAgICB2YXIgdGVzdHMgPSB7XG4gICAgICAgIG9uZUFyZ3M6IFtcbiAgICAgICAgICAgLy8gV2UgbWlnaHQgYWxsb3cgbXVsdGlwbGUgb3B0aW9ucywgc3VjaCBhcyBJZGVudGlmaWVyIG9yIE51bWVyaWMuIFVzZSBhcnJheXMgdG8gYWNjb3VudCBmb3IgdGhhdFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnKCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MucGFyZW50aGVzZXMgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCAsICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycpJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJzsnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnNlbWljb2xvbiAgfSxcbiAgICAgICAgIF0sXG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHdoYXQgZnVuY3Rpb24gc2lnbmF0dXJlIHdlIG5lZWQgdG8gY29tcGFyZSBhZ2FpbnN0XG4gICAgdmFyIHRlc3QgPSB0ZXN0cy5vbmVBcmdzO1xuICBcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlc3QubGVuZ3RoOyBqKyspIHtcbiAgICAgIC8vIE5lZWQgdG8gYWRkIDEgdG8gdGhlIHBhc3NlZCBpbmRleCB0byBiZWdpbiBjaGVja3MgYWZ0ZXIgdGhlIHRyaWdnZXJpbmcgaWRlbnRpZmllclxuICAgICAgdmFyIHRva2VuSW5kZXggPSBpbmRleCArIDEgKyBqO1xuXG4gICAgICB2YXIgdG9rZW5UeXBlID0gdG9rZW5zW3Rva2VuSW5kZXhdLnR5cGU7XG4gICAgICB2YXIgdG9rZW5WYWx1ZSA9IHRva2Vuc1t0b2tlbkluZGV4XS52YWx1ZTtcblxuICAgICAgaWYoIHRlc3Rbal0udHlwZS5pbmRleE9mKCB0b2tlblR5cGUgKSA9PSAtMSApe1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVyciBBXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyh0b2tlblR5cGUpO1xuICAgICAgICBjb25zb2xlLmxvZyh0ZXN0W2pdKTtcbiAgICAgICAgY29uc29sZS5sb2codGVzdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2Vuc1t0b2tlbkluZGV4XSk7XG4gICAgICAgIC8vIEVycm9yIGZvdW5kLiBEaXNwbGF5IHRvIHRoZSB1c2VyIGFuZCBleGl0XG4gICAgICAgIHZhciBlcnIgPSB7XG4gICAgICAgICAgLy8gVXNlIG9yaWdpbmFsIGluZGV4IHRvIGhpZ2hsaWdodCB0aGUgY29ycmVjdCBsaW5lXG4gICAgICAgICAgdG9rZW46IHRva2Vuc1tpbmRleF0sIFxuICAgICAgICAgIGVyck1zZzogdGVzdFtqXS5lcnJvck1zZ1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKCBlcnIudG9rZW4ubG9jLnN0YXJ0LmxpbmUsIGVyci5lcnJNc2cgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH07ICAgICAgICAgICBcbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIHNldFNwZWVkOiBmdW5jdGlvbih0b2tlbnMsIGluZGV4KXtcblxuICAgIC8vIEhhbmRsZSBtdWx0aWxwZSBzaWduYXR1cmVzIG9mIGNyZWF0ZVBsYXRmb3JtICg0IGFuZCA1IGFyZ3VtZW50cylcbiAgICB2YXIgdGVzdHMgPSB7XG4gICAgICAgIHR3b0FyZ3M6IFtcbiAgICAgICAgICAgLy8gV2UgbWlnaHQgYWxsb3cgbXVsdGlwbGUgb3B0aW9ucywgc3VjaCBhcyBJZGVudGlmaWVyIG9yIE51bWVyaWMuIFVzZSBhcnJheXMgdG8gYWNjb3VudCBmb3IgdGhhdFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnKCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MucGFyZW50aGVzZXMgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWyctJ10sICBvcHRpb25hbDogdHJ1ZSwgZXJyb3JNc2c6ICdPcHRpb25hbCB2YWx1ZScgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCwgICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycsJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5jb21tYSAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJy0nXSwgIG9wdGlvbmFsOiB0cnVlLCBlcnJvck1zZzogJ09wdGlvbmFsIHZhbHVlJyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnTnVtZXJpYycsICdJZGVudGlmaWVyJ10sIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLm51bWJlciAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJyknXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnBhcmVudGhlc2VzICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnOyddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3Muc2VtaWNvbG9uICB9LFxuICAgICAgICAgXSxcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgd2hhdCBmdW5jdGlvbiBzaWduYXR1cmUgd2UgbmVlZCB0byBjb21wYXJlIGFnYWluc3RcbiAgICB2YXIgdGVzdCA9IHRlc3RzLnR3b0FyZ3M7XG4gIFxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVzdC5sZW5ndGg7IGorKykge1xuICAgICAgLy8gTmVlZCB0byBhZGQgMSB0byB0aGUgcGFzc2VkIGluZGV4IHRvIGJlZ2luIGNoZWNrcyBhZnRlciB0aGUgdHJpZ2dlcmluZyBpZGVudGlmaWVyXG4gICAgICB2YXIgdG9rZW5JbmRleCA9IGluZGV4ICsgMSArIGo7XG5cbiAgICAgIHZhciB0b2tlblR5cGUgPSB0b2tlbnNbdG9rZW5JbmRleF0udHlwZTtcbiAgICAgIHZhciB0b2tlblZhbHVlID0gdG9rZW5zW3Rva2VuSW5kZXhdLnZhbHVlO1xuXG4gICAgICAvL0lmIHRoZSBjdXJyZW50IHRlc3QgdmFsdWUgaXMgb3B0aW9uYWwsIGRvbid0IGVycm9yIG91dFxuICAgICAgaWYodGVzdFtqXS5vcHRpb25hbCl7XG4gICAgICAgIC8vSWYgdGhlIG9wdGlvbmFsIHRlc3QgcGFzc2VzLCBjb250aW51ZSB0byBuZXh0IGl0ZXJhdGlvblxuICAgICAgICBpZih0ZXN0W2pdLnR5cGUuaW5kZXhPZiggdG9rZW5UeXBlICkgIT09IC0xKXtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vT3RoZXJ3aXNlIHJlbW92ZSB0aGUgb3B0aW9uYWwgdGVzdFxuICAgICAgICB0ZXN0LnNwbGljZShqLCAxKTtcbiAgICAgIH1cblxuXG5cbiAgICAgIGlmKCB0ZXN0W2pdLnR5cGUuaW5kZXhPZiggdG9rZW5UeXBlICkgPT0gLTEpe1xuICAgICAgICBkZWIgPSB0b2tlbnNbdG9rZW5JbmRleF07XG4gICAgICAgIGNvbnNvbGUubG9nKFwic2V0U3BlZWQgZXJyb3IgZm91bmRcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2VuVHlwZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRlc3Rbal0pO1xuICAgICAgICBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgY29uc29sZS5sb2codG9rZW5zW3Rva2VuSW5kZXhdKTtcbiAgICAgICAgLy8gRXJyb3IgZm91bmQuIERpc3BsYXkgdG8gdGhlIHVzZXIgYW5kIGV4aXRcbiAgICAgICAgdmFyIGVyciA9IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luYWwgaW5kZXggdG8gaGlnaGxpZ2h0IHRoZSBjb3JyZWN0IGxpbmVcbiAgICAgICAgICB0b2tlbjogdG9rZW5zW2luZGV4XSwgXG4gICAgICAgICAgZXJyTXNnOiB0ZXN0W2pdLmVycm9yTXNnXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoIGVyci50b2tlbi5sb2Muc3RhcnQubGluZSwgZXJyLmVyck1zZyApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfTsgICAgICAgICAgIFxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbn1cblxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
