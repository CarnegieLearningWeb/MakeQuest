for(var queryParams=parent.window.location.search.substring(1).split("&"),language="",languagePath="",i=0;i<queryParams.length;i++)queryParams[i].indexOf("lang")>-1&&(language=queryParams[i].split("=")[1],languagePath=language+"/");var errorMsgs={color:"You need a valid color name. Make sure you're spelling the name of your color correctly, and that it's surrounded with quotation marks.",comma:"Every value or ARGUMENT inside parentheses must be separated by a comma",semicolon:"Every line of code or STATEMENT must end with a semicolon ';'",parentheses:"You need an opening '(' and a closing ')' parentheses.",number:"It looks like you're missing a number between the opening '(' and closing ')' parentheses."};"es"==language&&(errorMsgs={color:"El nombre del color debe ser en inglés. Verifica que el nombre esté bien escrito, y que se encuentre entre comillas.",comma:"Los valores o ARGUMENTS entre paréntesis deben estar separados por una coma",semicolon:"Cada línea de código o STATEMENT termina con ';'",parentheses:"Necesitas dos paréntesis, uno izquierdo '(' y otro derecho ')'",number:"Hace falta un número entre los paréntesis '(' y ')'."});var CustomErrors={test:function(r){try{tokens=esprima.tokenize(r,{range:!0,loc:!0})}catch(e){console.log("ERROR TOKENIZING"),console.log(e);var o="Unexpected token ILLEGAL"==e.description?"It looks like you have a typo. Make sure your STRINGS have an opening ' and a closing ' ":e.description;return this.displayError(e.lineNumber,o),!0}for(var s=0;s<tokens.length;s++)if("Identifier"==tokens[s].type&&Object.keys(CustomErrors).indexOf(tokens[s].value)>-1){console.log(tokens[s].value);var t=CustomErrors[tokens[s].value](tokens,s);if(t)return t}return!1},displayError:function(r,e){console.log("Error found"),markJsErrorAtLine(r),$("#errorModal p.error-text").text(e),$("#errorModal").foundation("reveal","open")},errorMsgs:errorMsgs,createPlatform:function(r,e){for(var o={fourArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}],fiveArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["String","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.color},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}]},s=currentLevel>1&&currentLevel<4?o.fourArgs:o.fiveArgs,t=0;t<s.length;t++){var n=e+1+t,u=r[n].type,a=r[n].value;if(s[t].type.indexOf(u)==-1){console.log("Err A"),console.log(u),console.log(s[t]),console.log(s),console.log(r[n]);var l={token:r[e],errMsg:s[t].errorMsg};return console.log("Output error"),console.log(l),this.displayError(l.token.loc.start.line,l.errMsg),!0}if(s[t].value&&s[t].value.indexOf(a)==-1){console.log("Err B");var l={token:r[e],errMsg:s[t].errorMsg};return this.displayError(l.token.loc.start.line,l.errMsg),!0}}return!1},makePlayerJump:function(r,e){for(var o={oneArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}]},s=o.oneArgs,t=0;t<s.length;t++){var n=e+1+t,u=r[n].type;r[n].value;if(s[t].type.indexOf(u)==-1){console.log("Err A"),console.log(u),console.log(s[t]),console.log(s),console.log(r[n]);var a={token:r[e],errMsg:s[t].errorMsg};return this.displayError(a.token.loc.start.line,a.errMsg),!0}}return!1},setSpeed:function(r,e){for(var o={twoArgs:[{type:["Punctuator"],value:["("],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:["-"],optional:!0,errorMsg:"Optional value"},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[","],errorMsg:CustomErrors.errorMsgs.comma},{type:["Punctuator"],value:["-"],optional:!0,errorMsg:"Optional value"},{type:["Numeric","Identifier"],value:null,errorMsg:CustomErrors.errorMsgs.number},{type:["Punctuator"],value:[")"],errorMsg:CustomErrors.errorMsgs.parentheses},{type:["Punctuator"],value:[";"],errorMsg:CustomErrors.errorMsgs.semicolon}]},s=o.twoArgs,t=0;t<s.length;t++){var n=e+1+t,u=r[n].type;r[n].value;if(s[t].optional){if(s[t].type.indexOf(u)!==-1)continue;s.splice(t,1)}if(s[t].type.indexOf(u)==-1){deb=r[n],console.log("setSpeed error found"),console.log(u),console.log(s[t]),console.log(s),console.log(r[n]);var a={token:r[e],errMsg:s[t].errorMsg};return this.displayError(a.token.loc.start.line,a.errMsg),!0}}return!1}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2N1c3RvbS1lcnJvcnMuanMiXSwibmFtZXMiOlsicXVlcnlQYXJhbXMiLCJwYXJlbnQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInNwbGl0IiwibGFuZ3VhZ2UiLCJsYW5ndWFnZVBhdGgiLCJpIiwibGVuZ3RoIiwiaW5kZXhPZiIsImVycm9yTXNncyIsImNvbG9yIiwiY29tbWEiLCJzZW1pY29sb24iLCJwYXJlbnRoZXNlcyIsIm51bWJlciIsIkN1c3RvbUVycm9ycyIsInRlc3QiLCJjb2RlIiwidG9rZW5zIiwiZXNwcmltYSIsInRva2VuaXplIiwicmFuZ2UiLCJsb2MiLCJlIiwiY29uc29sZSIsImxvZyIsIm1zZyIsImRlc2NyaXB0aW9uIiwidGhpcyIsImRpc3BsYXlFcnJvciIsImxpbmVOdW1iZXIiLCJ0eXBlIiwiT2JqZWN0Iiwia2V5cyIsInZhbHVlIiwiZXJyIiwibWVzc2FnZSIsIm1hcmtKc0Vycm9yQXRMaW5lIiwiJCIsInRleHQiLCJmb3VuZGF0aW9uIiwiY3JlYXRlUGxhdGZvcm0iLCJpbmRleCIsInRlc3RzIiwiZm91ckFyZ3MiLCJlcnJvck1zZyIsImZpdmVBcmdzIiwiY3VycmVudExldmVsIiwiaiIsInRva2VuSW5kZXgiLCJ0b2tlblR5cGUiLCJ0b2tlblZhbHVlIiwidG9rZW4iLCJlcnJNc2ciLCJzdGFydCIsImxpbmUiLCJtYWtlUGxheWVySnVtcCIsIm9uZUFyZ3MiLCJzZXRTcGVlZCIsInR3b0FyZ3MiLCJvcHRpb25hbCIsInNwbGljZSIsImRlYiJdLCJtYXBwaW5ncyI6IkFBS0EsSUFBSyxHQUpEQSxhQUFjQyxPQUFPQyxPQUFPQyxTQUFTQyxPQUFPQyxVQUFVLEdBQUdDLE1BQU0sS0FFL0RDLFNBQVcsR0FDWEMsYUFBZSxHQUNWQyxFQUFJLEVBQUdBLEVBQUlULFlBQVlVLE9BQVFELElBQ25DVCxZQUFZUyxHQUFHRSxRQUFRLGFBQ3hCSixTQUFXUCxZQUFZUyxHQUFHSCxNQUFNLEtBQUssR0FDckNFLGFBQWVELFNBQVMsSUFJNUIsSUFBSUssWUFDRkMsTUFBTywwSUFDUEMsTUFBTywwRUFDUEMsVUFBVyxnRUFDWEMsWUFBYSx5REFDYkMsT0FBUSw2RkFJSyxPQUFaVixXQUNESyxXQUNFQyxNQUFPLHVIQUNQQyxNQUFPLDhFQUNQQyxVQUFXLG1EQUNYQyxZQUFhLGlFQUNiQyxPQUFRLHdEQUlaLElBQUlDLGVBRUZDLEtBQU0sU0FBVUMsR0FDZCxJQUNFQyxPQUFTQyxRQUFRQyxTQUFVSCxHQUFPSSxPQUFPLEVBQU1DLEtBQUssSUFDckQsTUFBTUMsR0FFTEMsUUFBUUMsSUFBSSxvQkFDWkQsUUFBUUMsSUFBSUYsRUFFWixJQUFJRyxHQUF1Qiw0QkFBakJILEVBQUVJLFlBQTRDLDJGQUE2RkosRUFBRUksV0FHdkosT0FGQUMsTUFBS0MsYUFBY04sRUFBRU8sV0FBWUosSUFFMUIsRUFJVCxJQUFLLEdBQUlwQixHQUFJLEVBQUdBLEVBQUlZLE9BQU9YLE9BQVFELElBRWpDLEdBQXNCLGNBQWxCWSxPQUFPWixHQUFHeUIsTUFBd0JDLE9BQU9DLEtBQUtsQixjQUFjUCxRQUFTVSxPQUFPWixHQUFHNEIsVUFBYyxDQUMvRlYsUUFBUUMsSUFBSVAsT0FBT1osR0FBRzRCLE1BQ3RCLElBQUlDLEdBQU1wQixhQUFhRyxPQUFPWixHQUFHNEIsT0FBT2hCLE9BQVFaLEVBQ2hELElBQUk2QixFQUVGLE1BQU9BLEdBS2IsT0FBTyxHQUdUTixhQUFjLFNBQVM3QixFQUFVb0MsR0FDL0JaLFFBQVFDLElBQUksZUFDWlksa0JBQW1CckMsR0FFbkJzQyxFQUFFLDRCQUE0QkMsS0FBTUgsR0FDcENFLEVBQUUsZUFBZUUsV0FBVyxTQUFVLFNBR3hDL0IsVUFBV0EsVUFHWGdDLGVBQWdCLFNBQVN2QixFQUFRd0IsR0FvQy9CLElBQUssR0FsQ0RDLElBQ0FDLFdBRUliLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVJLGNBQ2pGa0IsTUFBTyxVQUFXLGNBQTZCRyxNQUFPLEtBQVFXLFNBQVU5QixhQUFhTixVQUFVSyxTQUMvRmlCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVFLFFBQ2pGb0IsTUFBTyxVQUFXLGNBQTZCRyxNQUFPLEtBQVFXLFNBQVU5QixhQUFhTixVQUFVSyxTQUMvRmlCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVFLFFBQ2pGb0IsTUFBTyxVQUFXLGNBQWVHLE1BQU8sS0FBUVcsU0FBVTlCLGFBQWFOLFVBQVVLLFNBQ2pGaUIsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUUsUUFDakZvQixNQUFPLFVBQVcsY0FBZUcsTUFBTyxLQUFRVyxTQUFVOUIsYUFBYU4sVUFBVUssU0FDakZpQixNQUFPLGNBQTBCRyxPQUFRLEtBQU9XLFNBQVU5QixhQUFhTixVQUFVSSxjQUNqRmtCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVHLFlBRXBGa0MsV0FFR2YsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUksY0FDakZrQixNQUFPLFVBQVcsY0FBNkJHLE1BQU8sS0FBUVcsU0FBVTlCLGFBQWFOLFVBQVVLLFNBQy9GaUIsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUUsUUFDakZvQixNQUFPLFVBQVcsY0FBNkJHLE1BQU8sS0FBUVcsU0FBVTlCLGFBQWFOLFVBQVVLLFNBQy9GaUIsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUUsUUFDakZvQixNQUFPLFVBQVcsY0FBZUcsTUFBTyxLQUFRVyxTQUFVOUIsYUFBYU4sVUFBVUssU0FDakZpQixNQUFPLGNBQTBCRyxPQUFRLEtBQU9XLFNBQVU5QixhQUFhTixVQUFVRSxRQUNqRm9CLE1BQU8sVUFBVyxjQUFlRyxNQUFPLEtBQVFXLFNBQVU5QixhQUFhTixVQUFVSyxTQUNqRmlCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVFLFFBQ2pGb0IsTUFBTyxTQUFVLGNBQWdCRyxNQUFPLEtBQVFXLFNBQVU5QixhQUFhTixVQUFVQyxRQUNqRnFCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVJLGNBQ2pGa0IsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUcsYUFLckZJLEVBQVMrQixhQUFlLEdBQUtBLGFBQWUsRUFBTUosRUFBTUMsU0FBV0QsRUFBTUcsU0FFcEVFLEVBQUksRUFBR0EsRUFBSWhDLEVBQUtULE9BQVF5QyxJQUFLLENBRXBDLEdBQUlDLEdBQWFQLEVBQVEsRUFBSU0sRUFFekJFLEVBQVloQyxFQUFPK0IsR0FBWWxCLEtBQy9Cb0IsRUFBYWpDLEVBQU8rQixHQUFZZixLQUVwQyxJQUFJbEIsRUFBS2dDLEdBQUdqQixLQUFLdkIsUUFBUzBDLE9BQW1CLENBQzNDMUIsUUFBUUMsSUFBSSxTQUNaRCxRQUFRQyxJQUFJeUIsR0FDWjFCLFFBQVFDLElBQUlULEVBQUtnQyxJQUNqQnhCLFFBQVFDLElBQUlULEdBQ1pRLFFBQVFDLElBQUlQLEVBQU8rQixHQUduQixJQUFJZCxJQUVGaUIsTUFBT2xDLEVBQU93QixHQUNkVyxPQUFRckMsRUFBS2dDLEdBQUdILFNBUWxCLE9BTEFyQixTQUFRQyxJQUFJLGdCQUNaRCxRQUFRQyxJQUFJVSxHQUVaUCxLQUFLQyxhQUFjTSxFQUFJaUIsTUFBTTlCLElBQUlnQyxNQUFNQyxLQUFNcEIsRUFBSWtCLFNBRTFDLEVBSVQsR0FBSXJDLEVBQUtnQyxHQUFHZCxPQUFTbEIsRUFBS2dDLEdBQUdkLE1BQU0xQixRQUFTMkMsT0FBb0IsQ0FDOUQzQixRQUFRQyxJQUFJLFFBRVosSUFBSVUsSUFFRmlCLE1BQU9sQyxFQUFPd0IsR0FDZFcsT0FBUXJDLEVBQUtnQyxHQUFHSCxTQU1sQixPQUZBakIsTUFBS0MsYUFBY00sRUFBSWlCLE1BQU05QixJQUFJZ0MsTUFBTUMsS0FBTXBCLEVBQUlrQixTQUUxQyxHQUlYLE9BQU8sR0FFVEcsZUFBZ0IsU0FBU3RDLEVBQVF3QixHQWUvQixJQUFLLEdBYkRDLElBQ0FjLFVBRUkxQixNQUFPLGNBQTBCRyxPQUFRLEtBQU9XLFNBQVU5QixhQUFhTixVQUFVSSxjQUNqRmtCLE1BQU8sVUFBVyxjQUFlRyxNQUFPLEtBQVFXLFNBQVU5QixhQUFhTixVQUFVSyxTQUNqRmlCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVJLGNBQ2pGa0IsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUcsYUFLckZJLEVBQU8yQixFQUFNYyxRQUVSVCxFQUFJLEVBQUdBLEVBQUloQyxFQUFLVCxPQUFReUMsSUFBSyxDQUVwQyxHQUFJQyxHQUFhUCxFQUFRLEVBQUlNLEVBRXpCRSxFQUFZaEMsRUFBTytCLEdBQVlsQixJQUNsQmIsR0FBTytCLEdBQVlmLEtBRXBDLElBQUlsQixFQUFLZ0MsR0FBR2pCLEtBQUt2QixRQUFTMEMsT0FBbUIsQ0FDM0MxQixRQUFRQyxJQUFJLFNBQ1pELFFBQVFDLElBQUl5QixHQUNaMUIsUUFBUUMsSUFBSVQsRUFBS2dDLElBQ2pCeEIsUUFBUUMsSUFBSVQsR0FDWlEsUUFBUUMsSUFBSVAsRUFBTytCLEdBRW5CLElBQUlkLElBRUZpQixNQUFPbEMsRUFBT3dCLEdBQ2RXLE9BQVFyQyxFQUFLZ0MsR0FBR0gsU0FLbEIsT0FGQWpCLE1BQUtDLGFBQWNNLEVBQUlpQixNQUFNOUIsSUFBSWdDLE1BQU1DLEtBQU1wQixFQUFJa0IsU0FFMUMsR0FJWCxPQUFPLEdBRVRLLFNBQVUsU0FBU3hDLEVBQVF3QixHQW9CekIsSUFBSyxHQWpCREMsSUFDQWdCLFVBRUk1QixNQUFPLGNBQTBCRyxPQUFRLEtBQU9XLFNBQVU5QixhQUFhTixVQUFVSSxjQUNqRmtCLE1BQU8sY0FBMEJHLE9BQVEsS0FBTzBCLFVBQVUsRUFBTWYsU0FBVSxtQkFDMUVkLE1BQU8sVUFBVyxjQUFlRyxNQUFPLEtBQVFXLFNBQVU5QixhQUFhTixVQUFVSyxTQUNqRmlCLE1BQU8sY0FBMEJHLE9BQVEsS0FBT1csU0FBVTlCLGFBQWFOLFVBQVVFLFFBQ2pGb0IsTUFBTyxjQUEwQkcsT0FBUSxLQUFPMEIsVUFBVSxFQUFNZixTQUFVLG1CQUMxRWQsTUFBTyxVQUFXLGNBQWVHLE1BQU8sS0FBUVcsU0FBVTlCLGFBQWFOLFVBQVVLLFNBQ2pGaUIsTUFBTyxjQUEwQkcsT0FBUSxLQUFPVyxTQUFVOUIsYUFBYU4sVUFBVUksY0FDakZrQixNQUFPLGNBQTBCRyxPQUFRLEtBQU9XLFNBQVU5QixhQUFhTixVQUFVRyxhQUtyRkksRUFBTzJCLEVBQU1nQixRQUVSWCxFQUFJLEVBQUdBLEVBQUloQyxFQUFLVCxPQUFReUMsSUFBSyxDQUVwQyxHQUFJQyxHQUFhUCxFQUFRLEVBQUlNLEVBRXpCRSxFQUFZaEMsRUFBTytCLEdBQVlsQixJQUNsQmIsR0FBTytCLEdBQVlmLEtBR3BDLElBQUdsQixFQUFLZ0MsR0FBR1ksU0FBUyxDQUVsQixHQUFHNUMsRUFBS2dDLEdBQUdqQixLQUFLdkIsUUFBUzBDLFFBQ3ZCLFFBSUZsQyxHQUFLNkMsT0FBT2IsRUFBRyxHQUtqQixHQUFJaEMsRUFBS2dDLEdBQUdqQixLQUFLdkIsUUFBUzBDLE9BQWtCLENBQzFDWSxJQUFNNUMsRUFBTytCLEdBQ2J6QixRQUFRQyxJQUFJLHdCQUNaRCxRQUFRQyxJQUFJeUIsR0FDWjFCLFFBQVFDLElBQUlULEVBQUtnQyxJQUNqQnhCLFFBQVFDLElBQUlULEdBQ1pRLFFBQVFDLElBQUlQLEVBQU8rQixHQUVuQixJQUFJZCxJQUVGaUIsTUFBT2xDLEVBQU93QixHQUNkVyxPQUFRckMsRUFBS2dDLEdBQUdILFNBS2xCLE9BRkFqQixNQUFLQyxhQUFjTSxFQUFJaUIsTUFBTTlCLElBQUlnQyxNQUFNQyxLQUFNcEIsRUFBSWtCLFNBRTFDLEdBSVgsT0FBTyIsImZpbGUiOiJqcy9jdXN0b20tZXJyb3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU2V0IGxhbmd1YWdlXG52YXIgcXVlcnlQYXJhbXMgPSBwYXJlbnQud2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKTtcbi8vIERlZmF1bHQgdG8gZW5nbGlzaCA9PiAnJ1xudmFyIGxhbmd1YWdlID0gJyc7XG52YXIgbGFuZ3VhZ2VQYXRoID0gJyc7XG5mb3IgKHZhciBpID0gMDsgaSA8IHF1ZXJ5UGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gIGlmKHF1ZXJ5UGFyYW1zW2ldLmluZGV4T2YoJ2xhbmcnKT4tMSl7XG4gICAgbGFuZ3VhZ2UgPSBxdWVyeVBhcmFtc1tpXS5zcGxpdCgnPScpWzFdO1xuICAgIGxhbmd1YWdlUGF0aCA9IGxhbmd1YWdlKycvJztcbiAgfVxufVxuXG52YXIgZXJyb3JNc2dzID0ge1xuICBjb2xvcjogXCJZb3UgbmVlZCBhIHZhbGlkIGNvbG9yIG5hbWUuIE1ha2Ugc3VyZSB5b3UncmUgc3BlbGxpbmcgdGhlIG5hbWUgb2YgeW91ciBjb2xvciBjb3JyZWN0bHksIGFuZCB0aGF0IGl0J3Mgc3Vycm91bmRlZCB3aXRoIHF1b3RhdGlvbiBtYXJrcy5cIixcbiAgY29tbWE6IFwiRXZlcnkgdmFsdWUgb3IgQVJHVU1FTlQgaW5zaWRlIHBhcmVudGhlc2VzIG11c3QgYmUgc2VwYXJhdGVkIGJ5IGEgY29tbWFcIixcbiAgc2VtaWNvbG9uOiBcIkV2ZXJ5IGxpbmUgb2YgY29kZSBvciBTVEFURU1FTlQgbXVzdCBlbmQgd2l0aCBhIHNlbWljb2xvbiAnOydcIixcbiAgcGFyZW50aGVzZXM6IFwiWW91IG5lZWQgYW4gb3BlbmluZyAnKCcgYW5kIGEgY2xvc2luZyAnKScgcGFyZW50aGVzZXMuXCIsXG4gIG51bWJlcjogXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBtaXNzaW5nIGEgbnVtYmVyIGJldHdlZW4gdGhlIG9wZW5pbmcgJygnIGFuZCBjbG9zaW5nICcpJyBwYXJlbnRoZXNlcy5cIlxufTtcblxuLy8gU3BhbmlzaCBlcnJvcnNcbmlmKGxhbmd1YWdlID09ICdlcycpe1xuICBlcnJvck1zZ3MgPSB7XG4gICAgY29sb3I6IFwiRWwgbm9tYnJlIGRlbCBjb2xvciBkZWJlIHNlciBlbiBpbmdsw6lzLiBWZXJpZmljYSBxdWUgZWwgbm9tYnJlIGVzdMOpIGJpZW4gZXNjcml0bywgeSBxdWUgc2UgZW5jdWVudHJlIGVudHJlIGNvbWlsbGFzLlwiLFxuICAgIGNvbW1hOiBcIkxvcyB2YWxvcmVzIG8gQVJHVU1FTlRTIGVudHJlIHBhcsOpbnRlc2lzIGRlYmVuIGVzdGFyIHNlcGFyYWRvcyBwb3IgdW5hIGNvbWFcIixcbiAgICBzZW1pY29sb246IFwiQ2FkYSBsw61uZWEgZGUgY8OzZGlnbyBvIFNUQVRFTUVOVCB0ZXJtaW5hIGNvbiAnOydcIixcbiAgICBwYXJlbnRoZXNlczogXCJOZWNlc2l0YXMgZG9zIHBhcsOpbnRlc2lzLCB1bm8gaXpxdWllcmRvICcoJyB5IG90cm8gZGVyZWNobyAnKSdcIixcbiAgICBudW1iZXI6IFwiSGFjZSBmYWx0YSB1biBuw7ptZXJvIGVudHJlIGxvcyBwYXLDqW50ZXNpcyAnKCcgeSAnKScuXCJcbiAgfTtcbn1cblxudmFyIEN1c3RvbUVycm9ycyA9IHtcbiAgLy9NYWluIGZ1bmNpdG9uIHRvIGJlIGNhbGxlZCB3aGVuIHBlcmZvcm1pbmcgdGVzdHNcbiAgdGVzdDogZnVuY3Rpb24oIGNvZGUgKXtcbiAgICB0cnl7XG4gICAgICB0b2tlbnMgPSBlc3ByaW1hLnRva2VuaXplKCBjb2RlLCB7cmFuZ2U6IHRydWUsIGxvYzogdHJ1ZX0gKTtcbiAgICB9Y2F0Y2goZSl7XG4gICAgICAvLyBJZiB0b2tlbml6ZSBmaWxlcyB3ZSB3b24ndCBoYXZlIHRva2VucyB0byBsb29wIHRocm91Z2guIFRocm93IGJhY2sgd2hhdGV2ZXIgZXJyb3Igd2UgZ290XG4gICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIFRPS0VOSVpJTkdcIik7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcblxuICAgICAgdmFyIG1zZyA9IGUuZGVzY3JpcHRpb24gPT0gXCJVbmV4cGVjdGVkIHRva2VuIElMTEVHQUxcIiA/IFwiSXQgbG9va3MgbGlrZSB5b3UgaGF2ZSBhIHR5cG8uIE1ha2Ugc3VyZSB5b3VyIFNUUklOR1MgaGF2ZSBhbiBvcGVuaW5nICcgYW5kIGEgY2xvc2luZyAnIFwiIDogZS5kZXNjcmlwdGlvbjtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKCBlLmxpbmVOdW1iZXIsIG1zZyApO1xuICAgICAgLy9CcmVhayBhcyBzb29uIGFzIHdlIGZpbmQgYW4gZXJyb3IgdG8gcHJvdmlkZSBlcnJvcnMgb25lIGF0IGEgdGltZVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbGwgdG9rZW5zIGZvciB3aGljaCB3ZSBoYXZlIGEgY3VzdG9tIGVycm9yIGNoZWNraW5nIGZ1bmN0aW9uXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEVhY2ggY3VzdG9tIGZ1bmN0aW9uIHNob3VsZCBoYW5kbGUgZXJyb3JzIG9uIGl0cyBvd24uXG4gICAgICBpZiggdG9rZW5zW2ldLnR5cGUgPT0gXCJJZGVudGlmaWVyXCIgJiYgT2JqZWN0LmtleXMoQ3VzdG9tRXJyb3JzKS5pbmRleE9mKCB0b2tlbnNbaV0udmFsdWUgKSA+IC0xICl7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2Vuc1tpXS52YWx1ZSk7XG4gICAgICAgIHZhciBlcnIgPSBDdXN0b21FcnJvcnNbdG9rZW5zW2ldLnZhbHVlXSh0b2tlbnMsIGkpO1xuICAgICAgICBpZiggZXJyICl7XG4gICAgICAgICAgIC8vQnJlYWsgYXMgc29vbiBhcyB3ZSBmaW5kIGFuIGVycm9yIHRvIHByb3ZpZGUgZXJyb3JzIG9uZSBhdCBhIHRpbWVcbiAgICAgICAgICByZXR1cm4gZXJyOyAgICBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgZGlzcGxheUVycm9yOiBmdW5jdGlvbihsb2NhdGlvbiwgbWVzc2FnZSl7XG4gICAgY29uc29sZS5sb2coXCJFcnJvciBmb3VuZFwiKTtcbiAgICBtYXJrSnNFcnJvckF0TGluZSggbG9jYXRpb24gKTtcblxuICAgICQoJyNlcnJvck1vZGFsIHAuZXJyb3ItdGV4dCcpLnRleHQoIG1lc3NhZ2UgKTtcbiAgICAkKCcjZXJyb3JNb2RhbCcpLmZvdW5kYXRpb24oJ3JldmVhbCcsICdvcGVuJyk7XG4gIH0sXG5cbiAgZXJyb3JNc2dzOiBlcnJvck1zZ3MsXG5cbiAgLy8gQ3VzdG9tIGZ1bmN0aW9ucyB0byBoYW5kbGUgdGFpbG9yZWQgZmVlZGJhY2suXG4gIGNyZWF0ZVBsYXRmb3JtOiBmdW5jdGlvbih0b2tlbnMsIGluZGV4KXtcbiAgICAvLyBIYW5kbGUgbXVsdGlscGUgc2lnbmF0dXJlcyBvZiBjcmVhdGVQbGF0Zm9ybSAoNCBhbmQgNSBhcmd1bWVudHMpXG4gICAgdmFyIHRlc3RzID0ge1xuICAgICAgICBmb3VyQXJnczogW1xuICAgICAgICAgICAvLyBXZSBtaWdodCBhbGxvdyBtdWx0aXBsZSBvcHRpb25zLCBzdWNoIGFzIElkZW50aWZpZXIgb3IgTnVtZXJpYy4gVXNlIGFycmF5cyB0byBhY2NvdW50IGZvciB0aGF0XG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycoJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnTnVtZXJpYycsICdJZGVudGlmaWVyJ10sICAgICAgICAgICAgICAgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCAgICAgICAgICAgICAgIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLm51bWJlciAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJywnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLmNvbW1hICB9LFxuICAgICAgICAgICB7dHlwZTogWydOdW1lcmljJywgJ0lkZW50aWZpZXInXSwgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCAsICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycpJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJzsnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnNlbWljb2xvbiAgfSxcbiAgICAgICAgIF0sXG4gICAgICAgICBmaXZlQXJnczogW1xuICAgICAgICAgICAvLyBXZSBtaWdodCBhbGxvdyBtdWx0aXBsZSBvcHRpb25zLCBzdWNoIGFzIElkZW50aWZpZXIgb3IgTnVtZXJpYy4gVXNlIGFycmF5cyB0byBhY2NvdW50IGZvciB0aGF0XG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycoJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnTnVtZXJpYycsICdJZGVudGlmaWVyJ10sICAgICAgICAgICAgICAgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCAgICAgICAgICAgICAgIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLm51bWJlciAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJywnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLmNvbW1hICB9LFxuICAgICAgICAgICB7dHlwZTogWydOdW1lcmljJywgJ0lkZW50aWZpZXInXSwgdmFsdWU6IG51bGwgLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MubnVtYmVyICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnLCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MuY29tbWEgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCAsICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycsJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5jb21tYSAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnU3RyaW5nJywgJ0lkZW50aWZpZXInXSwgIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLmNvbG9yIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycpJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJzsnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnNlbWljb2xvbiAgfSxcbiAgICAgICAgIF1cbiAgICB9XG5cbiAgICAvLyBPbmx5IHR3byBsZXZlbHMgcmVxdWlyZSB0aGUgdGVzdCB3aXRoIDQgYXJndW1lbnRzXG4gICAgdmFyIHRlc3QgPSAoIGN1cnJlbnRMZXZlbCA+IDEgJiYgY3VycmVudExldmVsIDwgNCApID8gdGVzdHMuZm91ckFyZ3MgOiB0ZXN0cy5maXZlQXJncztcbiAgXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZXN0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAvLyBOZWVkIHRvIGFkZCAxIHRvIHRoZSBwYXNzZWQgaW5kZXggdG8gYmVnaW4gY2hlY2tzIGFmdGVyIHRoZSB0cmlnZ2VyaW5nIGlkZW50aWZpZXJcbiAgICAgIHZhciB0b2tlbkluZGV4ID0gaW5kZXggKyAxICsgajtcblxuICAgICAgdmFyIHRva2VuVHlwZSA9IHRva2Vuc1t0b2tlbkluZGV4XS50eXBlO1xuICAgICAgdmFyIHRva2VuVmFsdWUgPSB0b2tlbnNbdG9rZW5JbmRleF0udmFsdWU7XG5cbiAgICAgIGlmKCB0ZXN0W2pdLnR5cGUuaW5kZXhPZiggdG9rZW5UeXBlICkgPT0gLTEgKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnIgQVwiKTtcbiAgICAgICAgY29uc29sZS5sb2codG9rZW5UeXBlKTtcbiAgICAgICAgY29uc29sZS5sb2codGVzdFtqXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRlc3QpO1xuICAgICAgICBjb25zb2xlLmxvZyh0b2tlbnNbdG9rZW5JbmRleF0pO1xuXG4gICAgICAgIC8vIEVycm9yIGZvdW5kLiBEaXNwbGF5IHRvIHRoZSB1c2VyIGFuZCBleGl0XG4gICAgICAgIHZhciBlcnIgPSB7XG4gICAgICAgICAgLy8gVXNlIG9yaWdpbmFsIGluZGV4IHRvIGhpZ2hsaWdodCB0aGUgY29ycmVjdCBsaW5lXG4gICAgICAgICAgdG9rZW46IHRva2Vuc1tpbmRleF0sIFxuICAgICAgICAgIGVyck1zZzogdGVzdFtqXS5lcnJvck1zZ1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiT3V0cHV0IGVycm9yXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuXG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKCBlcnIudG9rZW4ubG9jLnN0YXJ0LmxpbmUsIGVyci5lcnJNc2cgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBuZWVkIGEgc3BlY2lmaWMgdmFsdWUsIGNoZWNrIGl0XG4gICAgICBpZiggdGVzdFtqXS52YWx1ZSAmJiB0ZXN0W2pdLnZhbHVlLmluZGV4T2YoIHRva2VuVmFsdWUgKSA9PSAtMSApe1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVyciBCXCIpO1xuICAgICAgICAvLyBFcnJvciBmb3VuZC4gRGlzcGxheSB0byB0aGUgdXNlciBhbmQgZXhpdFxuICAgICAgICB2YXIgZXJyID0ge1xuICAgICAgICAgIC8vIFVzZSBvcmlnaW5hbCBpbmRleCB0byBoaWdobGlnaHQgdGhlIGNvcnJlY3QgbGluZVxuICAgICAgICAgIHRva2VuOiB0b2tlbnNbaW5kZXhdLCBcbiAgICAgICAgICBlcnJNc2c6IHRlc3Rbal0uZXJyb3JNc2dcbiAgICAgICAgfTtcblxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoIGVyci50b2tlbi5sb2Muc3RhcnQubGluZSwgZXJyLmVyck1zZyApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfTsgICAgICAgICAgIFxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgbWFrZVBsYXllckp1bXA6IGZ1bmN0aW9uKHRva2VucywgaW5kZXgpe1xuICAgIC8vIEhhbmRsZSBtdWx0aWxwZSBzaWduYXR1cmVzIG9mIGNyZWF0ZVBsYXRmb3JtICg0IGFuZCA1IGFyZ3VtZW50cylcbiAgICB2YXIgdGVzdHMgPSB7XG4gICAgICAgIG9uZUFyZ3M6IFtcbiAgICAgICAgICAgLy8gV2UgbWlnaHQgYWxsb3cgbXVsdGlwbGUgb3B0aW9ucywgc3VjaCBhcyBJZGVudGlmaWVyIG9yIE51bWVyaWMuIFVzZSBhcnJheXMgdG8gYWNjb3VudCBmb3IgdGhhdFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnKCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MucGFyZW50aGVzZXMgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCAsICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycpJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5wYXJlbnRoZXNlcyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJzsnXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnNlbWljb2xvbiAgfSxcbiAgICAgICAgIF0sXG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHdoYXQgZnVuY3Rpb24gc2lnbmF0dXJlIHdlIG5lZWQgdG8gY29tcGFyZSBhZ2FpbnN0XG4gICAgdmFyIHRlc3QgPSB0ZXN0cy5vbmVBcmdzO1xuICBcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRlc3QubGVuZ3RoOyBqKyspIHtcbiAgICAgIC8vIE5lZWQgdG8gYWRkIDEgdG8gdGhlIHBhc3NlZCBpbmRleCB0byBiZWdpbiBjaGVja3MgYWZ0ZXIgdGhlIHRyaWdnZXJpbmcgaWRlbnRpZmllclxuICAgICAgdmFyIHRva2VuSW5kZXggPSBpbmRleCArIDEgKyBqO1xuXG4gICAgICB2YXIgdG9rZW5UeXBlID0gdG9rZW5zW3Rva2VuSW5kZXhdLnR5cGU7XG4gICAgICB2YXIgdG9rZW5WYWx1ZSA9IHRva2Vuc1t0b2tlbkluZGV4XS52YWx1ZTtcblxuICAgICAgaWYoIHRlc3Rbal0udHlwZS5pbmRleE9mKCB0b2tlblR5cGUgKSA9PSAtMSApe1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVyciBBXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyh0b2tlblR5cGUpO1xuICAgICAgICBjb25zb2xlLmxvZyh0ZXN0W2pdKTtcbiAgICAgICAgY29uc29sZS5sb2codGVzdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2Vuc1t0b2tlbkluZGV4XSk7XG4gICAgICAgIC8vIEVycm9yIGZvdW5kLiBEaXNwbGF5IHRvIHRoZSB1c2VyIGFuZCBleGl0XG4gICAgICAgIHZhciBlcnIgPSB7XG4gICAgICAgICAgLy8gVXNlIG9yaWdpbmFsIGluZGV4IHRvIGhpZ2hsaWdodCB0aGUgY29ycmVjdCBsaW5lXG4gICAgICAgICAgdG9rZW46IHRva2Vuc1tpbmRleF0sIFxuICAgICAgICAgIGVyck1zZzogdGVzdFtqXS5lcnJvck1zZ1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKCBlcnIudG9rZW4ubG9jLnN0YXJ0LmxpbmUsIGVyci5lcnJNc2cgKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH07ICAgICAgICAgICBcbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIHNldFNwZWVkOiBmdW5jdGlvbih0b2tlbnMsIGluZGV4KXtcblxuICAgIC8vIEhhbmRsZSBtdWx0aWxwZSBzaWduYXR1cmVzIG9mIGNyZWF0ZVBsYXRmb3JtICg0IGFuZCA1IGFyZ3VtZW50cylcbiAgICB2YXIgdGVzdHMgPSB7XG4gICAgICAgIHR3b0FyZ3M6IFtcbiAgICAgICAgICAgLy8gV2UgbWlnaHQgYWxsb3cgbXVsdGlwbGUgb3B0aW9ucywgc3VjaCBhcyBJZGVudGlmaWVyIG9yIE51bWVyaWMuIFVzZSBhcnJheXMgdG8gYWNjb3VudCBmb3IgdGhhdFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnKCddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3MucGFyZW50aGVzZXMgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWyctJ10sICBvcHRpb25hbDogdHJ1ZSwgZXJyb3JNc2c6ICdPcHRpb25hbCB2YWx1ZScgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ051bWVyaWMnLCAnSWRlbnRpZmllciddLCB2YWx1ZTogbnVsbCwgICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5udW1iZXIgIH0sXG4gICAgICAgICAgIHt0eXBlOiBbJ1B1bmN0dWF0b3InXSwgICAgICAgICAgICB2YWx1ZTogWycsJ10sICBlcnJvck1zZzogQ3VzdG9tRXJyb3JzLmVycm9yTXNncy5jb21tYSAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJy0nXSwgIG9wdGlvbmFsOiB0cnVlLCBlcnJvck1zZzogJ09wdGlvbmFsIHZhbHVlJyAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnTnVtZXJpYycsICdJZGVudGlmaWVyJ10sIHZhbHVlOiBudWxsICwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLm51bWJlciAgfSxcbiAgICAgICAgICAge3R5cGU6IFsnUHVuY3R1YXRvciddLCAgICAgICAgICAgIHZhbHVlOiBbJyknXSwgIGVycm9yTXNnOiBDdXN0b21FcnJvcnMuZXJyb3JNc2dzLnBhcmVudGhlc2VzICB9LFxuICAgICAgICAgICB7dHlwZTogWydQdW5jdHVhdG9yJ10sICAgICAgICAgICAgdmFsdWU6IFsnOyddLCAgZXJyb3JNc2c6IEN1c3RvbUVycm9ycy5lcnJvck1zZ3Muc2VtaWNvbG9uICB9LFxuICAgICAgICAgXSxcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgd2hhdCBmdW5jdGlvbiBzaWduYXR1cmUgd2UgbmVlZCB0byBjb21wYXJlIGFnYWluc3RcbiAgICB2YXIgdGVzdCA9IHRlc3RzLnR3b0FyZ3M7XG4gIFxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVzdC5sZW5ndGg7IGorKykge1xuICAgICAgLy8gTmVlZCB0byBhZGQgMSB0byB0aGUgcGFzc2VkIGluZGV4IHRvIGJlZ2luIGNoZWNrcyBhZnRlciB0aGUgdHJpZ2dlcmluZyBpZGVudGlmaWVyXG4gICAgICB2YXIgdG9rZW5JbmRleCA9IGluZGV4ICsgMSArIGo7XG5cbiAgICAgIHZhciB0b2tlblR5cGUgPSB0b2tlbnNbdG9rZW5JbmRleF0udHlwZTtcbiAgICAgIHZhciB0b2tlblZhbHVlID0gdG9rZW5zW3Rva2VuSW5kZXhdLnZhbHVlO1xuXG4gICAgICAvL0lmIHRoZSBjdXJyZW50IHRlc3QgdmFsdWUgaXMgb3B0aW9uYWwsIGRvbid0IGVycm9yIG91dFxuICAgICAgaWYodGVzdFtqXS5vcHRpb25hbCl7XG4gICAgICAgIC8vSWYgdGhlIG9wdGlvbmFsIHRlc3QgcGFzc2VzLCBjb250aW51ZSB0byBuZXh0IGl0ZXJhdGlvblxuICAgICAgICBpZih0ZXN0W2pdLnR5cGUuaW5kZXhPZiggdG9rZW5UeXBlICkgIT09IC0xKXtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vT3RoZXJ3aXNlIHJlbW92ZSB0aGUgb3B0aW9uYWwgdGVzdFxuICAgICAgICB0ZXN0LnNwbGljZShqLCAxKTtcbiAgICAgIH1cblxuXG5cbiAgICAgIGlmKCB0ZXN0W2pdLnR5cGUuaW5kZXhPZiggdG9rZW5UeXBlICkgPT0gLTEpe1xuICAgICAgICBkZWIgPSB0b2tlbnNbdG9rZW5JbmRleF07XG4gICAgICAgIGNvbnNvbGUubG9nKFwic2V0U3BlZWQgZXJyb3IgZm91bmRcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRva2VuVHlwZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRlc3Rbal0pO1xuICAgICAgICBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgY29uc29sZS5sb2codG9rZW5zW3Rva2VuSW5kZXhdKTtcbiAgICAgICAgLy8gRXJyb3IgZm91bmQuIERpc3BsYXkgdG8gdGhlIHVzZXIgYW5kIGV4aXRcbiAgICAgICAgdmFyIGVyciA9IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luYWwgaW5kZXggdG8gaGlnaGxpZ2h0IHRoZSBjb3JyZWN0IGxpbmVcbiAgICAgICAgICB0b2tlbjogdG9rZW5zW2luZGV4XSwgXG4gICAgICAgICAgZXJyTXNnOiB0ZXN0W2pdLmVycm9yTXNnXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoIGVyci50b2tlbi5sb2Muc3RhcnQubGluZSwgZXJyLmVyck1zZyApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfTsgICAgICAgICAgIFxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbn1cblxuXG4iXX0=
