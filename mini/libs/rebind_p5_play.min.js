function p5PlayRebind(){(function(root,factory){if(typeof define==="function"&&define.amd)define("p5.play",["p5"],function(p5){factory(p5)});else if(typeof exports==="object")factory(require("../p5"));else factory(root["p5"])})(this,function(p5){p5.prototype.allSprites=new Group;p5.prototype.createSprite=function(x,y,width,height){var s=new Sprite(x,y,width,height);s.depth=allSprites.maxDepth()+1;allSprites.add(s);return s};p5.prototype.removeSprite=function(sprite){sprite.remove()};p5.prototype.updateSprites=function(upd){if(upd==false)spriteUpdate=false;if(upd==true)spriteUpdate=true;if(spriteUpdate)for(var i=0;i<allSprites.size();i++){allSprites.get(i).update()}};p5.prototype.spriteUpdate=true;p5.prototype.getSprites=function(){if(arguments.length===0){return allSprites.toArray()}else{var arr=[];for(var j=0;j<arguments.length;j++){for(var i=0;i<allSprites.size();i++){if(allSprites.get(i).isTagged(arguments[j]))arr.push(allSprites.get(i))}}return arr}};p5.prototype.drawSprites=function(group){if(arguments.length===0){allSprites.sort(function(a,b){return a.depth-b.depth});for(var i=0;i<allSprites.size();i++){allSprites.get(i).display()}}else if(arguments.length===1){if(arguments[0]instanceof Array==false)throw"Error: with drawSprites you can only draw all sprites or a group";else{arguments[0].draw()}}};p5.prototype.drawSprite=function(sprite){if(sprite!=null)sprite.display()};p5.prototype.loadAnimation=function(){return construct(Animation,arguments)};p5.prototype.animation=function(anim,x,y){anim.draw(x,y)};var keyStates={};var mouseStates={};var KEY_IS_UP=0;var KEY_WENT_DOWN=1;var KEY_IS_DOWN=2;var KEY_WENT_UP=3;p5.prototype.keyWentDown=function(key){var keyCode;if(typeof key=="string")keyCode=KEY[key.toUpperCase()];else keyCode=key;if(keyStates[keyCode]==undefined){if(keyIsDown(keyCode))keyStates[keyCode]=KEY_IS_DOWN;else keyStates[keyCode]=KEY_IS_UP}return keyStates[keyCode]==KEY_WENT_DOWN};p5.prototype.keyWentUp=function(key){var keyCode;if(typeof key=="string")keyCode=KEY[key.toUpperCase()];else keyCode=key;if(keyStates[keyCode]===undefined){if(keyIsDown(key))keyStates[keyCode]=KEY_IS_DOWN;else keyStates[keyCode]=KEY_IS_UP}return keyStates[keyCode]==KEY_WENT_UP};p5.prototype.keyDown=function(key){var keyCode;if(typeof key=="string")keyCode=KEY[key.toUpperCase()];else keyCode=key;if(keyStates[keyCode]===undefined){if(keyIsDown(key))keyStates[keyCode]=KEY_IS_DOWN;else keyStates[keyCode]=KEY_IS_UP}return keyStates[keyCode]==KEY_IS_DOWN};p5.prototype.mouseDown=function(buttonCode){if(buttonCode==undefined)buttonCode=LEFT;else buttonCode=buttonCode;if(mouseStates[buttonCode]===undefined){if(mouseIsPressed&&mouseButton==buttonCode)mouseStates[buttonCode]=KEY_IS_DOWN;else mouseStates[buttonCode]=KEY_IS_UP}return mouseStates[buttonCode]==KEY_IS_DOWN};p5.prototype.mouseUp=function(buttonCode){if(buttonCode==undefined)buttonCode=LEFT;else buttonCode=buttonCode;if(mouseStates[buttonCode]===undefined){if(mouseIsPressed&&mouseButton==buttonCode)mouseStates[buttonCode]=KEY_IS_DOWN;else mouseStates[buttonCode]=KEY_IS_UP}return mouseStates[buttonCode]==KEY_IS_UP};p5.prototype.mouseWentUp=function(buttonCode){if(buttonCode==undefined)buttonCode=LEFT;else buttonCode=buttonCode;if(mouseStates[buttonCode]===undefined){if(mouseIsPressed&&mouseButton==buttonCode)mouseStates[buttonCode]=KEY_IS_DOWN;else mouseStates[buttonCode]=KEY_IS_UP}return mouseStates[buttonCode]==KEY_WENT_UP};p5.prototype.mouseWentDown=function(buttonCode){if(buttonCode==undefined)buttonCode=LEFT;else buttonCode=buttonCode;if(mouseStates[buttonCode]===undefined){if(mouseIsPressed&&mouseButton==buttonCode)mouseStates[buttonCode]=KEY_IS_DOWN;else mouseStates[buttonCode]=KEY_IS_UP}return mouseStates[buttonCode]==KEY_WENT_DOWN};p5.prototype.KEY={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,PAGE_UP:33,SPACE:33," ":33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"0NUMPAD":96,"1NUMPAD":97,"2NUMPAD":98,"3NUMPAD":99,"4NUMPAD":100,"5NUMPAD":101,"6NUMPAD":102,"7NUMPAD":103,"8NUMPAD":104,"9NUMPAD":105,MULTIPLY:106,PLUS:107,MINUT:109,DOT:110,SLASH1:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,EQUAL:187,COMA:188,SLASH:191,BACKSLASH:220};p5.prototype.readPresses=function(){for(var key in keyStates){if(keyIsDown(key)){if(keyStates[key]==KEY_IS_UP)keyStates[key]=KEY_WENT_DOWN;else keyStates[key]=KEY_IS_DOWN}else{if(keyStates[key]==KEY_IS_DOWN)keyStates[key]=KEY_WENT_UP;else keyStates[key]=KEY_IS_UP}}for(var btn in mouseStates){if(mouseIsPressed&&mouseButton==btn){if(mouseStates[btn]==KEY_IS_UP)mouseStates[btn]=KEY_WENT_DOWN;else mouseStates[btn]=KEY_IS_DOWN}else{if(mouseStates[btn]==KEY_IS_DOWN)mouseStates[btn]=KEY_WENT_UP;else mouseStates[btn]=KEY_IS_UP}}};p5.prototype.useQuadTree=function(use){if(quadTree!=undefined){if(use==undefined)return quadTree.active;else if(use)quadTree.active=true;else quadTree.active=false}else return false};p5.prototype.quadTree=new Quadtree({x:0,y:0,width:0,height:0},4)})}